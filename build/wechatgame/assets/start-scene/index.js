window.__require=function t(e,o,n){function i(s,r){if(!o[s]){if(!e[s]){var c=s.split("/");if(c=c[c.length-1],!e[c]){var l="function"==typeof __require&&__require;if(!r&&l)return l(c,!0);if(a)return a(c,!0);throw new Error("Cannot find module '"+s+"'")}s=c}var u=o[s]={exports:{}};e[s][0].call(u.exports,function(t){return i(e[s][1][t]||t)},u,u.exports,t,e,o,n)}return o[s].exports}for(var a="function"==typeof __require&&__require,s=0;s<n.length;s++)i(n[s]);return i}({AudioMag:[function(t,e,o){"use strict";cc._RF.push(e,"26b49xOuM9NRYvQdjQC6Ou8","AudioMag"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){this.path="",this.btn="btn",this.isOpenMusic=!0,this.isOpenSound=!0,this.bundle=null}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.init=function(){var e=this;cc.assetManager.loadBundle("music",function(o,n){o?console.log(o,"\u52a0\u8f7d\u97f3\u6548bundle\u5931\u8d25"):(e.bundle=n,t.getInstance().playBGM("BGM"),console.log("\u52a0\u8f7d\u97f3\u6548bundle\u5b8c\u6210"))})},t.prototype.playSound=function(e,o,n){if(this.isOpenSound){var i=t._caseSoundsRes[e];i?cc.audioEngine.play(i,o||!1,n||1):this.bundle&&this.bundle.load(this.path+e,cc.AudioClip,function(e,i){if(e)cc.log(e);else{var a=i.name;t._caseSoundsRes[a]=i,cc.audioEngine.play(i,o||!1,n||1)}})}},t.prototype.playBGM=function(e){if(this.isOpenMusic&&(cc.audioEngine.setMusicVolume(1),t.bgm!=e)){cc.audioEngine.stopMusic(),t.bgm=e;var o=t._caseSoundsRes[e];o?cc.audioEngine.playMusic(o,!0):this.bundle&&this.bundle.load(this.path+e,cc.AudioClip,function(e,o){if(e)cc.log(e);else{var n=o.name;t._caseSoundsRes[n]=o,t.bgm==n&&cc.audioEngine.playMusic(o,!0)}})}},t.prototype.preLoadSound=function(t){var e=this.path+t;this.bundle.load(e,cc.AudioClip,function(t,e){t&&cc.error(t)})},t.prototype.stopAll=function(){cc.audioEngine.stopAll()},t.prototype.pauseAll=function(){cc.audioEngine.pauseAll()},t.prototype.resumeAll=function(){cc.audioEngine.resumeAll()},t.prototype.click=function(){this.playSound(this.btn)},t.prototype.changeSoundState=function(){this.isOpenSound=!this.isOpenSound},t.prototype.changeMusicState=function(){this.isOpenMusic?(this.pauseAll(),this.isOpenMusic=!1):(this.resumeAll(),this.isOpenMusic=!0)},t.bgm="",t._caseSoundsRes={},t}();o.default=n,cc._RF.pop()},{}],ConfigMag:[function(t,e,o){"use strict";cc._RF.push(e,"cb662QKtGJHCpXT5Lk+TJHJ","ConfigMag");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,s=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(s=(a<3?i(s):a>3?i(e,o,s):i(e,o))||s);return a>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.mechaAnimate=o.enemyAnimate=o.roleAnimate=void 0;var a=t("./GameMag"),s=[{id:0,killNum:100,rewardType:0,rewardNum:500},{id:1,killNum:250,rewardType:0,rewardNum:1e3},{id:2,killNum:500,rewardType:0,rewardNum:2500},{id:3,killNum:1e3,rewardType:1,rewardNum:5},{id:4,killNum:2e3,rewardType:1,rewardNum:10}],r=[{id:0,rewardType:0,rewardNum:500,taskType:0,target:1},{id:1,rewardType:0,rewardNum:1e3,taskType:0,target:100},{id:2,rewardType:0,rewardNum:2500,taskType:0,target:500},{id:3,rewardType:0,rewardNum:2500,taskType:1,target:10},{id:4,rewardType:0,rewardNum:5e3,taskType:0,target:1e3},{id:5,rewardType:1,rewardNum:10,taskType:1,target:50},{id:6,rewardType:0,rewardNum:2e4,taskType:0,target:5e3},{id:7,rewardType:1,rewardNum:10,taskType:0,target:1e4},{id:8,rewardType:0,rewardNum:5e4,taskType:0,target:5e4},{id:9,rewardType:1,rewardNum:100,taskType:0,target:1e5},{id:10,rewardType:0,rewardNum:500,taskType:2,target:10},{id:11,rewardType:0,rewardNum:1e3,taskType:2,target:30},{id:12,rewardType:0,rewardNum:5e3,taskType:2,target:60},{id:13,rewardType:1,rewardNum:10,taskType:2,target:120},{id:14,rewardType:0,rewardNum:3e4,taskType:2,target:300},{id:15,rewardType:1,rewardNum:50,taskType:2,target:600},{id:16,rewardType:0,rewardNum:500,taskType:3,target:5},{id:17,rewardType:0,rewardNum:1e3,taskType:3,target:10},{id:18,rewardType:0,rewardNum:1e3,taskType:3,target:15},{id:19,rewardType:0,rewardNum:2e3,taskType:3,target:20},{id:20,rewardType:1,rewardNum:10,taskType:3,target:25},{id:21,rewardType:0,rewardNum:3e3,taskType:3,target:30},{id:22,rewardType:0,rewardNum:5e3,taskType:3,target:40},{id:23,rewardType:1,rewardNum:30,taskType:3,target:60},{id:24,rewardType:0,rewardNum:1e5,taskType:4,target:10},{id:25,rewardType:1,rewardNum:100,taskType:4,target:24}],c=[{gunID:0,gunDescType:0,gunType:1,power:2,speed:2,buyOnceNum:0,buyOnceCost:0,buyType:0,costNum:3e3,lockStatus:!0,unlockLevel:0,unlockDiamond:0},{gunID:1,gunDescType:1,gunType:1,power:8,speed:2,buyOnceNum:0,buyOnceCost:0,buyType:1,costNum:100,lockStatus:!0,unlockLevel:0,unlockDiamond:0},{gunID:2,gunDescType:1,gunType:1,power:9,speed:2,buyOnceNum:0,buyOnceCost:0,buyType:1,costNum:200,lockStatus:!0,unlockLevel:0,unlockDiamond:0},{gunID:3,gunDescType:2,gunType:0,power:1,speed:2,buyOnceNum:0,buyOnceCost:0,buyType:0,costNum:0,lockStatus:!0,unlockLevel:0,unlockDiamond:0},{gunID:4,gunDescType:2,gunType:0,power:3,speed:3,buyOnceNum:30,buyOnceCost:100,buyType:0,costNum:6e3,lockStatus:!0,unlockLevel:0,unlockDiamond:0},{gunID:5,gunDescType:2,gunType:0,power:6,speed:3,buyOnceNum:20,buyOnceCost:200,buyType:0,costNum:15e3,lockStatus:!0,unlockLevel:0,unlockDiamond:0},{gunID:6,gunDescType:3,gunType:0,power:1,speed:7,buyOnceNum:30,buyOnceCost:100,buyType:0,costNum:7500,lockStatus:!0,unlockLevel:0,unlockDiamond:0},{gunID:7,gunDescType:3,gunType:0,power:2,speed:8,buyOnceNum:75,buyOnceCost:150,buyType:0,costNum:13500,lockStatus:!0,unlockLevel:0,unlockDiamond:0},{gunID:8,gunDescType:2,gunType:0,power:5,speed:3,buyOnceNum:30,buyOnceCost:100,buyType:1,costNum:150,lockStatus:!0,unlockLevel:0,unlockDiamond:0},{gunID:9,gunDescType:3,gunType:0,power:4,speed:5,buyOnceNum:50,buyOnceCost:300,buyType:0,costNum:3e4,lockStatus:!0,unlockLevel:0,unlockDiamond:0},{gunID:10,gunDescType:3,gunType:0,power:5,speed:6,buyOnceNum:40,buyOnceCost:450,buyType:0,costNum:5e4,lockStatus:!1,unlockLevel:5,unlockDiamond:10},{gunID:11,gunDescType:2,gunType:0,power:7,speed:1,buyOnceNum:25,buyOnceCost:500,buyType:0,costNum:45e3,lockStatus:!1,unlockLevel:5,unlockDiamond:10},{gunID:12,gunDescType:3,gunType:0,power:5,speed:1,buyOnceNum:30,buyOnceCost:1200,buyType:1,costNum:50,lockStatus:!0,unlockLevel:0,unlockDiamond:0},{gunID:13,gunDescType:3,gunType:0,power:4,speed:9,buyOnceNum:55,buyOnceCost:2e3,buyType:0,costNum:8e4,lockStatus:!1,unlockLevel:10,unlockDiamond:20},{gunID:14,gunDescType:3,gunType:0,power:6,speed:7,buyOnceNum:0,buyOnceCost:0,buyType:1,costNum:300,lockStatus:!0,unlockLevel:0,unlockDiamond:0},{gunID:15,gunDescType:1,gunType:0,power:5,speed:3,buyOnceNum:20,buyOnceCost:1500,buyType:0,costNum:9e4,lockStatus:!1,unlockLevel:12,unlockDiamond:25},{gunID:16,gunDescType:6,gunType:0,power:7,speed:3,buyOnceNum:20,buyOnceCost:1500,buyType:1,costNum:200,lockStatus:!0,unlockLevel:0,unlockDiamond:0},{gunID:17,gunDescType:4,gunType:0,power:8,speed:1,buyOnceNum:35,buyOnceCost:2e3,buyType:0,costNum:1e5,lockStatus:!1,unlockLevel:15,unlockDiamond:30},{gunID:18,gunDescType:1,gunType:1,power:8,speed:2,buyOnceNum:0,buyOnceCost:0,buyType:0,costNum:12e4,lockStatus:!1,unlockLevel:20,unlockDiamond:35},{gunID:19,gunDescType:5,gunType:0,power:9,speed:1,buyOnceNum:35,buyOnceCost:2e3,buyType:0,costNum:18e4,lockStatus:!1,unlockLevel:20,unlockDiamond:35},{gunID:20,gunDescType:5,gunType:0,power:10,speed:1,buyOnceNum:30,buyOnceCost:2e3,buyType:0,costNum:25e4,lockStatus:!1,unlockLevel:25,unlockDiamond:40},{gunID:21,gunDescType:5,gunType:0,power:10,speed:2,buyOnceNum:20,buyOnceCost:2e3,buyType:1,costNum:500,lockStatus:!0,unlockLevel:0,unlockDiamond:0},{gunID:22,gunDescType:3,gunType:0,power:9,speed:10,buyOnceNum:20,buyOnceCost:1500,buyType:0,costNum:5e5,lockStatus:!1,unlockLevel:30,unlockDiamond:50},{gunID:23,gunDescType:4,gunType:0,power:10,speed:5,buyOnceNum:35,buyOnceCost:2500,buyType:1,costNum:1500,lockStatus:!0,unlockLevel:0,unlockDiamond:0}],l=[{skinID:0,armor:2,speed:5,blood:2,buyType:0,costNum:0},{skinID:1,armor:3,speed:8,blood:3,buyType:0,costNum:3e4},{skinID:2,armor:3,speed:6,blood:5,buyType:0,costNum:1e5},{skinID:3,armor:6,speed:6,blood:8,buyType:1,costNum:200},{skinID:4,armor:8,speed:8,blood:10,buyType:1,costNum:500}],u=[{mechaID:0,power:7,speed:5,keepTime:35,buyType:0,costNum:5e3},{mechaID:1,power:7,speed:7,keepTime:70,buyType:1,costNum:15},{mechaID:2,power:10,speed:4,keepTime:90,buyType:1,costNum:20}],p=[{assistID:0,assistType:0,assistSize:1,assistNum:50,assistTime:0,buyType:0,costNum:500},{assistID:1,assistType:0,assistSize:2,assistNum:75,assistTime:0,buyType:0,costNum:750},{assistID:2,assistType:0,assistSize:3,assistNum:100,assistTime:0,buyType:0,costNum:1e3},{assistID:3,assistType:1,assistSize:1,assistNum:75,assistTime:10,buyType:0,costNum:1e3},{assistID:4,assistType:1,assistSize:2,assistNum:90,assistTime:20,buyType:0,costNum:2e3},{assistID:5,assistType:1,assistSize:3,assistNum:100,assistTime:30,buyType:0,costNum:3e3},{assistID:6,assistType:2,assistSize:1,assistNum:75,assistTime:10,buyType:0,costNum:1e3},{assistID:7,assistType:2,assistSize:2,assistNum:90,assistTime:20,buyType:0,costNum:2e3},{assistID:8,assistType:2,assistSize:3,assistNum:100,assistTime:30,buyType:0,costNum:3e3},{assistID:9,assistType:3,assistSize:1,assistNum:75,assistTime:10,buyType:0,costNum:1e3},{assistID:10,assistType:3,assistSize:2,assistNum:90,assistTime:20,buyType:0,costNum:2e3},{assistID:11,assistType:3,assistSize:3,assistNum:100,assistTime:30,buyType:0,costNum:3e3},{assistID:12,assistType:4,assistSize:1,assistNum:1,assistTime:0,buyType:0,costNum:1e3},{assistID:13,assistType:4,assistSize:2,assistNum:2,assistTime:0,buyType:0,costNum:2e3},{assistID:14,assistType:4,assistSize:3,assistNum:3,assistTime:0,buyType:0,costNum:3e3}],h=[{id:0,blood:2,power:1,speed:100,reward:8,time:1,rate:10,finalTime:10},{id:1,blood:2,power:1,speed:300,reward:10,time:2,rate:20,finalTime:15},{id:2,blood:3,power:1,speed:150,reward:12,time:15,rate:10,finalTime:20},{id:3,blood:5,power:1,speed:150,reward:25,time:25,rate:-10,finalTime:5},{id:4,blood:10,power:1,speed:150,reward:30,time:30,rate:-10,finalTime:10},{id:5,blood:15,power:2,speed:200,reward:35,time:55,rate:0,finalTime:15},{id:6,blood:15,power:1,speed:100,reward:70,time:45,rate:-10,finalTime:20},{id:7,blood:5,power:10,speed:300,reward:60,time:60,rate:-10,finalTime:60},{id:8,blood:30,power:2,speed:100,reward:160,time:80,rate:-10,finalTime:30},{id:9,blood:80,power:4,speed:250,reward:600,time:90,rate:-10,finalTime:45},{id:10,blood:120,power:5,speed:250,reward:1200,time:120,rate:-10,finalTime:60},{id:11,blood:200,power:5,speed:300,reward:1800,time:140,rate:-10,finalTime:70},{id:12,blood:300,power:10,speed:250,reward:1800,time:180,rate:-10,finalTime:90}],d=[500,1e3,1500,2e3,3e3];(function(t){t.Stay="stay",t.Walk="walk",t.Fire="fier",t.WalkFire="walk_fier",t.Die="die"})(o.roleAnimate||(o.roleAnimate={})),function(t){t.Walk0="walk_0",t.Walk1="walk_1",t.Walk2="walk_2",t.Ready0="ready_0",t.Ready1="ready_1",t.Ready2="ready_2",t.Attack0="attack_0",t.Attack1="attack_1",t.Attack2="attack_2",t.Die0="die_0",t.Die1="die_1"}(o.enemyAnimate||(o.enemyAnimate={})),function(t){t.Stay="stay",t.Walk="walk",t.ShopUp="show_up",t.Fire="stay_fier",t.WalkFire="walk_fier"}(o.mechaAnimate||(o.mechaAnimate={}));var f=cc._decorator,g=f.ccclass,y=(f.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var o;return n(e,t),o=e,Object.defineProperty(e,"Ins",{get:function(){return this._instance&&null!=this._instance||(this._instance=new o),this._instance},enumerable:!1,configurable:!0}),e.prototype.getTaskData=function(){return s},e.prototype.getAchieveData=function(){return r},e.prototype.getGunData=function(){return c},e.prototype.getSkinData=function(){return l},e.prototype.getMechaData=function(){return u},e.prototype.getAssistData=function(){return p},e.prototype.getEnemyData=function(){return h},e.prototype.getSignData=function(){return d},e.prototype.getKillReward=function(){return[20,50,100,200,500,800,1500]},e.prototype.roleAnimate=function(){var t=null===a.default.Ins.tryGun?a.default.Ins.useingData.gun:a.default.Ins.tryGun,e=a.default.Ins.shopShowGun||t,o={die:"",fire:"",stay:"",walk:"",walkFire:""},n="",i="";return 3==e||4==e||6==e||8==e?n="":0==e||1==e||2==e?n="_0":7==e||9==e||10==e||13==e||14==e||15==e||16==e||17==e||20==e||23==e?n="_1":5==e?n="_2":11==e?n="_3":12==e?n="_4":18==e?n="_5":19==e||21==e?n="_6":22==e&&(n="_7"),3==e||4==e||8==e?i="":0==e||1==e||2==e?i="_0":6==e?i="_1":7==e?i="_2":5==e?i="_3":9==e||10==e||13==e||14==e?i="_4":11==e?i="_5":12==e?i="_6":15==e?i="_7":16==e?i="_8":17==e?i="_9":18==e?i="_10":19==e||21==e?i="_11":20==e?i="_12":22==e?i="_13":23==e&&(i="_14"),o.die="die"+n,o.stay="stay"+n,o.walk="walk"+n,o.fire="fier"+i,o.walkFire="walk_fier"+i,o},e.prototype.getMissilePower=function(){return 10},e._instance=null,e=o=i([g],e)}(cc.Component));o.default=y,cc._RF.pop()},{"./GameMag":"GameMag"}],DialogMag:[function(t,e,o){"use strict";cc._RF.push(e,"c0df6nWzG9LyYY85P7d1Mx4","DialogMag");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,s=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(s=(a<3?i(s):a>3?i(e,o,s):i(e,o))||s);return a>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.DialogScript=o.DialogPath=void 0;var a=t("./ToolsMag");(function(t){t.PauseDialog="prefab/dialog/pauseDialog",t.ResultDialog="prefab/dialog/resultDialog",t.ShopDialog="prefab/dialog/shopDialog",t.TaskDialog="prefab/dialog/taskDialog",t.AchieveDialog="prefab/dialog/achieveDialog",t.FrontGameDialog="prefab/dialog/frontGameDialog",t.SignInDialog="prefab/dialog/signInDialog",t.MessageDialog="prefab/dialog/messageDialog",t.GuideDialog="prefab/dialog/guideDialog",t.MoreGameDialog="prefab/dialog/moreGameDialog"})(o.DialogPath||(o.DialogPath={})),function(t){t.PauseDialog="pauseDialog",t.ResultDialog="resultDialog",t.ShopDialog="shopDialog",t.TaskDialog="taskDialog",t.AchieveDialog="achieveDialog",t.FrontGameDialog="frontGameDialog",t.SignInDialog="signInDialog",t.MessageDialog="messageDialog",t.GuideDialog="guideDialog",t.MoreGameDialog="moreGameDialog"}(o.DialogScript||(o.DialogScript={}));var s=cc._decorator,r=s.ccclass,c=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.uiPrefabArray=[],e.uiDic={},e}var o;return n(e,t),o=e,Object.defineProperty(e,"Ins",{get:function(){return this.instance&&null!=this.instance||(this.instance=new o),this.instance},enumerable:!1,configurable:!0}),e.prototype.show=function(t,e,o){if(void 0===o&&(o=[]),!this.uiDic[t]){var n=this.uiPrefabArray[t],i=this;n?i._showPlane(n,t,e,o):a.default.Ins.getHomeResource(t,function(n){i.uiPrefabArray[t]=n,i._showPlane(n,t,e,o)})}},e.prototype._showPlane=function(t,e,o,n){void 0===n&&(n=[]);var i=cc.find("Canvas"),a=cc.instantiate(t);this.uiDic[e]=a;var s=this,r=a.getComponent(o);r.onInit?r.onInit.apply(r,n):console.error("\u811a\u672c\u6ca1\u6709onInit\u65b9\u6cd5");var c=r.onDestroy;r.onDestroy=function(){c&&c.call(r),delete s.uiDic[e]},i.addChild(a)},e.prototype.removePlane=function(t){var e=this.uiDic[t];e&&e.destroy()},e.instance=null,e=o=i([r],e)}(cc.Component));o.default=c,cc._RF.pop()},{"./ToolsMag":"ToolsMag"}],GameMag:[function(t,e,o){"use strict";cc._RF.push(e,"4be43yfsuJB9rrT0aiCfs2z","GameMag");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,s=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(s=(a<3?i(s):a>3?i(e,o,s):i(e,o))||s);return a>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./ConfigMag"),s=t("./ToolsMag"),r=t("./AudioMag"),c=cc._decorator,l=c.ccclass,u=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.currency=null,e.level=null,e.achieveRecord=null,e.achieveData=null,e.taskData=null,e.skinData=null,e.gunData=null,e.mechaData=null,e.assistData=null,e.useingData=null,e.signInData=null,e.musicStatus=null,e.guide=null,e.homeScene="Home",e.gameScene="Game",e.gameLoaded=!1,e.gamePause=!1,e.gameOver=!1,e.mapIndex=null,e.useingGun={},e.useingSkin={},e.useingGuns=[null,null,null,null],e.useingAssist=[null,null,null],e.isUseingMecha=!1,e.skillConfig=[.15,1.13,.05],e.shopShowGun=null,e.shopShowSkin=null,e.scrollToSkin=0,e.scrollToGun=0,e.scrollToAssist=0,e.scrollToMecha=0,e.useAttackAssist=0,e.frezonTime=3,e.reviveDiamod=5,e.trySkin=null,e.tryGun=null,e.tryGunBullet=null,e.initTryGunBullet=200,e.tryGunEquip=null,e.launchData=null,e.showJumpToGame=!1,e.gameKillNum=0,e.taskType=null,e.taskTypeArr=[],e.roleBlood=1,e.timeStart=null,e.timeOver=!1,e.runOver=!1,e.killOver=!1,e.missionData={killNum:null,moveNum:null,secondNum:null,coinNum:null,diamondNum:null},e.corpsePool=[],e.enemyPool=[],e.bulletPool=null,e.mechaBulletPool=null,e.rewardNumPool=null,e}var o;return n(e,t),o=e,Object.defineProperty(e,"Ins",{get:function(){return this._instance&&null!=this._instance||(this._instance=new o),this._instance},enumerable:!1,configurable:!0}),e.prototype.removeAllLocalData=function(){cc.sys.localStorage.removeItem("currency"),cc.sys.localStorage.removeItem("level"),cc.sys.localStorage.removeItem("achieveData"),cc.sys.localStorage.removeItem("achieveRecord"),cc.sys.localStorage.removeItem("taskData"),cc.sys.localStorage.removeItem("skinData"),cc.sys.localStorage.removeItem("gunData"),cc.sys.localStorage.removeItem("mechaData"),cc.sys.localStorage.removeItem("assistData"),cc.sys.localStorage.removeItem("useingData"),cc.sys.localStorage.removeItem("signInData"),cc.sys.localStorage.removeItem("guide")},e.prototype.initLocalStorageData=function(){this.initLevel(),this.initCurrency(),this.initSkinData(),this.initGunData(),this.initMechaData(),this.initAssistData(),this.initUseingData(),this.initAchieveData(),this.initAchieveRecordData(),this.initTaskData(),this.initGuide()},e.prototype.initGuide=function(){var t=[!1,!1,!1,!1,!1,!1,!1,!1],e=cc.sys.localStorage.getItem("guide");e?this.guide=JSON.parse(e):(cc.sys.localStorage.setItem("guide",JSON.stringify(t)),this.guide=t)},e.prototype.updateGuide=function(t){this.guide[t]=!0,cc.sys.localStorage.setItem("guide",JSON.stringify(this.guide))},e.prototype.initSignData=function(){var t={timeStamp:(new Date).getTime(),signDay:[!1,!1,!1,!1,!1,!1,!1]};console.log(t);var e=cc.sys.localStorage.getItem("signInData");e?this.signInData=e:(cc.sys.localStorage.setItem("signInData",JSON.stringify(t)),this.signInData=t),console.log("\u4e03\u65e5\u7b7e\u5230",this.signInData)},e.prototype.updateSignIn=function(t){this.signInData[t]=!0,cc.sys.localStorage.setItem("signInData",JSON.stringify(this.signInData))},e.prototype.initLevel=function(){var t=cc.sys.localStorage.getItem("level");t?this.level=JSON.parse(t):(cc.sys.localStorage.setItem("level",JSON.stringify(1)),this.level=1)},e.prototype.updateLevel=function(){this.level++,this.updateAchieveRecord(3),cc.sys.localStorage.setItem("level",JSON.stringify(this.level))},e.prototype.initAssistData=function(){for(var t=a.default.Ins.getAssistData().length,e=[],o=0;o<t;o++)e.push({assistID:o,getNum:0});var n=cc.sys.localStorage.getItem("assistData");n?this.assistData=JSON.parse(n):(cc.sys.localStorage.setItem("assistData",JSON.stringify(e)),this.assistData=e)},e.prototype.initSkinData=function(){var t=a.default.Ins.getSkinData().length,e=[];e.push({skinID:0,geted:!0});for(var o=1;o<t;o++)e.push({skinID:o,geted:!1});var n=cc.sys.localStorage.getItem("skinData");n?this.skinData=JSON.parse(n):(cc.sys.localStorage.setItem("skinData",JSON.stringify(e)),this.skinData=e)},e.prototype.initUseingData=function(){var t={skin:0,gun:3,mecha:-1,gunEquip:[3,-1,-1,-1],assistEquip:[-1,-1,-1]},e=cc.sys.localStorage.getItem("useingData");e?this.useingData=JSON.parse(e):(cc.sys.localStorage.setItem("useingData",JSON.stringify(t)),this.useingData=t)},e.prototype.initMechaData=function(){for(var t=a.default.Ins.getMechaData().length,e=[],o=0;o<t;o++)e.push({mechaID:o,getNum:0});var n=cc.sys.localStorage.getItem("mechaData");n?this.mechaData=JSON.parse(n):(cc.sys.localStorage.setItem("mechaData",JSON.stringify(e)),this.mechaData=e)},e.prototype.updateMechaData=function(t,e){this.mechaData[t].getNum+=e,cc.sys.localStorage.setItem("mechaData",JSON.stringify(this.mechaData))},e.prototype.updateAssistData=function(t,e){this.assistData[t].getNum+=e,cc.sys.localStorage.setItem("assistData",JSON.stringify(this.assistData))},e.prototype.updateUseingDataBySkin=function(t){t<0&&(t=0),this.useingData.skin=t,cc.sys.localStorage.setItem("useingData",JSON.stringify(this.useingData))},e.prototype.updateUseingDataByGun=function(t){this.useingData.gun=t,cc.sys.localStorage.setItem("useingData",JSON.stringify(this.useingData))},e.prototype.updateUseingDataByGunEquip=function(t,e){this.useingData.gunEquip[e]=t,cc.sys.localStorage.setItem("useingData",JSON.stringify(this.useingData))},e.prototype.updateUseingDataByAssistEquip=function(t,e){this.useingData.assistEquip[e]=t,cc.sys.localStorage.setItem("useingData",JSON.stringify(this.useingData))},e.prototype.updateUseingDataByMecha=function(t,e){void 0===e&&(e=null),this.useingData.mecha=e||t,cc.sys.localStorage.setItem("useingData",JSON.stringify(this.useingData))},e.prototype.updateSkinData=function(t){this.skinData[t].geted=!0,cc.sys.localStorage.setItem("skinData",JSON.stringify(this.skinData))},e.prototype.initGunData=function(){var t=[];a.default.Ins.getGunData().forEach(function(e){var o=null;o=1==e.gunType?-1:0;var n=null;n=3==e.gunID,t.push({gunID:e.gunID,geted:n,bulletNum:o,lockStatus:e.lockStatus})});var e=cc.sys.localStorage.getItem("gunData");e?this.gunData=JSON.parse(e):(cc.sys.localStorage.setItem("gunData",JSON.stringify(t)),this.gunData=t)},e.prototype.updateGunDataByLockStatus=function(t){this.gunData[t].lockStatus=!0,cc.sys.localStorage.setItem("gunData",JSON.stringify(this.gunData))},e.prototype.updateGunDataByGeted=function(t){this.gunData[t].geted=!0,cc.sys.localStorage.setItem("gunData",JSON.stringify(this.gunData))},e.prototype.updateGunDataByBulletNum=function(t,e){this.gunData[t].bulletNum+=e,cc.sys.localStorage.setItem("gunData",JSON.stringify(this.gunData))},e.prototype.initCurrency=function(){var t=cc.sys.localStorage.getItem("currency");if(t)this.currency=JSON.parse(t);else{var e={coin:2e3,diamond:5};cc.sys.localStorage.setItem("currency",JSON.stringify(e)),this.currency=e}console.log("\u672c\u5730\u8d27\u5e01",this.currency)},e.prototype.updateCurrency=function(t,e){var o=JSON.parse(cc.sys.localStorage.getItem("currency"));0===t?o.coin+=e:o.diamond+=e,this.currency=o,cc.sys.localStorage.setItem("currency",JSON.stringify(o))},e.prototype.initAchieveData=function(){for(var t=a.default.Ins.getAchieveData(),e=[],o=0;o<t.length;o++)e.push({id:o,geted:!1});var n=cc.sys.localStorage.getItem("achieveData");n?this.achieveData=JSON.parse(n):(cc.sys.localStorage.setItem("achieveData",JSON.stringify(e)),this.achieveData=e)},e.prototype.updateAchieveData=function(t){this.achieveData[t].geted=!0,cc.sys.localStorage.setItem("achieveData",JSON.stringify(this.achieveData))},e.prototype.initAchieveRecordData=function(){var t={killNum:0,killBossNum:0,timer:0,level:1,gunSum:1},e=cc.sys.localStorage.getItem("achieveRecord");e?this.achieveRecord=JSON.parse(e):(cc.sys.localStorage.setItem("achieveRecord",JSON.stringify(t)),this.achieveRecord=t)},e.prototype.updateAchieveRecord=function(t){var e=this.achieveRecord;switch(t){case 0:e.killNum++,this.updateTaskKills();break;case 1:e.killBossNum++,this.updateTaskKills();break;case 2:e.timer++;case 3:e.level=this.level;break;case 4:e.gunSum++}cc.sys.localStorage.setItem("achieveRecord",JSON.stringify(e))},e.prototype.initTaskData=function(){for(var t=a.default.Ins.getTaskData(),e=[],o=(new Date).getDate(),n=0;n<t.length;n++)e.push({id:n,geted:!1});var i={day:o,killSum:0,data:e},s=cc.sys.localStorage.getItem("taskData");if(s){var r=JSON.parse(s);r.day!=o?(cc.sys.localStorage.setItem("taskData",JSON.stringify(i)),this.taskData=i):this.taskData=r}else cc.sys.localStorage.setItem("taskData",JSON.stringify(i)),this.taskData=i;console.log("\u672c\u5730\u6bcf\u65e5\u4efb\u52a1\u6570\u636e",this.taskData)},e.prototype.updateTaskGet=function(t){this.taskData.data[t].geted=!0,cc.sys.localStorage.setItem("taskData",JSON.stringify(this.taskData))},e.prototype.updateTaskKills=function(){this.taskData.killSum++,cc.sys.localStorage.setItem("taskData",JSON.stringify(this.taskData))},e.prototype.searchGunData=function(t,e){for(var o=0,n=t.length-1;o<=n;){var i=Math.floor((o+n)/2);if(e===t[i].gunID)return t[i];e>t[i].gunID?o=i+1:n=i-1}return!1},e.prototype.searchAssistData=function(t,e){for(var o=0,n=t.length-1;o<=n;){var i=Math.floor((o+n)/2);if(e===t[i].assistID)return t[i];e>t[i].assistID?o=i+1:n=i-1}return!1},e.prototype.searchSkinData=function(t,e){for(var o=0,n=t.length-1;o<=n;){var i=Math.floor((o+n)/2);if(e===t[i].skinID)return t[i];e>t[i].skinID?o=i+1:n=i-1}return!1},e.prototype.changeSkin=function(t,e){var o=null===this.tryGun?this.useingData.gun:this.tryGun,n=this.shopShowGun||o,i=[],a=null;n<=4||6==n||8==n?(i=["arms"],a=6==n?5:8==n?6:n):(i=["arms_1"],a=5==n?0:7==n?1:n-7),this.loadDisplayIndex(["chest","front_coat","forearm","back_arm","back_coat","broken_head","head","forearm","forearm_1","forehand","forehand_1","backhand_1","backhand","back_arm"].concat(i),t,a),e&&e()},e.prototype.changeFoot=function(t,e){void 0===e&&(e=null);for(var n=["forelegs","hind_leg"],i=o.Ins.trySkin||(null===this.shopShowSkin?this.useingData.skin:this.shopShowSkin),a=0,s=n.length;a<s;a++){t.armature().getSlot(n[a]).displayIndex=i}e&&e()},e.prototype.loadDisplayIndex=function(t,e,n){void 0===n&&(n=null);for(var i=o.Ins.trySkin||(null===this.shopShowSkin?this.useingData.skin:this.shopShowSkin),a=0,s=t.length;a<s;a++){var r=e.armature().getSlot(t[a]);if(a==s-1){r.displayIndex=n;break}r.displayIndex=i}},e.prototype.playGunSound=function(){var t=null,e=null===this.tryGun?this.useingData.gun:this.tryGun,o=this.shopShowGun||e;0==o?t="\u68d2\u7403":1==o||2==o?t="\u5149\u5251":3==o?t="\u521d\u59cb\u67aa":4==o||8==o?t="\u6c99\u6f20\u4e4b\u9e70":5==o?t="\u5de6\u8f6e":6==o?t="\u4e4c\u5179":7==o?t="P90":9==o||14==o?t="AK":10==o||13==o?t="M4":11==o||12==o?t="\u6563\u5f39\u67aa":15==o?t="\u706b\u7130\u67aa":16==o?t="\u51b0\u51bb\u67aa":17==o?t="\u72d9\u51fb\u67aa":18==o?t="\u7535\u952f":19==o||20==o||21==o?t="RPG":22==o?t="\u52a0\u7279\u6797":23==o&&(t="\u956d\u5c04\u67aa"),r.default.getInstance().playSound(t)},e.prototype.initGamePools=function(){var t=this,e=new cc.NodePool,n=new cc.NodePool,i=new cc.NodePool,a=new cc.NodePool,r=new cc.NodePool,c=new cc.NodePool,l=new cc.NodePool,u=new cc.NodePool,p=new cc.NodePool,h=new cc.NodePool,d=new cc.NodePool,f=new cc.NodePool,g=new cc.NodePool;this.corpsePool.push(e),this.corpsePool.push(n),this.corpsePool.push(i),this.corpsePool.push(a),this.corpsePool.push(r),this.corpsePool.push(c),this.corpsePool.push(l),this.corpsePool.push(u),this.corpsePool.push(p),this.corpsePool.push(h),this.corpsePool.push(d),this.corpsePool.push(f),this.corpsePool.push(g);var y=new cc.NodePool,m=new cc.NodePool,v=new cc.NodePool,b=new cc.NodePool,I=new cc.NodePool,D=new cc.NodePool,_=new cc.NodePool,w=new cc.NodePool,S=new cc.NodePool,N=new cc.NodePool,T=new cc.NodePool,k=new cc.NodePool,B=new cc.NodePool;this.enemyPool.push(y),this.enemyPool.push(m),this.enemyPool.push(v),this.enemyPool.push(b),this.enemyPool.push(I),this.enemyPool.push(D),this.enemyPool.push(_),this.enemyPool.push(w),this.enemyPool.push(S),this.enemyPool.push(N),this.enemyPool.push(T),this.enemyPool.push(k),this.enemyPool.push(B),this.rewardNumPool=new cc.NodePool,s.default.Ins.getGameResource("prefab/killRewardNum",function(e){for(var o=cc.instantiate(e),n=0;n<3;n++)t.rewardNumPool.put(o)}),this.bulletPool=new cc.NodePool,s.default.Ins.getGameResource("prefab/bullets/bullet",function(e){for(var o=cc.instantiate(e),n=0;n<10;n++)t.bulletPool.put(o)}),-1!=o.Ins.useingData.mecha&&(this.mechaBulletPool=new cc.NodePool,s.default.Ins.getGameResource("prefab/bullets/mechaBullet",function(e){for(var o=cc.instantiate(e),n=0;n<10;n++)t.mechaBulletPool.put(o)}))},e.prototype.getEnemy=function(t,e){var o=null;if(this.enemyPool[t].size()>0)return o=this.enemyPool[t].get(),void(e&&e(o));s.default.Ins.getGameResource("prefab/enemys/enemy"+t,function(t){o=cc.instantiate(t),e&&e(o)})},e.prototype.putEnemy=function(t,e){this.enemyPool[t].put(e)},e.prototype.getCorpse=function(t,e){var o=null;if(this.corpsePool[t].size()>0)return o=this.corpsePool[t].get(),void(e&&e(o));s.default.Ins.getGameResource("prefab/corpse/corpse"+t,function(t){o=cc.instantiate(t),e&&e(o)})},e.prototype.putCorpse=function(t,e,o){void 0===o&&(o=null),this.corpsePool[t].put(e)},e.prototype.getRewardNum=function(t){var e=null;if(this.rewardNumPool.size()>0)return e=this.rewardNumPool.get(),void(t&&t(e));s.default.Ins.getGameResource("prefab/killRewardNum",function(o){e=cc.instantiate(o),t&&t(e)})},e.prototype.putRewardNum=function(t){this.rewardNumPool.put(t)},e.prototype.getBullet=function(t){var e=null;if(this.bulletPool.size()>0)return e=this.bulletPool.get(),void(t&&t(e));s.default.Ins.getGameResource("prefab/bullets/bullet",function(o){e=cc.instantiate(o),t&&t(e)})},e.prototype.putBullet=function(t){this.bulletPool.put(t)},e.prototype.getMechaBullet=function(t){var e=null;if(this.mechaBulletPool.size()>0)return e=this.mechaBulletPool.get(),void(t&&t(e));s.default.Ins.getGameResource("prefab/bullets/mechaBullet",function(o){e=cc.instantiate(o),t&&t(e)})},e.prototype.putMechaBullet=function(t){this.mechaBulletPool.put(t)},e._instance=null,e=o=i([l],e)}(cc.Component));o.default=u,cc._RF.pop()},{"./AudioMag":"AudioMag","./ConfigMag":"ConfigMag","./ToolsMag":"ToolsMag"}],Hts:[function(t,e,o){"use strict";cc._RF.push(e,"0f297tBnxBPoqHo+NHDhdol","Hts"),Object.defineProperty(o,"__esModule",{value:!0}),o.hts=void 0;var n=t("./htSdk"),i=function(){function t(){this.htSdk=n.default}return t.instance=function(){return t.me?t.me:(t.me=new t,t.me)},t.prototype.getUid=function(){return this.htSdk.getUid()},t.prototype.init=function(t,e,o){this.htSdk.init(t,e,o)},t.prototype.getBox=function(t,e){this.htSdk.getBox(t,e)},t.prototype.navFrom=function(t,e){this.htSdk.navFrom(t,e)},t.prototype.navTo=function(t,e,o,n){this.htSdk.navTo(t,e,o,n)},t.prototype.jlog=function(t,e,o){this.htSdk.jlog(t,e,o)},t.prototype.getSharePic=function(t,e){this.htSdk.getSharePic(t,e)},t.prototype.shareTo=function(t){this.htSdk.shareTo(t)},t.prototype.shareFrom=function(t){this.htSdk.shareFrom(t)},t.prototype.jreq=function(t,e,o){this.htSdk.jreq(t,e,o)},t}();o.hts=i.instance(),cc._RF.pop()},{"./htSdk":"htSdk"}],ISdk:[function(t,e,o){"use strict";cc._RF.push(e,"dd76dOK2U5ClK1hCJ00S3i5","ISdk"),cc._RF.pop()},{}],Interstitial:[function(t,e,o){"use strict";cc._RF.push(e,"16eadYBqkxLrKr142TR5ypy","Interstitial"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){}return t.prototype.create=function(t){this.adId=t,this.interstitial=wx.createInterstitialAd({adUnitId:t}),this.interstitial.onClose(this.onClose.bind(this)),this.interstitial.onError(this.onError.bind(this)),this.show()},t.prototype.show=function(){this.interstitial.show()},t.prototype.onClose=function(t){},t.prototype.onError=function(t){console.warn("[Interstitial] onError, msg:"+t.errMsg+", code:"+t.errCode)},t}();o.default=n,cc._RF.pop()},{}],SdkManager:[function(t,e,o){"use strict";cc._RF.push(e,"b73eeqCifdGlJ/Azp/7yucy","SdkManager"),Object.defineProperty(o,"__esModule",{value:!0}),o.InterstitialType=o.VideoType=o.BannerPos=o.Platform=void 0;var n,i,a=t("./wechat/Wechat"),s=t("./ShareManager");(function(t){t[t.None=0]="None",t[t.Wechat=1]="Wechat",t[t.QQGame=2]="QQGame",t[t.Toutiao=3]="Toutiao"})(n=o.Platform||(o.Platform={})),function(t){t[t.Bottom=0]="Bottom",t[t.Top=1]="Top",t[t.LeftBottom=2]="LeftBottom",t[t.RightBottom=3]="RightBottom"}(i=o.BannerPos||(o.BannerPos={})),function(t){t[t.FreeGold=0]="FreeGold"}(o.VideoType||(o.VideoType={})),function(t){t[t.Match=0]="Match",t[t.Result=1]="Result"}(o.InterstitialType||(o.InterstitialType={}));var r=function(){function t(){this.platform=n.None,this.isToutiao=!1,this.openId=null}return Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasSdk",{get:function(){return this.platform!=n.None},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasAuth",{get:function(){return this.platform==n.None||this.sdk.hasAuth},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasOpenId",{get:function(){return this.sdk.openId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRelease",{get:function(){return cc.sys.platform!=cc.sys.DESKTOP_BROWSER},enumerable:!1,configurable:!0}),t.prototype.InitSDK=function(){cc.sys.platform==cc.sys.WECHAT_GAME&&(this.platform=this.isToutiao?n.Toutiao:n.Wechat,this.sdk=this.isToutiao?new Toutiao:new a.default,this.sdk.init())},t.prototype.LoginSDK=function(){this.hasSdk&&this.sdk.login()},t.prototype.UpdateOpenId=function(t){this.hasSdk&&(this.sdk.openId=t)},t.prototype.auth=function(){this.hasSdk&&this.sdk.auth()},t.prototype.share=function(t,e,o){if(this.hasSdk){var n=s.default.instance.getShareData(t);this.sdk.share(n,e,o)}else e&&e.call(o,!0)},t.prototype.bannerShow=function(t){void 0===t&&(t=i.Bottom),this.hasSdk&&this.sdk.bannerShow(t)},t.prototype.showBanner=function(t){void 0===t&&(t=i.Bottom),this.hasSdk&&this.sdk.showBanner(t)},t.prototype.hideBanner=function(){this.hasSdk&&this.sdk.hideBanner()},t.prototype.destroyBanner=function(){this.hasSdk&&this.sdk.destroyBanner()},t.prototype.showVideo=function(t,e,o,n){void 0===n&&(n=!1),this.hasSdk?this.sdk.showVideo(t,e,o,n):e.call(o,!0)},t.prototype.showInterstitial=function(t){this.hasSdk&&this.sdk.showInterstitial(t)},t.prototype.openOtherGame=function(t,e){this.hasSdk&&this.sdk.openOtherGame(t,e)},t.prototype.jumpToOtherGame=function(t){this.hasSdk&&this.sdk.jumpToOtherGame(t)},Object.defineProperty(t.prototype,"systemInfo",{get:function(){if(this.hasSdk)return this.sdk.systemInfo},enumerable:!1,configurable:!0}),t.prototype.vibrateLong=function(){this.hasSdk&&this.sdk.vibrateLong()},t.prototype.vibrateShort=function(){this.hasSdk&&this.sdk.vibrateShort()},t.prototype.StartRecorder=function(t){this.hasSdk&&this.sdk.StartRecorder(t)},t.prototype.StopRecorder=function(){this.hasSdk&&this.sdk.StopRecorder()},t.prototype.ShareRecorder=function(){this.hasSdk&&this.sdk.ShareRecorder()},t.prototype.ShowMoreGamesModal=function(){this.hasSdk&&this.sdk.ShowMoreGamesModal()},t._instance=null,t}();o.default=r,cc._RF.pop()},{"./ShareManager":"ShareManager","./wechat/Wechat":"Wechat"}],ShareManager:[function(t,e,o){"use strict";cc._RF.push(e,"59395ljk95BH7fdlYlMxggS","ShareManager"),Object.defineProperty(o,"__esModule",{value:!0}),o.ShareData=o.ShareType=void 0;var n,i=function(){function t(){}return Object.defineProperty(t,"instance",{get:function(){return null==this._instance&&(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shareData",{get:function(){return this._shareData||(this._shareData=this.getShareData(n.Normal)),this._shareData},enumerable:!1,configurable:!0}),t.prototype.getShareData=function(t){return new a("\u3010\u6709\u4eba@\u6211\u3011\u5feb\u6765\u4e00\u8d77\u73a9\uff01","invite1",t)},t}();o.default=i,function(t){t[t.Normal=2]="Normal",t[t.DZ=4]="DZ"}(n=o.ShareType||(o.ShareType={}));var a=function(){return function(t,e,o,n){void 0===n&&(n=""),this.title=t,this.image=e,this.type=o,this.tableId=n}}();o.ShareData=a,cc._RF.pop()},{}],ToolsMag:[function(t,e,o){"use strict";cc._RF.push(e,"476a7QJVnVJIowRswzRvks3","ToolsMag");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,s=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(s=(a<3?i(s):a>3?i(e,o,s):i(e,o))||s);return a>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./AudioMag"),s=cc._decorator,r=s.ccclass,c=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var o;return n(e,t),o=e,Object.defineProperty(e,"Ins",{get:function(){return this._instance&&null!=this._instance||(this._instance=new o),this._instance},enumerable:!1,configurable:!0}),e.prototype.getHomeResource=function(t,e){var o=cc.assetManager.getBundle("home");if(!o)throw new Error("\u8be5Bundle\u672a\u52a0\u8f7d!~~~");o.load(t,cc.Asset,function(t,e,o){},function(t,o){if(t)throw new Error("getHomeResource:"+t);e&&e(o)})},e.prototype.getGameResource=function(t,e){var o=cc.assetManager.getBundle("game");if(!o)throw new Error("\u8be5Bundle\u672a\u52a0\u8f7d!~~~");o.load(t,cc.Asset,function(t,e,o){},function(t,o){if(t)throw new Error("getGameResource:"+t);e&&e(o)})},e.prototype.getHomeDir=function(t,e){var o=cc.assetManager.getBundle("home");if(!o)throw new Error("\u8be5Bundle\u672a\u52a0\u8f7d!~~~");o.loadDir(t,cc.Asset,function(t,e,o){},function(t,o){if(t)throw new Error("getHomeDir:"+t);e&&e(o)})},e.prototype.getGameDir=function(t,e){var o=cc.assetManager.getBundle("game");if(!o)throw new Error("\u8be5Bundle\u672a\u52a0\u8f7d!~~~");o.loadDir(t,cc.Asset,function(t,e,o){},function(t,o){if(t)throw new Error("getGameDir:"+t);e&&e(o)})},e.prototype.binarySearch=function(t,e){for(var o=0,n=t.length-1;o<=n;){var i=Math.floor((o+n)/2);if(e===t[i])return!0;e>t[i]?o=i+1:n=i-1}return!1},e.prototype.flyInAction=function(t,e){var o=cc.view.getVisibleSize().height,n=null,i=null,a=t.height/2+80;switch(e){case 0:n=o/2+t.height,i=cc.sequence(cc.moveTo(.4,0,o/2-a-10),cc.moveTo(.05,0,o/2-a+10));break;case 1:n=-o/2-t.height,i=cc.moveTo(.3,0,-o/2+a),i=cc.sequence(cc.moveTo(.4,0,-o/2+a+10),cc.moveTo(.05,0,-o/2+a-10))}t.setPosition(0,n),t.stopAllActions(),cc.tween(t).then(i).start()},e.prototype.playDragonBone=function(t,e,o,n){t.active=!0,t.opacity=255;var i=t.getComponent(dragonBones.ArmatureDisplay);this.removeDragonBone(t),0==o?i.addEventListener(dragonBones.EventObject.LOOP_COMPLETE,function(){n&&n()},this):i.addEventListener(dragonBones.EventObject.COMPLETE,function(){n&&n()},this),i.playAnimation(e,o)},e.prototype.removeDragonBone=function(t){t.getComponent(dragonBones.ArmatureDisplay).removeEventListener(dragonBones.EventObject.COMPLETE)},e.prototype.saveForBrowser=function(t,e){if(cc.sys.isBrowser){var o=new Blob([t],{type:"application/json"}),n=document.createElement("a");n.download=e,n.innerHTML="Download\xa0File",null!=window.webkitURL?n.href=window.webkitURL.createObjectURL(o):(n.href=window.URL.createObjectURL(o),n.style.display="none",document.body.appendChild(n)),n.click()}},e.prototype.buttonAction=function(t,e){a.default.getInstance().playSound("\u6309\u94ae\u97f3"),cc.tween(t).to(.3,{opacity:0}).call(function(){e&&e(),t.opacity=255}).start()},e.prototype.formateSeconds=function(t){var e=Math.floor(t),o=0;return e>60&&(o=Math.floor(e/60),e=Math.floor(e%60)),o.toString().padStart(2,"0")+":"+e.toString().padStart(2,"0")},e._instance=null,e=o=i([r],e)}(cc.Component));o.default=c,cc._RF.pop()},{"./AudioMag":"AudioMag"}],Video:[function(t,e,o){"use strict";cc._RF.push(e,"6e01eI4TsVFcalZZDmaGD+U","Video"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../SdkManager"),i=t("../ShareManager"),a=function(){function t(){}return t.prototype.create=function(t,e,o,n){void 0===n&&(n=!1),this.adId=t,this.video=wx.createRewardedVideoAd({adUnitId:t,multiton:!0}),this.video.onLoad(this.onLoad.bind(this)),this.video.onClose(this.onClose.bind(this)),this.video.onError(this.onError.bind(this)),this.show(e,o,n)},t.prototype.show=function(t,e,o){var n=this;void 0===o&&(o=!1),this.callback=t,this.cbSelf=e,this.errorToShare=o,this.video.show().catch(function(t){n.video.load().then(function(){return n.video.show()})})},t.prototype.onLoad=function(){},t.prototype.onClose=function(t){t&&t.isEnded||void 0===t?this.isPlayFinish=!0:this.isPlayFinish=!1,this.callback.call(this.cbSelf,this.isPlayFinish)},t.prototype.onError=function(t){var e=this;console.warn("[Video] onError, code:"+t.errCode+", msg:"+t.errMsg),this.errorToShare?n.default.instance.share(i.ShareType.Normal,function(t){e.callback.call(e.cbSelf,t)},this):this.callback.call(this.cbSelf,!1)},t.prototype.clear=function(){this.video&&(this.video.offLoad(this.onLoad),this.video.offClose(this.onClose),this.video.offError(this.onError),this.video=null)},t}();o.default=a,cc._RF.pop()},{"../SdkManager":"SdkManager","../ShareManager":"ShareManager"}],Wechat:[function(t,e,o){"use strict";cc._RF.push(e,"f861b27ETBMrKDYy+0dNbHE","Wechat"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../SdkManager"),i=t("../common/Video"),a=t("../common/Interstitial"),s=t("../ShareManager"),r=t("../../hutui/Hts"),c=t("../../manage/DialogMag"),l=t("../../manage/GameMag"),u=function(){function t(){this.shareTime=0,this.bannerArr=[],this.bannerWidth=280,this.bannerHeight=100,this.videos=[],this.interstitials=[]}return Object.defineProperty(t,"instance",{get:function(){return null==t._instance&&(t._instance=new t),t._instance},enumerable:!1,configurable:!0}),t.prototype.init=function(){this.getSetting(),wx.setKeepScreenOn({keepScreenOn:!0}),wx.updateShareMenu({withShareTicket:!0}),wx.showShareMenu({withShareTicket:!0}),this.systemInfo=wx.getSystemInfoSync(),this.getLaunchOptions(),wx.onShow(this.onShow.bind(this)),wx.onShareAppMessage(this.onShareAppMessage.bind(this));try{wx.onShareMessageToFriend(this.onShareMessageToFriend.bind(this))}catch(t){}},t.prototype.getSetting=function(){var t=this;wx.getSetting({success:function(e){t.hasAuth=1==e.authSetting["scope.userInfo"],t.getUserInfo()}})},t.prototype.getUserInfo=function(){if(this.hasAuth){var t=this;wx.getUserInfo({success:function(e){t.nickName=e.userInfo.nickName,t.avatarUrl=e.userInfo.avatarUrl}})}},t.prototype.getLaunchOptions=function(){},t.prototype.onShow=function(t){this.checkShareState()},t.prototype.mtOnShareAppMessage=function(){var t=s.default.instance.shareData;return{title:t.title,imageUrl:t.image,imageUrlId:"",query:"type="+t.type+"&tableId="+t.tableId}},t.prototype.onShareAppMessage=function(){var t=s.default.instance.shareData;return{title:t.title,imageUrl:t.image}},t.prototype.onShareMessageToFriend=function(t){t.success},t.prototype.login=function(){wx.login({success:function(t){},fail:function(t){console.error("login fail:"+t.errMsg)}})},t.prototype.checkShareState=function(){if(this.shareCb){var t=(new Date).getTime()-this.shareTime>3e3;t||console.log("\u8bf7\u5206\u4eab\u5230\u4e0d\u540c\u7684\u7fa4"),this.shareCb.call(this.shareCbSelf,t),this.shareCb=null}},t.prototype.share=function(t,e,o){this.shareTime=(new Date).getTime(),this.shareCb=e,this.shareCbSelf=o;var n={title:t.title,imageUrl:t.image,query:"type="+t.type+"&tableId="+t.tableId};wx.shareAppMessage(n)},t.prototype.auth=function(){var t=this;if(!this.hasAuth&&!this.authButton){var e=cc.view.getFrameSize(),o={type:"image",style:{left:0,top:0,width:e.width,height:e.height}};this.authButton=wx.createUserInfoButton(o);var n=this;this.authButton.onTap(function(e){if(n.removeAuthButton(),console.log("\u6388\u6743\u7ed3\u679c, res="+JSON.stringify(e)),"getUserInfo:ok"==e.errMsg){e.userInfo.nickName,e.userInfo.avatarUrl;t.hasAuth=!0}})}},t.prototype.removeAuthButton=function(){this.authButton&&(this.authButton.destroy(),this.authButton=null)},t.prototype.bannerShow=function(t){if(0!=this.bannerArr.length){console.log("\u663e\u793a\u66b4\u529bbanner");var e=Math.floor(Math.random()*this.bannerArr.length);this.banner=this.bannerArr[e],this.banner.show(),this.bannerPos!=t&&this.setBannerPosition(t)}else this.showBanner(t)},t.prototype.showBanner=function(t){console.log("\u663e\u793abanner");var e=this.getBannerId(),o=this.systemInfo.screenWidth,n=this.systemInfo.screenHeight,i=this.bannerWidth,a=this.bannerHeight;this.banner=wx.createBannerAd({adUnitId:e,adIntervals:150,style:{left:(o-i)/2,top:n-a,width:i,height:a}}),this.bannerArr.push(this.banner);var s=this;this.banner.onResize(function(e){var i=e.width,a=e.height;s.bannerWidth=i,s.bannerHeight=a;var r=-1!=s.systemInfo.model.indexOf("iPhone"),c=(o-i)/2,l=n-a-(r?-1:0);s.banner.style.left=c,s.banner.style.top=l,s.setBannerPosition(t)}),this.banner.onError(function(t){console.warn("[showBanner] onError, code:"+t.errCode+", msg:"+t.errMsg)}),this.banner.show(),this.setBannerPosition(t)},t.prototype.setBannerPosition=function(t){if(this.banner){var e=this.bannerWidth,o=this.bannerHeight,i=this.systemInfo.screenWidth,a=this.systemInfo.screenHeight,s=-1!=this.systemInfo.model.indexOf("iPhone"),r=t==n.BannerPos.LeftBottom?10:t==n.BannerPos.RightBottom?i-e-30:(i-e)/2,c=t==n.BannerPos.Top?0:a-o-(s?-1:0);this.banner.style.left=r,this.banner.style.top=c,this.bannerPos=t}},t.prototype.hideBanner=function(){this.banner&&this.banner.hide()},t.prototype.destroyBanner=function(){this.banner},t.prototype.showVideo=function(t,e,o,n){void 0===n&&(n=!1);var a=this.getVideoId(t),s=this.videos.filter(function(t){return t.adId==a});if(s.length>0)s[0].show(e,o,n);else{var r=new i.default;r.create(a,e,o,n),this.videos.push(r)}},t.prototype.showInterstitial=function(t){var e=this.getInterstitialId(t),o=this.interstitials.filter(function(t){return t.adId==e});if(o.length>0)o[0].show();else{var n=new a.default;n.create(e),this.interstitials.push(n)}},t.prototype.getBannerId=function(){return"adunit-251ef8372da60282"},t.prototype.getVideoId=function(t){switch(t){case n.VideoType.FreeGold:return"adunit-270ec0e31407c95b"}},t.prototype.getInterstitialId=function(t){switch(t){case n.InterstitialType.Result:return"adunit-729983ee03b5291d"}},t.prototype.openOtherGame=function(t,e){console.log("\u8df3\u8f6c",t);var o="5fdc8980d1b5c92d77836329";wx.navigateToMiniProgram({appId:t.jumpKey,path:"?"+t.query,extraData:{from:"pageA"},success:function(){console.log("\u8df3\u8f6c\u6210\u529f"),l.default.Ins.showJumpToGame=!1,r.hts.navTo(o,e,t.mid)},fail:function(n){console.log("\u8df3\u8f6c\u5931\u8d25",JSON.stringify(n)),l.default.Ins.showJumpToGame=!1,r.hts.navTo(o,e,t.mid,!0),c.default.Ins.show(c.DialogPath.MoreGameDialog,c.DialogScript.MoreGameDialog,["5fdc8a9dd1b5c92d77836339"])}})},t.prototype.jumpToOtherGame=function(t){},t.prototype.vibrateLong=function(){wx.vibrateLong()},t.prototype.vibrateShort=function(){wx.vibrateShort()},t.prototype.StartRecorder=function(t){},t.prototype.StopRecorder=function(){},t.prototype.ShareRecorder=function(){},t.prototype.ShowMoreGamesModal=function(){},t._instance=null,t}();o.default=u,cc._RF.pop()},{"../../hutui/Hts":"Hts","../../manage/DialogMag":"DialogMag","../../manage/GameMag":"GameMag","../SdkManager":"SdkManager","../ShareManager":"ShareManager","../common/Interstitial":"Interstitial","../common/Video":"Video"}],achieveDialog:[function(t,e,o){"use strict";cc._RF.push(e,"1661fCr1vBN0rJvjJw0bFd1","achieveDialog");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,s=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(s=(a<3?i(s):a>3?i(e,o,s):i(e,o))||s);return a>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../manage/GameMag"),s=t("../manage/ConfigMag"),r=t("../manage/ToolsMag"),c=t("../manage/AudioMag"),l=t("../manage/DialogMag"),u=cc._decorator,p=u.ccclass,h=u.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.homeAtlas=null,e.closeBtn=null,e.content=null,e.progressBox=null,e.achieveProgress=null,e.index=0,e.len=0,e.cigData=[],e}return n(e,t),e.prototype.onInit=function(){this.closeBtn.on(cc.Node.EventType.TOUCH_END,this.onCloseBtn,this),this.cigData=s.default.Ins.getAchieveData(),this.len=this.cigData.length,this.loadItem()},e.prototype.loadItem=function(){var t=this;r.default.Ins.getHomeResource("prefab/other/achieveItem",function(e){var o=cc.instantiate(e),n=t.homeAtlas.getSpriteFrame("achieveTitle_"+t.index),i=t.homeAtlas.getSpriteFrame("achieveText_"+t.index);o.getComponent("achieveItem").init(t.index,t.cigData[t.index],n,i),o.parent=t.content,t.loadAchieveProgress(),t.index++,t.index<t.len&&t.loadItem()})},e.prototype.loadAchieveProgress=function(){var t=cc.instantiate(this.achieveProgress);t.parent=this.progressBox;var e=a.default.Ins.achieveRecord,o=null,n=this.cigData[this.index];switch(n.taskType){case 0:o=e.killNum;break;case 1:o=e.killBossNum;break;case 2:o=e.timer;break;case 3:o=e.level;break;case 4:o=e.gunSum}o>=n.target&&(o=n.target),t.getChildByName("nowTarget").getComponent(cc.Label).string=String(o),t.getChildByName("target").getComponent(cc.Label).string=String(n.target)},e.prototype.onCloseBtn=function(){var t=this;c.default.getInstance().playSound("\u6309\u94ae\u97f3"),cc.tween(this.closeBtn).to(.2,{opacity:0}).call(function(){l.default.Ins.removePlane(l.DialogPath.AchieveDialog),t.closeBtn.opacity=255}).start()},e.prototype.update=function(){this.progressBox.y=this.content.y},i([h(cc.SpriteAtlas)],e.prototype,"homeAtlas",void 0),i([h(cc.Node)],e.prototype,"closeBtn",void 0),i([h(cc.Node)],e.prototype,"content",void 0),i([h({type:cc.Node,tooltip:"\u5b8c\u6210\u8fdb\u5ea6\u7236\u8282\u70b9"})],e.prototype,"progressBox",void 0),i([h({type:cc.Prefab,tooltip:"\u5b8c\u6210\u8fdb\u5ea6"})],e.prototype,"achieveProgress",void 0),e=i([p],e)}(cc.Component);o.default=d,cc._RF.pop()},{"../manage/AudioMag":"AudioMag","../manage/ConfigMag":"ConfigMag","../manage/DialogMag":"DialogMag","../manage/GameMag":"GameMag","../manage/ToolsMag":"ToolsMag"}],achieveItem:[function(t,e,o){"use strict";cc._RF.push(e,"e89b7q2FPFPBJn3/Ng06N+J","achieveItem");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,s=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(s=(a<3?i(s):a>3?i(e,o,s):i(e,o))||s);return a>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../manage/GameMag"),s=t("../manage/AudioMag"),r=t("../manage/ToolsMag"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rewardBtn=null,e.bgTrue=null,e.bgFalse=null,e.title=null,e.text=null,e.nowTarget=null,e.target=null,e.coinLab=null,e.diamondLab=null,e.index=0,e.cigData=null,e}return n(e,t),e.prototype.init=function(t,e,o,n){this.cigData=e,this.index=t,this.title.spriteFrame=o,this.text.spriteFrame=n,this.initDataUI(),this.rewardBtn.on(cc.Node.EventType.TOUCH_END,this.onRewardBtn,this)},e.prototype.initDataUI=function(){this.bgTrue.active=!1,this.bgFalse.active=!0;var t=a.default.Ins.achieveRecord,e=a.default.Ins.achieveData[this.index],o=null;switch(this.cigData.taskType){case 0:o=t.killNum;break;case 1:o=t.killBossNum;break;case 2:o=t.timer;break;case 3:o=t.level;break;case 4:o=t.gunSum}o>=this.cigData.target&&(o=this.cigData.target),e.geted?(this.bgTrue.active=!0,this.bgFalse.active=!1):o==this.cigData.target&&(this.rewardBtn.active=!0),this.nowTarget.string=String(o),this.target.string=String(this.cigData.target),0===this.cigData.rewardType?(this.coinLab.node.parent.active=!0,this.coinLab.string=String(this.cigData.rewardNum)):(this.diamondLab.node.parent.active=!0,this.diamondLab.string=String(this.cigData.rewardNum))},e.prototype.onRewardBtn=function(){var t=this;s.default.getInstance().playSound("\u5956\u52b1"),r.default.Ins.buttonAction(this.rewardBtn,function(){t.rewardBtn.active=!1,t.bgTrue.active=!0,t.bgFalse.active=!1,a.default.Ins.updateCurrency(this.cigData.rewardType,this.cigData.rewardNum),a.default.Ins.updateAchieveData(t.index),cc.director.emit("judgeAchieve"),cc.director.emit("updateCurrency")}.bind(this))},i([u(cc.Node)],e.prototype,"rewardBtn",void 0),i([u(cc.Node)],e.prototype,"bgTrue",void 0),i([u(cc.Node)],e.prototype,"bgFalse",void 0),i([u(cc.Sprite)],e.prototype,"title",void 0),i([u(cc.Sprite)],e.prototype,"text",void 0),i([u(cc.Label)],e.prototype,"nowTarget",void 0),i([u(cc.Label)],e.prototype,"target",void 0),i([u(cc.Label)],e.prototype,"coinLab",void 0),i([u(cc.Label)],e.prototype,"diamondLab",void 0),e=i([l],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../manage/AudioMag":"AudioMag","../manage/GameMag":"GameMag","../manage/ToolsMag":"ToolsMag"}],assistEquip:[function(t,e,o){"use strict";cc._RF.push(e,"18083CbccZHFawTr3I0UIyI","assistEquip");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,s=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(s=(a<3?i(s):a>3?i(e,o,s):i(e,o))||s);return a>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../manage/GameMag"),s=t("../../manage/AudioMag"),r=cc._decorator,c=r.ccclass,l=r.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e.showNode=null,e.hideNode=null,e.index=null,e}return n(e,t),e.prototype.init=function(t,e,o){this.index=e,this.showNode.active=!(t<0),this.icon.spriteFrame=o,this.node.on(cc.Node.EventType.TOUCH_END,this.onStartTouch,this)},e.prototype.onStartTouch=function(){var t=this;s.default.getInstance().playSound("\u6309\u94ae\u97f3"),cc.tween(this.icon.node).to(.2,{scale:1.2}).to(.2,{scale:0}).call(function(e){t.showNode.active=!1,e.scale=1,a.default.Ins.updateUseingDataByAssistEquip(-1,t.index),cc.director.emit("freshAssistEquipBtns")}).start()},i([l(cc.Sprite)],e.prototype,"icon",void 0),i([l(cc.Node)],e.prototype,"showNode",void 0),i([l(cc.Node)],e.prototype,"hideNode",void 0),e=i([c],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../../manage/AudioMag":"AudioMag","../../manage/GameMag":"GameMag"}],assistItem:[function(t,e,o){"use strict";cc._RF.push(e,"3753ejoU1BH8LXJPstwlvjJ","assistItem");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,s=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(s=(a<3?i(s):a>3?i(e,o,s):i(e,o))||s);return a>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../manage/AudioMag"),s=cc._decorator,r=s.ccclass,c=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.homeAtlas=null,e.icon=null,e.actives=null,e.coinBox=null,e.coinPre=null,e.index=0,e.assistData=null,e}return n(e,t),e.prototype.init=function(t,e){0==t&&(this.showAction(),cc.director.emit("freshAssistPageUI",e)),this.assistData=e,this.index=t,this.icon.spriteFrame=this.homeAtlas.getSpriteFrame("assistIcon_"+this.index);for(var o=""+e.costNum,n=0;n<o.length;n++){var i=cc.instantiate(this.coinPre);i.parent=this.coinBox;var a=o.substr(n,1);i.getComponent(cc.Sprite).spriteFrame=this.homeAtlas.getSpriteFrame("goldNum_"+a)}this.node.on(cc.Node.EventType.TOUCH_END,this.onStartTouch,this)},e.prototype.showAction=function(){this.actives.active=!0,this.actives.opacity=255;cc.tween(this.actives).repeatForever(cc.tween().to(.9,{opacity:0}).to(.9,{opacity:255})).start()},e.prototype.onStartTouch=function(){a.default.getInstance().playSound("\u6309\u94ae\u97f3"),this.node.parent.children.forEach(function(t){t.getChildByName("active").active=!1,t.getChildByName("active").stopAllActions()}),this.showAction(),cc.director.emit("freshAssistPageUI",this.assistData)},i([c(cc.SpriteAtlas)],e.prototype,"homeAtlas",void 0),i([c(cc.Sprite)],e.prototype,"icon",void 0),i([c(cc.Node)],e.prototype,"actives",void 0),i([c(cc.Node)],e.prototype,"coinBox",void 0),i([c(cc.Prefab)],e.prototype,"coinPre",void 0),e=i([r],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../../manage/AudioMag":"AudioMag"}],assistPage:[function(t,e,o){"use strict";cc._RF.push(e,"1f747W9WEJL7aZEGjd+wRXF","assistPage");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,s=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(s=(a<3?i(s):a>3?i(e,o,s):i(e,o))||s);return a>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../manage/ConfigMag"),s=t("../../manage/GameMag"),r=t("../../manage/ToolsMag"),c=t("../../manage/AudioMag"),l=t("../../manage/DialogMag"),u=cc._decorator,p=u.ccclass,h=u.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.homeAtlas=null,e.assistBox=null,e.equipBox=null,e.assistName=null,e.assistDesc=null,e.buyAssistBtn=null,e.equipBtn=null,e.unequipBtn=null,e.getNumLab=null,e.index=0,e.equipIndex=0,e.len=0,e.equipLen=0,e.assistData=[],e.equipData=[],e.clickFlag=0,e}return n(e,t),e.prototype.onLoad=function(){this.equipBtn.active=!1,this.unequipBtn.active=!1,this.assistData=a.default.Ins.getAssistData(),this.len=this.assistData.length,this.equipData=s.default.Ins.useingData.assistEquip,this.equipLen=this.equipData.length,this.loadItem(),this.loadEquipItem(),cc.director.on("freshAssistPageUI",this.freshAssistPageUI,this),cc.director.on("freshAssistEquipBtns",this.freshEquipBtns,this),this.buyAssistBtn.on(cc.Node.EventType.TOUCH_END,this.onBuyAssistBtn,this),this.equipBtn.on(cc.Node.EventType.TOUCH_END,this.onEquipBtn,this),this.unequipBtn.on(cc.Node.EventType.TOUCH_END,this.onUnequipBtn,this)},e.prototype.loadItem=function(){var t=this;r.default.Ins.getHomeResource("prefab/shop/assistItem",function(e){var o=cc.instantiate(e);o.getComponent("assistItem").init(t.index,t.assistData[t.index]),o.parent=t.assistBox,t.index++,t.index<t.len&&t.loadItem()})},e.prototype.loadEquipItem=function(){var t=this;r.default.Ins.getHomeResource("prefab/shop/assistEquip",function(e){var o=cc.instantiate(e),n=t.equipData[t.equipIndex],i=t.homeAtlas.getSpriteFrame("assistIcon_"+n);o.getComponent("assistEquip").init(n,t.equipIndex,i),o.parent=t.equipBox,t.equipIndex++,t.equipIndex<t.equipLen&&t.loadEquipItem()})},e.prototype.freshAssistPageUI=function(t){var e=t.assistID;this.clickFlag=e;var o=s.default.Ins.assistData[e];this.getNumLab.string=String(o.getNum),this.assistName.spriteFrame=this.homeAtlas.getSpriteFrame("aname_"+e),this.assistDesc.spriteFrame=this.homeAtlas.getSpriteFrame("assistDesc_"+e),this.freshEquipBtns()},e.prototype.searchEquipData=function(){for(var t=!1,e=s.default.Ins.useingData.assistEquip,o=0;o<e.length;o++)if(e[o]==this.clickFlag){t=!0;break}return t},e.prototype.checkEquipFull=function(){for(var t=s.default.Ins.useingData.assistEquip,e=!0,o=0;o<t.length;o++)if(t[o]<0){e=!1;break}return e},e.prototype.freshEquipBtns=function(){if(0==s.default.Ins.assistData[this.clickFlag].getNum)this.unequipBtn.active=!1,this.equipBtn.active=!1;else{var t=this.checkEquipFull();this.searchEquipData()?(this.unequipBtn.active=!0,this.equipBtn.active=!1):t?(this.unequipBtn.active=!1,this.equipBtn.active=!1):(this.unequipBtn.active=!1,this.equipBtn.active=!0)}},e.prototype.onBuyAssistBtn=function(){console.log("\u8d2d\u4e70\u9053\u5177"),c.default.getInstance().playSound("\u6309\u94ae\u97f3");var t=this.assistData[this.clickFlag];if(s.default.Ins.currency.coin<t.costNum)l.default.Ins.show(l.DialogPath.MessageDialog,l.DialogScript.MessageDialog,["\u91d1\u5e01\u4e0d\u8db3"]);else{s.default.Ins.updateAssistData(this.clickFlag,1),s.default.Ins.updateCurrency(t.buyType,-t.costNum);var e=s.default.Ins.assistData[this.clickFlag];this.getNumLab.string=String(e.getNum),cc.director.emit("updateCurrency"),this.freshEquipBtns()}},e.prototype.onEquipBtn=function(){console.log("\u88c5\u5907"),c.default.getInstance().playSound("\u6309\u94ae\u97f3");for(var t=s.default.Ins.useingData.assistEquip,e=this.equipBox.children,o=0;o<t.length;o++){var n=this.searchEquipData();if(t[o]<0&&!n){var i=e[o].getChildByName("show");i.active=!0;var a=this.homeAtlas.getSpriteFrame("assistIcon_"+this.clickFlag);i.getChildByName("icon").getComponent(cc.Sprite).spriteFrame=a,s.default.Ins.updateUseingDataByAssistEquip(this.clickFlag,o)}}this.freshEquipBtns()},e.prototype.onUnequipBtn=function(){var t=this;console.log("\u89e3\u9664\u88c5\u5907"),c.default.getInstance().playSound("\u6309\u94ae\u97f3");for(var e=s.default.Ins.useingData.assistEquip,o=function(o){if(e[o]==n.clickFlag){var i=n.equipBox.children[o].getChildByName("show"),a=i.getChildByName("icon");return cc.tween(a).to(.2,{scale:1.2}).to(.2,{scale:0}).call(function(e){i.active=!1,e.scale=1,s.default.Ins.updateUseingDataByAssistEquip(-1,o),t.freshEquipBtns()}).start(),"break"}},n=this,i=0;i<e.length;i++){if("break"===o(i))break}},i([h(cc.SpriteAtlas)],e.prototype,"homeAtlas",void 0),i([h(cc.Node)],e.prototype,"assistBox",void 0),i([h(cc.Node)],e.prototype,"equipBox",void 0),i([h(cc.Sprite)],e.prototype,"assistName",void 0),i([h(cc.Sprite)],e.prototype,"assistDesc",void 0),i([h({type:cc.Node,tooltip:"\u8d2d\u4e70\u8f85\u52a9\u9053\u5177"})],e.prototype,"buyAssistBtn",void 0),i([h({type:cc.Node,tooltip:"\u88c5\u5907"})],e.prototype,"equipBtn",void 0),i([h({type:cc.Node,tooltip:"\u89e3\u9664\u88c5\u5907"})],e.prototype,"unequipBtn",void 0),i([h(cc.Label)],e.prototype,"getNumLab",void 0),e=i([p],e)}(cc.Component);o.default=d,cc._RF.pop()},{"../../manage/AudioMag":"AudioMag","../../manage/ConfigMag":"ConfigMag","../../manage/DialogMag":"DialogMag","../../manage/GameMag":"GameMag","../../manage/ToolsMag":"ToolsMag"}],boomBullet:[function(t,e,o){"use strict";cc._RF.push(e,"29451LIjBpFxLymwjUtKbIQ","boomBullet");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,s=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(s=(a<3?i(s):a>3?i(e,o,s):i(e,o))||s);return a>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../manage/ToolsMag"),s=cc._decorator,r=s.ccclass,c=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.image=null,e.boom=null,e.speed=1300,e.dir=0,e.camera=null,e.canvas=null,e.cameraW=0,e}return n(e,t),e.prototype.init=function(t){this.dir=t,this.node.scaleX=t,this.canvas=cc.find("Canvas"),this.camera=this.canvas.getChildByName("roleCamera"),this.cameraW=this.camera.width/2},e.prototype.update=function(t){this.node.x+=this.dir*this.speed*t,(this.node.x>this.camera.x+this.cameraW+200||this.node.x<this.camera.x-this.cameraW-200)&&(console.log("\u51fa\u53bb\u4e86"),this.node&&this.node.destroy())},e.prototype.onCollisionEnter=function(t,e){if(5==t.tag){var o=this;this.boom.active=!0,this.image.enabled=!1,this.speed=0,a.default.Ins.getGameResource("prefab/blastSmoke",function(e){var n=cc.instantiate(e);n.scale=2,n.setPosition(t.node.x,-210),n.parent=o.canvas,o.scheduleOnce(function(){o.node&&(o.node.active=!1)},.05),a.default.Ins.playDragonBone(n,"blast_0",1,function(){n.destroy(),o.node&&o.node.destroy()})})}},i([c(cc.Sprite)],e.prototype,"image",void 0),i([c(cc.Node)],e.prototype,"boom",void 0),e=i([r],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../../manage/ToolsMag":"ToolsMag"}],boomMGLBullet:[function(t,e,o){"use strict";cc._RF.push(e,"5f915HoZb5LfKL55Q9grAaQ","boomMGLBullet");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,s=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(s=(a<3?i(s):a>3?i(e,o,s):i(e,o))||s);return a>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../manage/ToolsMag"),s=cc._decorator,r=s.ccclass,c=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.image=null,e.boom=null,e.speed=1300,e.dir=0,e.canvas=null,e.camera=null,e.cameraW=0,e}return n(e,t),e.prototype.init=function(t){this.dir=t,this.node.scaleX=t,this.canvas=cc.find("Canvas"),this.camera=this.canvas.getChildByName("roleCamera"),this.cameraW=this.camera.width/2},e.prototype.update=function(t){this.node.x+=this.dir*this.speed*t,(this.node.x>this.camera.x+this.cameraW+200||this.node.x<this.camera.x-this.cameraW-200)&&this.node&&this.node.destroy()},e.prototype.onCollisionEnter=function(t,e){if(5==t.tag){var o=this;this.boom.active=!0,this.image.enabled=!1,this.speed=0,a.default.Ins.getGameResource("prefab/blastSmoke",function(e){var n=cc.instantiate(e);n.scale=2,n.setPosition(t.node.x,-210),n.parent=o.canvas,o.scheduleOnce(function(){o.node&&(o.node.active=!1)},.05),a.default.Ins.playDragonBone(n,"blast_0",1,function(){n.destroy(),o.node&&o.node.destroy()})})}},i([c(cc.Sprite)],e.prototype,"image",void 0),i([c(cc.Node)],e.prototype,"boom",void 0),e=i([r],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../../manage/ToolsMag":"ToolsMag"}],bullet:[function(t,e,o){"use strict";cc._RF.push(e,"bcb31fpCQBFO7TUE7/rPOp0","bullet");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,s=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(s=(a<3?i(s):a>3?i(e,o,s):i(e,o))||s);return a>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../manage/GameMag"),s=cc._decorator,r=s.ccclass,c=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.speed=2e3,e.dir=0,e.camera=null,e.cameraW=0,e}return n(e,t),e.prototype.init=function(t){this.dir=t,this.camera=cc.find("Canvas/roleCamera"),this.cameraW=this.camera.width/2},e.prototype.update=function(t){this.node.x+=this.dir*this.speed*t,(this.node.x>this.camera.x+this.cameraW+200||this.node.x<this.camera.x-this.cameraW-200)&&this.node&&a.default.Ins.putBullet(this.node)},e=i([r],e)}(cc.Component));o.default=c,cc._RF.pop()},{"../../manage/GameMag":"GameMag"}],currency:[function(t,e,o){"use strict";cc._RF.push(e,"cd400l3qa9ES4G9wPsWaRsC","currency");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,s=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(s=(a<3?i(s):a>3?i(e,o,s):i(e,o))||s);return a>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../manage/AudioMag"),s=t("../manage/GameMag"),r=t("../manage/DialogMag"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.coinNode=null,e.diamondNode=null,e.coinLab=null,e.diamondLab=null,e.buyBtn=null,e}return n(e,t),e.prototype.onLoad=function(){this.updateCurrency(),cc.director.on("updateCurrency",this.updateCurrency,this),this.buyBtn&&this.buyBtn.on(cc.Node.EventType.TOUCH_END,this.onBuyBtn,this)},e.prototype.onBuyBtn=function(){a.default.getInstance().playSound("\u6309\u94ae\u97f3"),r.default.Ins.show(r.DialogPath.ShopDialog,r.DialogScript.ShopDialog,[2])},e.prototype.updateCurrency=function(){var t=s.default.Ins.currency;this.coinLab.string=String(t.coin),this.diamondLab.string=String(t.diamond)},i([u(cc.Node)],e.prototype,"coinNode",void 0),i([u(cc.Node)],e.prototype,"diamondNode",void 0),i([u(cc.Label)],e.prototype,"coinLab",void 0),i([u(cc.Label)],e.prototype,"diamondLab",void 0),i([u(cc.Node)],e.prototype,"buyBtn",void 0),e=i([l],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../manage/AudioMag":"AudioMag","../manage/DialogMag":"DialogMag","../manage/GameMag":"GameMag"}],enemy:[function(t,e,o){"use strict";cc._RF.push(e,"ac45970GvhF374mB4azif4p","enemy");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,s=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(s=(a<3?i(s):a>3?i(e,o,s):i(e,o))||s);return a>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../manage/GameMag"),s=t("../manage/ConfigMag"),r=t("../manage/ToolsMag"),c=t("../manage/ConfigMag"),l=t("../manage/AudioMag"),u=cc._decorator,p=u.ccclass,h=u.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dragon=null,e.corpsePrefab=null,e.groundY=-190,e.touchRole=!1,e.roleCanMove=!0,e.touchTongue=!1,e.stopMove=!1,e.frozen=!1,e.die=!1,e.attackComplete=!0,e.tag=null,e.speed=0,e.blood=0,e.initBlood=0,e.role=null,e.enemyData=null,e.taskType=null,e.corpsePool=null,e.corpseArr=[],e.canvasNode=null,e.corpsesBox=null,e.rewardNumBox=null,e.iceNode=null,e.enemyBlood=null,e.enemyStatus=null,e.step0=!1,e.step1=!1,e.step2=!1,e.step3=!1,e}return n(e,t),e.prototype.init=function(t,e){this.role=e,this.initData(t),this.enemyAnimate(s.enemyAnimate.Walk0,0)},e.prototype.initData=function(t){this.tag=t;var e=c.default.Ins.getEnemyData();this.speed=e[t].speed,this.blood=e[t].blood,this.initBlood=e[t].blood,this.enemyData=e[t],this.taskType=a.default.Ins.taskType,this.touchRole=!1,this.roleCanMove=!0,this.touchTongue=!1,this.stopMove=!1,this.frozen=!1,this.die=!1,this.attackComplete=!0,this.enemyStatus=0,this.step0=!1,this.step1=!1,this.step2=!1,this.step3=!1,this.node.getComponent(cc.BoxCollider).enabled=!0,this.canvasNode=cc.find("Canvas"),this.corpsesBox=this.canvasNode.getChildByName("corpsesBox"),this.rewardNumBox=this.canvasNode.getChildByName("rewardNumBox")},e.prototype.onCollisionEnter=function(t,e){if(!(this.die||a.default.Ins.gameOver||a.default.Ins.gamePause)){var o=a.default.Ins.useingData.mecha;switch(t.tag){case 1:if(16==e.tag)return;a.default.Ins.putBullet(t.node),this.hurted();break;case 2:if(16==e.tag?this.touchTongue=!0:(this.touchRole=!0,this.roleCanMove=!1),7==this.tag&&!this.frozen)return this.showBlastSmoke(),void cc.director.emit("hurtRole",this.enemyData.power);this.frozen||this.hurtRole();break;case 3:if(16==e.tag)return;this.hurted(c.default.Ins.getMissilePower());break;case 7:case 8:if(16==e.tag)return;this.hurted();break;case 10:if(16==e.tag)return;t.enabled=!1,this.hurted();break;case 11:if(16==e.tag)return;this.hurted();break;case 12:if(7==this.tag||16==e.tag)return;var n=c.default.Ins.getEnemyData();this.hurted(n[7].power);break;case 14:if(2==o||16==e.tag)return;a.default.Ins.putMechaBullet(t.node);var i=c.default.Ins.getMechaData()[o];this.hurted(i.power);break;case 15:if(16==e.tag)return;var s=c.default.Ins.getMechaData()[o];this.hurted(s.power);break;case 18:if(16==e.tag)return;this.hurted(),this.showIce()}}},e.prototype.hurtRole=function(){var t=this,e=this.judgeEnemyStatus();this.frozen||this.die||a.default.Ins.gameOver||this.enemyAnimate(e.ready,1,function(){a.default.Ins.gameOver||(9!=t.tag&&(!t.touchRole&&!t.touchTongue||t.frozen||t.die||cc.director.emit("hurtRole",t.enemyData.power)),t.enemyAnimate(e.attack,0,function(){!t.touchRole&&!t.touchTongue||t.frozen||t.die||cc.director.emit("hurtRole",t.enemyData.power)}))})},e.prototype.showBlastSmoke=function(){var t=this;this.node.getChildByName("boom").active=!0,r.default.Ins.getGameResource("prefab/blastSmoke",function(e){l.default.getInstance().playSound("\u70b8\u5f39");var o=cc.instantiate(e);o.scale=2,o.parent=t.node,t.dragon.node.active=!1,r.default.Ins.playDragonBone(o,"blast_0",1,function(){o.destroy(),t.node&&(t.dragon.node.active=!0,t.node.getChildByName("boom").active=!1,a.default.Ins.putEnemy(t.tag,t.node))})})},e.prototype.hurted=function(t){void 0===t&&(t=null);var e=this,o=null;if(a.default.Ins.isUseingMecha)o=c.default.Ins.getMechaData()[a.default.Ins.useingData.mecha];else{var n=null===a.default.Ins.tryGun?a.default.Ins.useingData.gun:a.default.Ins.tryGun;o=c.default.Ins.getGunData()[n]}var i=o.power+o.power*(a.default.Ins.useAttackAssist/100);this.blood-=t||i;var r=this.blood/this.initBlood;if(r>=.8?(this.enemyStatus=1,this.step0||this.showCorpse(0),this.step0=!0):r>=.6?(this.enemyStatus=1,this.step0||(this.step0=!0,this.showCorpse(0)),this.step1||(this.step1=!0,this.showCorpse(1))):r>=.4?(this.enemyStatus=2,this.step0||(this.step0=!0,this.showCorpse(0)),this.step1||(this.step1=!0,this.showCorpse(1)),this.step2||(this.step2=!0,this.showCorpse(2))):r>=.2&&(this.enemyStatus=2,this.step0||(this.step0=!0,this.showCorpse(0)),this.step1||(this.step1=!0,this.showCorpse(1)),this.step2||(this.step2=!0,this.showCorpse(2)),this.step3||(this.step3=!0,this.showCorpse(3))),r<=0)this.enemyDie(s.enemyAnimate.Die0),this.step0||(this.step0=!0,this.showCorpse(0)),this.step1||(this.step1=!0,this.showCorpse(1)),this.step2||(this.step2=!0,this.showCorpse(2)),this.step3||(this.step3=!0,this.showCorpse(3)),this.showCorpse(4);else{if(this.frozen||this.die||a.default.Ins.gameOver)return;this.hurtedAction(),2==this.tag&&(this.speed=600);var l=this.judgeEnemyStatus();if(this.touchRole){if(!this.attackComplete)return;this.attackComplete=!1,this.enemyAnimate(l.attack,0,function(){e.attackComplete=!0,!e.touchRole&&!e.touchTongue||e.frozen||e.die||cc.director.emit("hurtRole",e.enemyData.power)})}else{if(this.touchTongue)return;this.enemyAnimate(l.walk,0)}}},e.prototype.judgeEnemyStatus=function(){var t=null,e=null,o=null;switch(this.enemyStatus){case 0:t=s.enemyAnimate.Attack0,e=s.enemyAnimate.Walk0,o=s.enemyAnimate.Ready0;break;case 1:t=s.enemyAnimate.Attack1,e=s.enemyAnimate.Walk1,o=s.enemyAnimate.Ready1;break;case 2:t=s.enemyAnimate.Attack2,e=s.enemyAnimate.Walk2,o=s.enemyAnimate.Ready2}return{attack:t,walk:e,ready:o}},e.prototype.hurtedAction=function(){var t=this;this.enemyBlood?this.enemyBlood.getComponent(cc.Animation).play("blood"):r.default.Ins.getGameResource("prefab/enemyBlood",function(e){var o=cc.instantiate(e);o.parent=t.node,t.enemyBlood=o,o.getComponent(cc.Animation).play("blood")});var e=this.node.scaleX,o=this.dragon.node;this.stopMove=!0,o.stopAllActions(),cc.tween(o).to(.05,{angle:3*-e}).to(.05,{angle:0}).call(function(){t.stopMove=!1}).start()},e.prototype.enemyAnimate=function(t,e,o){void 0===o&&(o=null),r.default.Ins.playDragonBone(this.dragon.node,t,e,function(){o&&o()})},e.prototype.enemyDie=function(t){void 0===t&&(t=null),this.die=!0;var e=this;7==this.tag?this.showBlastSmoke():(this.iceNode&&(this.dragon.timeScale=1,this.iceNode.destroy()),this.node.getComponent(cc.BoxCollider).enabled=!1,this.enemyAnimate(t,1,function(){e.node&&a.default.Ins.putEnemy(e.tag,e.node)})),this.updateMission(),a.default.Ins.updateAchieveRecord(0);var o=0;if(0==this.taskType)o=this.enemyData.reward;else{var n=c.default.Ins.getKillReward(),i=n.indexOf(a.default.Ins.gameKillNum);-1!=i&&(o=10*n[i])}this.showRewardNum(o),cc.director.emit("updateGameKillNum"),this.showBlood(),this.showStageAssist()},e.prototype.showCorpse=function(t){var e=this;a.default.Ins.getCorpse(this.tag,function(o){o.position=cc.v3(e.node.position.x,-40,0);var n=o.children[t];n.opacity=255;var i=n.children;if(0!=i.length){o.parent=e.corpsesBox;for(var s=function(t){var n=i[t],s=t%2==0?1:-1,r=s*(70*Math.random()+80),c=s*(280*Math.random()+120),l=c+s*(50*Math.random()+80),u=70*Math.random()+180,p=15*Math.random()+10,h=850*s,d=50*Math.random()+40;n.scale=1.5,n.opacity=255;var f=cc.sequence(cc.spawn(cc.jumpTo(1.3,cc.v2(c,e.groundY),u,1),cc.rotateTo(1.3,h)),cc.spawn(cc.jumpTo(.4,cc.v2(l,e.groundY),p,1),cc.rotateTo(.4,100)),cc.spawn(cc.moveTo(.7,l+r,e.groundY).easing(cc.easeSineOut()),cc.rotateTo(.7,d)));n.stopAllActions(),cc.tween(n).then(f).delay(.1).to(.5,{opacity:0}).call(function(){n.setPosition(0,0),t==i.length-1&&e.node&&a.default.Ins.putCorpse(e.tag,o)}).start()},r=0;r<i.length;r++)s(r)}else a.default.Ins.putCorpse(e.tag,o)})},e.prototype.showStageAssist=function(){if(a.default.Ins.gameKillNum%2==0&&!(Math.random()>.1)){var t=this;r.default.Ins.getGameResource("prefab/stageBox",function(e){var o=cc.instantiate(e);o.parent=t.canvasNode,o.x=t.node.x,o.getComponent("stageBox").init(t.tag)})}},e.prototype.checkKillMission=function(){return!(a.default.Ins.gameKillNum&&a.default.Ins.gameKillNum<a.default.Ins.missionData.killNum)},e.prototype.showIce=function(){if(!(this.frozen||this.die||a.default.Ins.gameOver)){var t=this;t.frozen=!0,r.default.Ins.getGameResource("prefab/ice",function(e){t.iceNode=cc.instantiate(e),t.node.scaleX>0?t.iceNode.x=t.node.x:t.iceNode.x=t.node.x+50,10==t.tag?t.iceNode.scale=1.3:12==t.tag&&(t.iceNode.scale=1.5),t.die||a.default.Ins.gameOver||(t.iceNode.y=-50,t.iceNode.parent=t.canvasNode,r.default.Ins.removeDragonBone(t.dragon.node),t.dragon.timeScale=0,t.scheduleOnce(function(){if(!t.die&&!a.default.Ins.gameOver){t.dragon.timeScale=1,t.frozen=!1;var e=t.judgeEnemyStatus();t.touchRole||t.touchTongue?t.enemyAnimate(e.attack,0):t.enemyAnimate(e.walk,0),t.iceNode&&t.iceNode.destroy()}},a.default.Ins.frezonTime))})}},e.prototype.updateMission=function(){a.default.Ins.gameKillNum++,1!=this.taskType&&4!=this.taskType||(a.default.Ins.killOver=this.checkKillMission(),this.checkKillMission()&&cc.director.emit("gameOver",!0))},e.prototype.showRewardNum=function(t){if(!(t<=0)){a.default.Ins.updateCurrency(0,t),cc.director.emit("updateCurrency");var e=this;a.default.Ins.getRewardNum(function(o){o.parent=e.rewardNumBox,o.stopAllActions(),o.setPosition(e.node.x,0),o.getComponent(cc.Label).string=String("+"+t),cc.tween(o).to(.7,{position:cc.v3(o.x,o.y+120,0)}).call(function(){a.default.Ins.putRewardNum(o)}).start()})}},e.prototype.showBlood=function(){var t=this;r.default.Ins.getGameResource("prefab/enemyBlood",function(e){var o=cc.instantiate(e);o.parent=t.node,o.getComponent(cc.Animation).play("blood")})},e.prototype.touchRoleFalse=function(){this.roleCanMove=!0,this.judgeExitedAnimate()},e.prototype.touchTongueFalse=function(){this.roleCanMove=!0,this.touchTongue=!1,this.judgeExitedAnimate()},e.prototype.onCollisionExit=function(t,e){if(!this.die&&!a.default.Ins.gameOver&&2==t.tag){if(this.touchRole=!1,16==e.tag)return this.unschedule(this.touchTongueFalse),void this.scheduleOnce(this.touchTongueFalse,.05);if(this.touchTongue)return;this.unschedule(this.touchRoleFalse),this.scheduleOnce(this.touchRoleFalse,.3)}},e.prototype.judgeExitedAnimate=function(){0===this.enemyStatus?this.enemyAnimate(s.enemyAnimate.Walk0,0):1===this.enemyStatus?this.enemyAnimate(s.enemyAnimate.Walk1,0):2===this.enemyStatus&&this.enemyAnimate(s.enemyAnimate.Walk2,0)},e.prototype.update=function(t){if(!(this.stopMove||this.frozen||this.die||a.default.Ins.gamePause||a.default.Ins.gameOver)){var e=this.role.x;if(this.node.x>e+15&&this.node.scaleX<0?this.node.scaleX=1:this.node.x<e-15&&this.node.scaleX>0&&(this.node.scaleX=-1),this.roleCanMove&&!this.touchTongue){var o=e<this.node.x?1:-1;this.node.x+=-o*this.speed*t}}},i([h(dragonBones.ArmatureDisplay)],e.prototype,"dragon",void 0),e=i([p],e)}(cc.Component);o.default=d,cc._RF.pop()},{"../manage/AudioMag":"AudioMag","../manage/ConfigMag":"ConfigMag","../manage/GameMag":"GameMag","../manage/ToolsMag":"ToolsMag"}],fireAndiceBullet:[function(t,e,o){"use strict";cc._RF.push(e,"6d049WU4ORKQJL4mXipfH1+","fireAndiceBullet");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,s=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(s=(a<3?i(s):a>3?i(e,o,s):i(e,o))||s);return a>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,r=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dir=0,e}return n(e,t),e.prototype.init=function(t){var e=this;this.dir=t,this.node.scaleX=t,this.scheduleOnce(function(){e.node&&e.node.destroy()},.4)},e.prototype.onCollisionEnter=function(t,e){},e=i([s],e)}(cc.Component));o.default=r,cc._RF.pop()},{}],frontGameDialog:[function(t,e,o){"use strict";cc._RF.push(e,"7d950JIse5Gr4dcSjaxUWCe","frontGameDialog");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,s=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(s=(a<3?i(s):a>3?i(e,o,s):i(e,o))||s);return a>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../manage/GameMag"),s=t("../manage/ToolsMag"),r=t("../manage/AudioMag"),c=t("../manage/DialogMag"),l=cc._decorator,u=l.ccclass,p=l.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.homeAtlas=null,e.frontAtlas=null,e.left=null,e.right=null,e.missionBox=null,e.closeBtn=null,e.enterBtn=null,e.coinLab=null,e.diamondLab=null,e.levelLab=null,e.title=null,e.mapBg=null,e.desc=null,e.endlessImg=null,e.rewardContent=null,e.missionLab=null,e.iconName=null,e.iconImage=null,e.tryBtn=null,e.recommendData=null,e.showActionEnd=!1,e.trySkin=null,e}return n(e,t),e.prototype.onInit=function(t,e){r.default.getInstance().playSound("\u4efb\u52a1\u6253\u5f00"),a.default.Ins.trySkin=null,a.default.Ins.taskType=t,a.default.Ins.mapIndex=e,this.initRecommendUI(),this.initUI(t,e),this.showAction(),this.enterBtn.on(cc.Node.EventType.TOUCH_END,this.onEnterGame,this),this.closeBtn.on(cc.Node.EventType.TOUCH_END,this.onCloseBtn,this),this.tryBtn.on(cc.Node.EventType.TOUCH_END,this.onTryBtn,this),a.default.Ins.guide[3]||cc.director.on("showGuideStep3",function(){var t=this;this.scheduleOnce(function(){var e=cc.v2(t.enterBtn.x+330,t.enterBtn.y);c.default.Ins.show(c.DialogPath.GuideDialog,c.DialogScript.GuideDialog,[3,90,cc.Vec2.ZERO,e])},.1)}.bind(this),this)},e.prototype.initUI=function(t,e){a.default.Ins.gameKillNum=0;var o=a.default.Ins.level,n=10+5*(o-1),i=10+5*(o-1),s=20+5*(o-1),r=t<4?800+50*(o-1):1e3+150*(o-1),c=1+Math.floor(o/10);this.levelLab.string=String("\u7b2c"+o+"\u5929"),this.mapBg.spriteFrame=this.frontAtlas.getSpriteFrame("bg"+e),this.title.spriteFrame=this.frontAtlas.getSpriteFrame("title_"+e),this.desc.spriteFrame=this.frontAtlas.getSpriteFrame("desc_"+e),a.default.Ins.missionData={killNum:null,moveNum:null,secondNum:null,coinNum:null,diamondNum:null};var l="";switch(t){case 0:return console.log("\u65e0\u5c3d\u6a21\u5f0f"),l="",this.endlessImg.active=!0,this.rewardContent.active=!1,void(a.default.Ins.missionData=null);case 1:console.log("\u51fb\u6740\u6a21\u5f0f"),l="\u4efb\u52a1:\u51fb\u6740"+n+"\u4e2a\u50f5\u5c38",a.default.Ins.missionData.killNum=n;break;case 2:console.log("\u8ddd\u79bb\u6a21\u5f0f"),l="\u4efb\u52a1:\u5411\u524d\u8dd1"+i+"\u7c73",a.default.Ins.missionData.moveNum=i;break;case 3:console.log("\u65f6\u95f4\u6a21\u5f0f"),l="\u4efb\u52a1:\u575a\u6301"+s+"\u79d2",a.default.Ins.missionData.secondNum=s;break;case 4:console.log("\u51fb\u6740+\u65f6\u95f4\u6a21\u5f0f");var u=20+8*(o-1);l="\u4efb\u52a1:"+u+"\u79d2\u5185\u51fb\u6740"+n+"\u4e2a\u50f5\u5c38",a.default.Ins.missionData.killNum=n,a.default.Ins.missionData.secondNum=u;break;case 5:console.log("\u8ddd\u79bb+\u65f6\u95f4\u6a21\u5f0f"),l="\u4efb\u52a1:"+s+"\u79d2\u5185\u79fb\u52a8"+i+"\u7c73",a.default.Ins.missionData.moveNum=i,a.default.Ins.missionData.secondNum=s}a.default.Ins.missionData.coinNum=r,a.default.Ins.missionData.diamondNum=c,this.coinLab.string=String(r),this.diamondLab.string=String(c),this.missionLab.string=String(l)},e.prototype.initRecommendUI=function(){var t=[];a.default.Ins.skinData.forEach(function(e){e.geted||t.push(e)});var e=null;if(0==t.length)e=4;else{var o=Math.floor(Math.random()*t.length);e=t[o].skinID}this.trySkin=e,this.iconName.spriteFrame=this.homeAtlas.getSpriteFrame("skinDesc_"+e),this.iconImage.spriteFrame=this.homeAtlas.getSpriteFrame("skin_"+e)},e.prototype.showAction=function(){var t=this;cc.tween(this.left).to(.2,{position:cc.v3(220,0,0)}).to(.05,{position:cc.v3(200,0,0)}).call(function(){cc.tween(t.right).to(.12,{position:cc.v3(230,0,0)}).to(.05,{position:cc.v3(250,0,0)}).to(.08,{position:cc.v3(240,0,0)}).to(.08,{position:cc.v3(250,0,0)}).call(function(){if(t.showActionEnd=!0,!a.default.Ins.guide[2]){var e=t.missionLab.node.position;c.default.Ins.show(c.DialogPath.GuideDialog,c.DialogScript.GuideDialog,[2,90,cc.v2(0,-245),cc.v2(e.x+450,e.y-30)])}}).start()}).start()},e.prototype.onTryBtn=function(){s.default.Ins.buttonAction(this.tryBtn,function(){if(a.default.Ins.trySkin=this.trySkin,a.default.Ins.tryGun=null,a.default.Ins.tryGunBullet=null,a.default.Ins.tryGunEquip=null,a.default.Ins.gameLoaded){var t=a.default.Ins.gameScene;cc.director.loadScene(t)}}.bind(this))},e.prototype.onEnterGame=function(){this.showActionEnd&&s.default.Ins.buttonAction(this.enterBtn,function(){if(a.default.Ins.tryGun=null,a.default.Ins.tryGunBullet=null,a.default.Ins.tryGunEquip=null,a.default.Ins.gameLoaded){var t=a.default.Ins.gameScene;cc.director.loadScene(t)}}.bind(this))},e.prototype.onCloseBtn=function(){this.trySkin=null,s.default.Ins.buttonAction(this.closeBtn,function(){cc.tween(this.left).to(.2,{position:cc.v3(-750,0,0)}).start(),cc.tween(this.right).to(.2,{position:cc.v3(750,0,0)}).call(function(){c.default.Ins.removePlane(c.DialogPath.FrontGameDialog)}).start()}.bind(this))},i([p(cc.SpriteAtlas)],e.prototype,"homeAtlas",void 0),i([p(cc.SpriteAtlas)],e.prototype,"frontAtlas",void 0),i([p(cc.Node)],e.prototype,"left",void 0),i([p(cc.Node)],e.prototype,"right",void 0),i([p(cc.Node)],e.prototype,"missionBox",void 0),i([p(cc.Node)],e.prototype,"closeBtn",void 0),i([p(cc.Node)],e.prototype,"enterBtn",void 0),i([p(cc.Label)],e.prototype,"coinLab",void 0),i([p(cc.Label)],e.prototype,"diamondLab",void 0),i([p(cc.Label)],e.prototype,"levelLab",void 0),i([p(cc.Sprite)],e.prototype,"title",void 0),i([p(cc.Sprite)],e.prototype,"mapBg",void 0),i([p(cc.Sprite)],e.prototype,"desc",void 0),i([p(cc.Node)],e.prototype,"endlessImg",void 0),i([p(cc.Node)],e.prototype,"rewardContent",void 0),i([p({type:cc.Label,tooltip:"\u4efb\u52a1\u5185\u5bb9"})],e.prototype,"missionLab",void 0),i([p(cc.Sprite)],e.prototype,"iconName",void 0),i([p(cc.Sprite)],e.prototype,"iconImage",void 0),i([p({type:cc.Node,tooltip:"\u8bd5\u7528\u6309\u94ae"})],e.prototype,"tryBtn",void 0),e=i([u],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../manage/AudioMag":"AudioMag","../manage/DialogMag":"DialogMag","../manage/GameMag":"GameMag","../manage/ToolsMag":"ToolsMag"}],gameAssistItem:[function(t,e,o){"use strict";cc._RF.push(e,"e081aJcAZZLb6jI2o+pW+H+","gameAssistItem");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,s=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(s=(a<3?i(s):a>3?i(e,o,s):i(e,o))||s);return a>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../manage/GameMag"),s=t("../manage/ConfigMag"),r=t("../manage/AudioMag"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bulletNum=null,e.icon=null,e.buffer=null,e.assistID=null,e.index=null,e.cigData=null,e.lastNum=0,e._t=15,e}return n(e,t),e.prototype.init=function(t,e,o){this.assistID=t,this.index=e,this.icon.spriteFrame=o,this.cigData=s.default.Ins.getAssistData(),this.initUI(),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouch,this)},e.prototype.initUI=function(){var t=a.default.Ins.assistData,e=a.default.Ins.searchAssistData(t,this.assistID);e&&(e.getNum>0&&(this.node.active=!0),this.lastNum=e.getNum,this.bulletNum.string=String(e.getNum))},e.prototype.onTouch=function(){r.default.getInstance().playSound("\u6309\u94ae\u97f3"),this.lastNum<=0||(this.node.pauseSystemEvents(!0),this.useAssist(),this.buffer.node.active=!0,this.buffer.progress=1,this.unschedule(this.countDown),this.schedule(this.countDown,1/this._t),a.default.Ins.updateAssistData(this.assistID,-1),this.lastNum--,this.bulletNum.string=String(this.lastNum),0==this.lastNum&&(this.icon.node.color=cc.color(115,115,115),a.default.Ins.updateUseingDataByAssistEquip(-1,this.index)))},e.prototype.useAssist=function(){var t=a.default.Ins.searchAssistData(this.cigData,this.assistID),e=t.assistType,o=t.assistNum,n=t.assistTime,i=t.assistSize;switch(e){case 0:cc.director.emit("useAssistBlood",o);break;case 1:cc.director.emit("useAssistHurt",o,n);break;case 2:cc.director.emit("useAssist",2,o,n);break;case 3:cc.director.emit("useAssist",3,o,n);break;case 4:cc.director.emit("useAssistMissile",i)}},e.prototype.countDown=function(){this.buffer.progress-=1/this._t/this._t,this.buffer.progress<=0&&(this.unschedule(this.countDown),this.node.resumeSystemEvents(!0))},e.prototype.onDisable=function(){this.unschedule(this.countDown)},i([u(cc.Label)],e.prototype,"bulletNum",void 0),i([u(cc.Sprite)],e.prototype,"icon",void 0),i([u({type:cc.ProgressBar,tooltip:"\u5706\u5f62\u8fdb\u5ea6"})],e.prototype,"buffer",void 0),e=i([l],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../manage/AudioMag":"AudioMag","../manage/ConfigMag":"ConfigMag","../manage/GameMag":"GameMag"}],gameGunItem:[function(t,e,o){"use strict";cc._RF.push(e,"16006lQf5hNU5eNYRvGDbPB","gameGunItem");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,s=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(s=(a<3?i(s):a>3?i(e,o,s):i(e,o))||s);return a>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../manage/GameMag"),s=t("../manage/ConfigMag"),r=t("../manage/AudioMag"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bulletNum=null,e.addBulletNumPre=null,e.icon=null,e.actives=null,e.tipNode=null,e.index=0,e.gunID=0,e.lastNum=0,e.cigData=[],e.recordTryGun=null,e}return n(e,t),e.prototype.init=function(t,e,o){this.index=e,this.gunID=t,this.icon.spriteFrame=o,this.cigData=s.default.Ins.getGunData(),this.initUI(),cc.director.on("showGunActive"+e,this.showGunActive,this),cc.director.on("updateBulletNum"+t,this.updateBulletNum,this),cc.director.on("switchGun"+e,this.switchGun,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouch,this)},e.prototype.initUI=function(){if(this.recordTryGun=a.default.Ins.tryGun,0==this.cigData[this.gunID].buyOnceCost)this.bulletNum.node.active=!1;else{this.bulletNum.node.active=!0;var t=a.default.Ins.gunData,e=null;if(null!==a.default.Ins.tryGun&&a.default.Ins.tryGun==this.gunID){if(0===a.default.Ins.tryGunBullet)return void(this.bulletNum.node.active=!1);e=a.default.Ins.initTryGunBullet}else e=t[this.gunID].bulletNum;this.lastNum=e,this.lastNum<=0&&(console.log("\u6ca1\u6709\u5b50\u5f39\u4e86,\u56fe\u6807\u7f6e\u9ed1"),this.icon.node.color=cc.color(115,115,115)),this.bulletNum.string=String(e)}},e.prototype.showGunActive=function(t){this.actives.active=!0,cc.director.emit("freshRoleGun",t)},e.prototype.switchGun=function(){r.default.getInstance().playSound("\u66f4\u6362\u67aa\u652f"),this.hideTip();var t=[];(a.default.Ins.tryGunEquip||a.default.Ins.useingData.gunEquip).forEach(function(e){e>=0&&t.push(e)});for(var e=0,o=t.length;e<o;e++)if(t[e]==this.gunID){this.actives.active=!1;var n=this.node.parent.children,i=null;i=++e<o?e:0,a.default.Ins.tryGunEquip?a.default.Ins.tryGun=t[i]:a.default.Ins.updateUseingDataByGun(t[i]),n[i].getChildByName("showActive").active=!0,this.iconAction(n[i].getChildByName("icon")),cc.director.emit("freshRoleGun",i);break}},e.prototype.hideTip=function(){!0===this.tipNode.active&&(this.tipNode.stopAllActions(),this.tipNode.active=!1)},e.prototype.updateBulletNum=function(){var t=null===a.default.Ins.tryGun?this.gunID:a.default.Ins.tryGun;0==this.cigData[t].buyOnceCost||this.lastNum<=0||(this.recordTryGun&&this.recordTryGun==t?(console.log("\u8bd5\u7528\u7684\u6b66\u5668"),a.default.Ins.tryGunBullet--,0==a.default.Ins.tryGunBullet&&(this.switchGun(),a.default.Ins.tryGun=null,this.recordTryGun=null,a.default.Ins.tryGunBullet=null,a.default.Ins.tryGunEquip=null,this.node.destroy())):a.default.Ins.updateGunDataByBulletNum(this.gunID,-1),this.lastNum--,this.bulletNum.string=String(this.lastNum),this.lastNum<=0&&(console.log("\u5b50\u5f39\u6570\u91cf\u4e0d\u591f\u4e86"),this.icon.node.color=cc.color(115,115,115),this.tipNode.active=!0,cc.tween(this.tipNode.getChildByName("hand")).repeatForever(cc.tween().to(.35,{scale:1.2}).delay(.2).to(.35,{scale:1}).delay(.2)).start()))},e.prototype.buyBullet=function(){var t=a.default.Ins.searchGunData(this.cigData,this.gunID),e=a.default.Ins.currency.coin;if(t&&0!=t.buyOnceCost&&e>=t.buyOnceCost){r.default.getInstance().playSound("\u8d2d\u4e70\u5b50\u5f39"),this.hideTip(),a.default.Ins.updateGunDataByBulletNum(this.gunID,t.buyOnceNum),a.default.Ins.updateCurrency(0,-t.buyOnceCost),cc.director.emit("updateCurrency"),this.lastNum+=t.buyOnceNum,this.bulletNum.string=String(this.lastNum),this.icon.node.color=cc.color(255,255,255);var o=cc.instantiate(this.addBulletNumPre);o.getComponent(cc.Label).string=String("-"+t.buyOnceCost),o.opacity=255,o.parent=cc.find("Canvas");var n=this.node.parent.convertToWorldSpaceAR(this.node.position),i=o.convertToNodeSpaceAR(n);o.setPosition(i.x,i.y-200),cc.tween(o).to(1,{position:cc.v3(i.x,i.y+200,0)}).call(function(t){t.destroy()}).start()}},e.prototype.onTouch=function(){if(this.actives.active)return console.log("\u8d2d\u4e70\u5b50\u5f39"),this.recordTryGun&&this.recordTryGun==this.gunID?void console.log("\u8bd5\u7528\u7684\u67aa\u652f\u4e0d\u8ba9\u4e70\u5b50\u5f39"):void this.buyBullet();r.default.getInstance().playSound("\u6309\u94ae\u97f3"),this.node.parent.children.forEach(function(t){t.getChildByName("showActive").active=!1}),this.actives.active=!0,a.default.Ins.tryGunEquip?a.default.Ins.tryGun=this.gunID:a.default.Ins.updateUseingDataByGun(this.gunID),this.iconAction(this.icon.node),cc.director.emit("freshRoleGun",this.index)},e.prototype.iconAction=function(t){cc.tween(t).to(.1,{scale:1.8}).to(.05,{scale:1.4}).start()},i([u(cc.Label)],e.prototype,"bulletNum",void 0),i([u({type:cc.Prefab,tooltip:"\u663e\u793a\u8d2d\u4e70\u4e00\u6b21\u5b50\u5f39\u82b1\u8d39\u591a\u5c11\u91d1\u5e01"})],e.prototype,"addBulletNumPre",void 0),i([u(cc.Sprite)],e.prototype,"icon",void 0),i([u(cc.Node)],e.prototype,"actives",void 0),i([u(cc.Node)],e.prototype,"tipNode",void 0),e=i([l],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../manage/AudioMag":"AudioMag","../manage/ConfigMag":"ConfigMag","../manage/GameMag":"GameMag"}],gameMain:[function(t,e,o){"use strict";cc._RF.push(e,"5718e6mtRVOEY1p3BGHk2jw","gameMain");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,s=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(s=(a<3?i(s):a>3?i(e,o,s):i(e,o))||s);return a>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../manage/GameMag"),s=t("../manage/ToolsMag"),r=t("../manage/AudioMag"),c=t("../manage/ConfigMag"),l=t("../manage/DialogMag"),u=t("../sdk/SdkManager"),p=cc._decorator,h=p.ccclass,d=p.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.headImg=null,e.homeAtlas=null,e.gameAtlas=null,e.roleCamera=null,e.bgs=[],e.bgBox=null,e.enemyBox=null,e.shellsBox=null,e.bulletShellsPre=null,e.taskBox=null,e.ground=null,e.role=null,e.bloodBar=null,e.attackBtn=null,e.switchBtn=null,e.gunBox=null,e.assistBox=null,e.mechaBox=null,e.leftBox=null,e.rightBox=null,e.leftBtn=null,e.rightBtn=null,e.pauseBtn=null,e.bulletBox=null,e.bulletArr=[],e.mechaBulletPre=null,e.footDragon=null,e.bodyDragon=null,e.killTextNode=null,e.killText=null,e.runTextNode=null,e.runText=null,e.timerTextNode=null,e.timerText=null,e.killingTip=null,e.runLogo=null,e.weapon=null,e.assistStatus=null,e.missilePre=null,e.moveSpeed=0,e.moveLeft=!1,e.moveRight=!1,e.bulletShellsPool=null,e.missilePool=null,e.roleSkin=null,e.roleFoot=null,e.attackTime=0,e.taskIndex=0,e.runDis=200,e.secondNum=0,e.mecha=null,e.mecheTime=0,e.mecheCountTime=0,e.mecheSpeed=null,e.mecheShowTime=!1,e.assistSpeed=null,e.recordTryGun=null,e.gunList=[],e.gunItemIndex=0,e.gunItemLen=0,e.assistList=[],e.assistItemIndex=0,e.assistItemLen=0,e.enemyTime0=null,e.enemyTime1=null,e.enemyTime2=null,e.enemyTime3=null,e.enemyTime4=null,e.enemyTime5=null,e.enemyTime6=null,e.enemyTime7=null,e.enemyTime8=null,e.enemyTime9=null,e.enemyTime10=null,e.enemyTime11=null,e.enemyTime12=null,e.enemyData=null,e.gunListIndex=null,e}return n(e,t),e.prototype.onLoad=function(){r.default.getInstance().playBGM("gameBGM"),this.initData(),this.initUI(),this.gameEvents()},e.prototype.initData=function(){a.default.Ins.initGamePools(),this.recordTryGun=a.default.Ins.tryGun,a.default.Ins.isUseingMecha=!1,a.default.Ins.gameOver=!1,a.default.Ins.timeOver=!1,a.default.Ins.runOver=!1,a.default.Ins.killOver=!1,a.default.Ins.gameKillNum=0,a.default.Ins.roleBlood=1,a.default.Ins.timeStart=(new Date).getTime();var t=a.default.Ins.trySkin||a.default.Ins.useingData.skin,e=c.default.Ins.getSkinData()[t];e&&(this.moveSpeed=50*e.speed)},e.prototype.initUI=function(){this.roleSkin=this.role.getChildByName("body"),this.roleFoot=this.role.getChildByName("foot");var t=a.default.Ins.useingData;if(this.headImg.spriteFrame=this.homeAtlas.getSpriteFrame("skin_"+t.skin),this.initPoos(),this.initTask(),this.initBackground(),this.loadGunList(),this.loadAssistList(t),this.loadMechaList(t),1==a.default.Ins.level){var e=cc.v2(this.leftBox.x+200,this.leftBox.y);l.default.Ins.show(l.DialogPath.GuideDialog,l.DialogScript.GuideDialog,[4,90,cc.v2(0,0),e]),cc.director.on("showGuideStep5",function(){var t=this;this.scheduleOnce(function(){var e=cc.v2(t.rightBox.x-200,t.rightBox.y);l.default.Ins.show(l.DialogPath.GuideDialog,l.DialogScript.GuideDialog,[5,-90,cc.Vec2.ZERO,e])},.1)}.bind(this),this),cc.director.on("showGuideStep6",function(){var t=this;this.scheduleOnce(function(){var e=cc.v2(t.taskBox.x+300,t.taskBox.y-45);l.default.Ins.show(l.DialogPath.GuideDialog,l.DialogScript.GuideDialog,[6,90,cc.v2(50,-70),e])},.1)}.bind(this),this),cc.director.on("showEnemy",this.showEnemy,this)}else this.showEnemy()},e.prototype.gameEvents=function(){cc.director.on("freshRoleGun",this.freshRoleGun,this),cc.director.on("updateGameKillNum",this.updateGameKillNum,this),cc.director.on("revive",this.revive,this),cc.director.on("gameOver",this.gameOver,this),cc.director.on("resumeGame",this.resumeGame,this),cc.director.on("useAssist",this.useAssist,this),cc.director.on("useAssistMissile",this.useAssistMissile,this),cc.director.on("loadEnemy",this.loadEnemy,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this),this.leftBtn.on(cc.Node.EventType.TOUCH_START,this.onMoveLeftStart,this),this.leftBtn.on(cc.Node.EventType.TOUCH_END,this.onMoveLeftEnd,this),this.leftBtn.on(cc.Node.EventType.TOUCH_CANCEL,this.onMoveLeftEnd,this),this.rightBtn.on(cc.Node.EventType.TOUCH_START,this.onMoveRightStart,this),this.rightBtn.on(cc.Node.EventType.TOUCH_END,this.onMoveRightEnd,this),this.rightBtn.on(cc.Node.EventType.TOUCH_CANCEL,this.onMoveRightEnd,this),this.switchBtn.on(cc.Node.EventType.TOUCH_START,this.onSwitchGun,this),this.mechaBox.on(cc.Node.EventType.TOUCH_START,this.onShowMecha,this),this.attackBtn.on(cc.Node.EventType.TOUCH_START,this.onAttack,this),this.attackBtn.on(cc.Node.EventType.TOUCH_END,this.onAttackEnd,this),this.attackBtn.on(cc.Node.EventType.TOUCH_CANCEL,this.onAttackEnd,this),this.pauseBtn.on(cc.Node.EventType.TOUCH_START,this.onPauseBtn,this)},e.prototype.initPoos=function(){this.missilePool=new cc.NodePool,this.bulletShellsPool=new cc.NodePool;for(var t=0;t<10;t++){if(t<3){var e=cc.instantiate(this.missilePre);this.missilePool.put(e)}var o=cc.instantiate(this.bulletShellsPre);this.bulletShellsPool.put(o)}},e.prototype.showEnemy=function(){var t=a.default.Ins.level;this.enemyData=c.default.Ins.getEnemyData(),this.enemyTime0=this.enemyTime0||this.enemyData[0].time,this.enemyTime1=this.enemyTime1||this.enemyData[1].time,this.enemyTime2=this.enemyTime2||this.enemyData[2].time,this.enemyTime3=this.enemyTime3||this.enemyData[3].time,this.enemyTime4=this.enemyTime4||this.enemyData[4].time,this.enemyTime5=this.enemyTime5||this.enemyData[5].time,this.enemyTime6=this.enemyTime6||this.enemyData[6].time,this.enemyTime7=this.enemyTime7||this.enemyData[7].time,this.enemyTime8=this.enemyTime8||this.enemyData[8].time,this.enemyTime9=this.enemyTime9||this.enemyData[9].time,this.enemyTime10=this.enemyTime10||this.enemyData[10].time,this.enemyTime11=this.enemyTime11||this.enemyData[11].time,this.enemyTime12=this.enemyTime12||this.enemyData[12].time,this.loadSchedule0(this.enemyData[0]),this.loadSchedule1(this.enemyData[1]),this.loadSchedule2(this.enemyData[2]),t<5||(this.loadSchedule3(this.enemyData[3]),this.loadSchedule4(this.enemyData[4]),this.loadSchedule5(this.enemyData[5]),this.loadSchedule6(this.enemyData[6]),this.loadSchedule7(this.enemyData[7]),this.loadSchedule8(this.enemyData[8]),this.loadSchedule9(this.enemyData[9]),this.loadSchedule10(this.enemyData[10]),this.loadSchedule11(this.enemyData[11]),this.loadSchedule12(this.enemyData[12]))},e.prototype.loadEnemy=function(t){var e=this;a.default.Ins.getEnemy(t,function(o){o.getComponent("enemy").init(t,e.role);var n=e.roleCamera,i=Math.random()<.35?-1:1,a=n.x+i*(n.width/2+200);o.setPosition(a,e.role.y),o.parent=e.enemyBox.children[t]}.bind(this))},e.prototype.loadSchedule0=function(t){var e=this,o=t.finalTime;this.enemyTime0<t.finalTime&&(this.enemyTime0+=t.time*(t.rate/100),this.enemyTime0=Number(this.enemyTime0.toFixed(1)),o=Math.floor(this.enemyTime0)),this.scheduleOnce(function(){a.default.Ins.gamePause||a.default.Ins.gameOver||(e.loadEnemy(t.id),e.loadSchedule0(t))},o)},e.prototype.loadSchedule1=function(t){var e=this,o=t.finalTime;this.enemyTime1<t.finalTime&&(this.enemyTime1+=t.time*(t.rate/100),this.enemyTime1=Number(this.enemyTime1.toFixed(1)),o=Math.floor(this.enemyTime1)),this.scheduleOnce(function(){a.default.Ins.gamePause||a.default.Ins.gameOver||(e.loadEnemy(t.id),e.loadSchedule1(t))},o)},e.prototype.loadSchedule2=function(t){var e=this,o=t.finalTime;this.enemyTime2<t.finalTime&&(this.enemyTime2+=t.time*(t.rate/100),this.enemyTime2=Number(this.enemyTime2.toFixed(1)),o=Math.floor(this.enemyTime2)),this.scheduleOnce(function(){a.default.Ins.gamePause||a.default.Ins.gameOver||(e.loadEnemy(t.id),e.loadSchedule2(t))},o)},e.prototype.loadSchedule3=function(t){var e=this,o=t.finalTime;this.enemyTime3>t.finalTime&&(this.enemyTime3===t.time?o=this.enemyTime3:(this.enemyTime3+=t.time*(t.rate/100),this.enemyTime3=Number(this.enemyTime3.toFixed(1)),o=Math.floor(this.enemyTime3))),this.scheduleOnce(function(){a.default.Ins.gamePause||a.default.Ins.gameOver||(e.loadEnemy(t.id),e.loadSchedule3(t))},o)},e.prototype.loadSchedule4=function(t){var e=this,o=t.finalTime;this.enemyTime4>t.finalTime&&(this.enemyTime4===t.time?o=this.enemyTime4:(this.enemyTime4+=t.time*(t.rate/100),this.enemyTime4=Number(this.enemyTime4.toFixed(1)),o=Math.floor(this.enemyTime4))),this.scheduleOnce(function(){a.default.Ins.gamePause||a.default.Ins.gameOver||(e.loadEnemy(t.id),e.loadSchedule4(t))},o)},e.prototype.loadSchedule5=function(t){var e=this,o=t.finalTime;this.enemyTime5>t.finalTime&&(this.enemyTime5===t.time?o=this.enemyTime5:(this.enemyTime5+=t.time*(t.rate/100),this.enemyTime5=Number(this.enemyTime5.toFixed(1)),o=Math.floor(this.enemyTime5))),this.scheduleOnce(function(){a.default.Ins.gamePause||a.default.Ins.gameOver||(e.loadEnemy(t.id),e.loadSchedule5(t))},o)},e.prototype.loadSchedule6=function(t){var e=this,o=t.finalTime;this.enemyTime6>t.finalTime&&(this.enemyTime6===t.time?o=this.enemyTime6:(this.enemyTime6+=t.time*(t.rate/100),this.enemyTime6=Number(this.enemyTime6.toFixed(1)),o=Math.floor(this.enemyTime6))),this.scheduleOnce(function(){a.default.Ins.gamePause||a.default.Ins.gameOver||(e.loadEnemy(t.id),e.loadSchedule6(t))},o)},e.prototype.loadSchedule7=function(t){var e=this;this.scheduleOnce(function(){a.default.Ins.gamePause||a.default.Ins.gameOver||(e.loadEnemy(t.id),e.loadSchedule7(t))},this.enemyTime7)},e.prototype.loadSchedule8=function(t){var e=this,o=t.finalTime;this.enemyTime8>t.finalTime&&(this.enemyTime8===t.time?o=this.enemyTime8:(this.enemyTime8+=t.time*(t.rate/100),this.enemyTime8=Number(this.enemyTime8.toFixed(1)),o=Math.floor(this.enemyTime8))),this.scheduleOnce(function(){a.default.Ins.gamePause||a.default.Ins.gameOver||(e.loadEnemy(t.id),e.loadSchedule8(t))},o)},e.prototype.loadSchedule9=function(t){var e=this,o=t.finalTime;this.enemyTime9>t.finalTime&&(this.enemyTime9===t.time?o=this.enemyTime9:(this.enemyTime9+=t.time*(t.rate/100),this.enemyTime9=Number(this.enemyTime9.toFixed(1)),o=Math.floor(this.enemyTime9))),this.scheduleOnce(function(){a.default.Ins.gamePause||a.default.Ins.gameOver||(e.loadEnemy(t.id),e.loadSchedule9(t))},o)},e.prototype.loadSchedule10=function(t){var e=this,o=t.finalTime;this.enemyTime10>t.finalTime&&(this.enemyTime10===t.time?o=this.enemyTime10:(this.enemyTime10+=t.time*(t.rate/100),this.enemyTime10=Number(this.enemyTime10.toFixed(1)),o=Math.floor(this.enemyTime10))),console.log("11111",o),this.scheduleOnce(function(){a.default.Ins.gamePause||a.default.Ins.gameOver||(e.loadEnemy(t.id),e.loadSchedule10(t))},o)},e.prototype.loadSchedule11=function(t){var e=this,o=t.finalTime;this.enemyTime11>t.finalTime&&(this.enemyTime11===t.time?o=this.enemyTime11:(this.enemyTime11+=t.time*(t.rate/100),this.enemyTime11=Number(this.enemyTime11.toFixed(1)),o=Math.floor(this.enemyTime11))),this.scheduleOnce(function(){a.default.Ins.gamePause||a.default.Ins.gameOver||(e.loadEnemy(t.id),e.loadSchedule11(t))},o)},e.prototype.loadSchedule12=function(t){var e=this,o=t.finalTime;this.enemyTime12>t.finalTime&&(this.enemyTime12===t.time?o=this.enemyTime12:(this.enemyTime12+=t.time*(t.rate/100),this.enemyTime12=Number(this.enemyTime12.toFixed(1)),o=Math.floor(this.enemyTime12))),this.scheduleOnce(function(){a.default.Ins.gamePause||a.default.Ins.gameOver||(e.loadEnemy(t.id),e.loadSchedule12(t))},o)},e.prototype.loadGunList=function(){var t=this;(a.default.Ins.tryGunEquip||a.default.Ins.useingData.gunEquip).forEach(function(e){e>=0&&t.gunList.push(e)}),this.gunItemLen=this.gunList.length,0==this.gunItemLen&&(a.default.Ins.updateUseingDataByGun(3),a.default.Ins.updateUseingDataByGunEquip(3,0),this.gunList=[3]),this.loadGunItem()},e.prototype.loadGunItem=function(){var t=this;s.default.Ins.getGameResource("prefab/gameGunItem",function(e){var o=cc.instantiate(e),n=t.gunList[t.gunItemIndex],i=t.homeAtlas.getSpriteFrame("gun_"+n);if(o.getComponent("gameGunItem").init(n,t.gunItemIndex,i),o.parent=t.gunBox,t.gunItemIndex++,t.gunItemIndex<t.gunItemLen)t.loadGunItem();else for(var s=null===a.default.Ins.tryGun?a.default.Ins.useingData.gun:a.default.Ins.tryGun,r=0,c=t.gunList.length;r<c;r++){if(s==t.gunList[r]){cc.director.emit("showGunActive"+r,r);break}r==c-1&&(a.default.Ins.updateUseingDataByGun(t.gunList[0]),cc.director.emit("showGunActive0",0))}})},e.prototype.loadAssistList=function(t){this.assistList=t.assistEquip,0!=this.assistList.length&&(this.assistItemLen=this.assistList.length,this.loadAssistItem())},e.prototype.loadAssistItem=function(){var t=this;s.default.Ins.getGameResource("prefab/gameAssistItem",function(e){var o=cc.instantiate(e),n=t.assistList[t.assistItemIndex],i=t.homeAtlas.getSpriteFrame("assistIcon_"+n);o.parent=t.assistBox,o.getComponent("gameAssistItem").init(n,t.assistItemIndex,i),t.assistItemIndex++,t.assistItemIndex<t.assistItemLen&&t.loadAssistItem()})},e.prototype.loadMechaList=function(t){var e=t.mecha,o=this.mechaBox;if(e<0)o.active=!1;else{o.getChildByName("skin").getComponent(cc.Sprite).spriteFrame=this.homeAtlas.getSpriteFrame("mecha_"+e);for(var n=a.default.Ins.mechaData,i=0;i<n.length;i++){var s=n[i];if(s.mechaID==e&&s.getNum>0){o.active=!0,o.getChildByName("getNum").getComponent(cc.Label).string=String(s.getNum);break}}}},e.prototype.initTask=function(){var t=a.default.Ins.taskType;if(this.taskIndex=t,0==t)return this.killTextNode.active=!0,void(this.killText.string="0");var e=a.default.Ins.missionData;this.secondNum=e.secondNum,this.killText.string=String("0/"+e.killNum),this.runText.string=String(e.moveNum+"m");var o=s.default.Ins.formateSeconds(this.secondNum);switch(this.timerText.string=String(o),t){case 0:case 1:this.killTextNode.active=!0;break;case 2:this.runTextNode.active=!0,this.showRunLogo();break;case 3:this.timerTextNode.active=!0,this.schedule(this.taskCountDown,1);break;case 4:this.killTextNode.active=!0,this.timerTextNode.active=!0,this.schedule(this.taskCountDown,1);break;case 5:this.runTextNode.active=!0,this.timerTextNode.active=!0,this.schedule(this.taskCountDown,1),this.showRunLogo()}},e.prototype.taskCountDown=function(){a.default.Ins.gameOver||a.default.Ins.gamePause||(this.secondNum--,this.secondNum<=0&&(a.default.Ins.timeOver=!0,3==this.taskIndex?this.gameOver(!0):a.default.Ins.killOver||a.default.Ins.runOver?this.gameOver(!0):this.gameOver(!1)),this.timerText.string=String(s.default.Ins.formateSeconds(this.secondNum)))},e.prototype.initBackground=function(){var t=this,e=null,o=a.default.Ins.missionData;if(!o||2!=this.taskIndex&&5!=this.taskIndex)e=1;else{var n=o.moveNum;e=Math.ceil(n/15)+2,console.log("\u589e\u52a0\u51e0\u5c4f",e)}for(var i=0;i<=e;i++){cc.instantiate(this.bgs[a.default.Ins.mapIndex]).parent=this.bgBox}this.scheduleOnce(function(){var e=t.bgBox.width;t.ground.node.width=e,t.ground.size.width=e,t.ground.offset.x=e/2,t.ground.apply()},.1)},e.prototype.showRunLogo=function(){var t=this.runLogo;t.active=!0;var e=cc.sequence(cc.moveBy(.4,-30,t.y),cc.moveBy(.4,30,t.y)).repeat(4);cc.tween(t).delay(.1).then(e).call(function(){t.active=!1}).start()},e.prototype.onPauseBtn=function(){r.default.getInstance().playSound("\u6309\u94ae\u97f3"),this.isMoving()||(this.onAttackEnd(),this.onMoveLeftEnd(),this.onMoveRightEnd(),l.default.Ins.show(l.DialogPath.PauseDialog,l.DialogScript.PauseDialog,[]))},e.prototype.resumeGame=function(){this.showEnemy(),this.roleStay()},e.prototype.showBlastSmoke=function(t){void 0===t&&(t=null);var e=this;s.default.Ins.getGameResource("prefab/blastSmoke",function(o){r.default.getInstance().playSound("\u70b8\u5f39");var n=cc.instantiate(o);n.scale=3,n.setPosition(e.role.x,-250),n.parent=e.node,s.default.Ins.playDragonBone(n,"blast_0",1,function(){n.destroy(),t&&t()})})},e.prototype.useAssistMissile=function(t){var e=this,o=this.missilePool.get();o.parent=this.node;for(var n=0;n<t;n++)o.children[n].active=!0;o.x=this.role.x,cc.tween(o).to(.4,{position:cc.v3(this.role.x,-140,0)}).call(function(){e.showBlastSmoke(),u.default.instance.vibrateShort(),r.default.getInstance().playSound("\u70b8\u5f39");for(var t=0;t<3;t++)o.children[t].active=!1;o.y=500,e.missilePool.put(o)}).start()},e.prototype.revive=function(){this.scheduleOnce(function(){a.default.Ins.gameOver=!1},1),this.showEnemy(),this.roleStay(),this.useAssistMissile(1),3!=this.taskIndex&&4!=this.taskIndex&&5!=this.taskIndex||(a.default.Ins.timeOver=!1,this.unschedule(this.taskCountDown),this.secondNum=a.default.Ins.missionData.secondNum,this.timerText.string=String(s.default.Ins.formateSeconds(this.secondNum)),this.schedule(this.taskCountDown,1))},e.prototype.gameOver=function(t){this.moveLeft=!1,this.moveRight=!1,a.default.Ins.gameOver=!0,t||(this.freshRole(4,1),this.freshFootDragon("stay")),this.onAttackEnd(),this.onMoveLeftEnd(),this.onMoveRightEnd(),this.scheduleOnce(function(){l.default.Ins.show(l.DialogPath.ResultDialog,l.DialogScript.ResultDialog,[t])},.5)},e.prototype.onShowMecha=function(){if(r.default.getInstance().playSound("\u6309\u94ae\u97f3"),!this.mecha&&!this.mecheShowTime)for(var t=a.default.Ins.mechaData,e=a.default.Ins.useingData.mecha,o=0;o<t.length;o++){var n=t[o];if(n.mechaID==e&&n.getNum>0){console.log("\u52a0\u8f7d\u673a\u7532"),this.mecheShowTime=!0;var i=c.default.Ins.getMechaData()[o];this.mecheTime=i.keepTime,this.mecheCountTime=i.keepTime,this.mecheSpeed=40*i.speed;var s=this.mechaBox.getChildByName("getNum"),l=Number(s.getComponent(cc.Label).string);l--,a.default.Ins.updateMechaData(e,-1),s.getComponent(cc.Label).string=String(l),this.showMecha(e);break}}},e.prototype.showMecha=function(t){var e=this;s.default.Ins.getHomeResource("prefab/mecha/mecha"+t,function(t){var o=cc.instantiate(t);e.mecha=o,o.parent=e.role,o.scaleX=e.roleSkin.scaleX,cc.tween(o).to(.2,{position:cc.v3(0,-10,0)}).call(function(){e.showBlastSmoke(),u.default.instance.vibrateShort(),a.default.Ins.isUseingMecha=!0,e.roleSkin.active=!1,e.roleFoot.active=!1,e.mechaBox.getChildByName("buffer").active=!0,e.mecha.getChildByName("test").active=!1,e.schedule(e.mechaShowTimeCb,1),e.switchMechaAction(c.mechaAnimate.ShopUp,1,function(){e.isMoving()?e.switchMechaAction(c.mechaAnimate.Walk,0):e.switchMechaAction(c.mechaAnimate.Stay,0),e.mecheShowTime=!1})}).start()})},e.prototype.mechaShowTimeCb=function(){var t=this;this.mecheCountTime--,this.mechaBox.getChildByName("buffer").getComponent(cc.ProgressBar).progress-=1/this.mecheTime,this.mecheCountTime<=0&&(this.showBlastSmoke(),a.default.Ins.isUseingMecha=!1,this.mechaBox.getChildByName("buffer").active=!1,this.mecha.getChildByName("test").active=!0,this.unschedule(this.mechaShowTimeCb),this.roleSkin.active=!0,this.roleFoot.active=!0,this.scheduleOnce(function(){t.mecha.removeFromParent(),t.mecha=null,t.mecheCountTime=null,t.mecheSpeed=null,t.isMoving()?t.roleWalk():t.roleStay()},0))},e.prototype.switchMechaAction=function(t,e,o){void 0===o&&(o=null);var n=this,i=a.default.Ins.trySkin||a.default.Ins.useingData.skin,r=this.mecha.getChildByName("body"),l=r.getChildByName("low"),u=r.getChildByName("in"),p=r.getChildByName("up");t!=c.mechaAnimate.WalkFire?(a.default.Ins.loadDisplayIndex(["lead"],u.getComponent(dragonBones.ArmatureDisplay),i),s.default.Ins.playDragonBone(l,t,e,null),s.default.Ins.playDragonBone(u,t,e,function(){o&&o()}.bind(this)),s.default.Ins.playDragonBone(p,t,e,null)):s.default.Ins.playDragonBone(u,t,e,function(){n.isMoving()?s.default.Ins.playDragonBone(u,c.mechaAnimate.Walk,0,null):n.roleStay()})},e.prototype.onKeyDown=function(t){switch(t.keyCode){case cc.macro.KEY.a:this.onMoveLeftStart();break;case cc.macro.KEY.d:this.onMoveRightStart();break;case cc.macro.KEY.j:this.onAttack();break;case cc.macro.KEY.k:this.onSwitchGun();break;case cc.macro.KEY.l:this.onShowMecha();break;case cc.macro.KEY.q:this.onPauseBtn()}},e.prototype.onKeyUp=function(t){switch(t.keyCode){case cc.macro.KEY.a:this.onMoveLeftEnd();break;case cc.macro.KEY.d:this.onMoveRightEnd();break;case cc.macro.KEY.j:this.onAttackEnd()}},e.prototype.freshRole=function(t,e,o){if(void 0===o&&(o=null),!this.mecha){var n=c.default.Ins.roleAnimate(),i=null;switch(t){case 0:i=n.stay;break;case 1:i=n.fire;break;case 2:i=n.walk;break;case 3:i=n.walkFire;break;case 4:i=n.die}this.freshRoleDragon(i,e,o)}},e.prototype.freshRoleDragon=function(t,e,o){void 0===o&&(o=null);var n=this;a.default.Ins.changeSkin(this.bodyDragon,function(){s.default.Ins.playDragonBone(n.bodyDragon.node,t,e,function(){o&&o()})}),a.default.Ins.changeFoot(this.footDragon)},e.prototype.freshFootDragon=function(t){s.default.Ins.playDragonBone(this.footDragon.node,t,0,null)},e.prototype.isMoving=function(){var t=!1;return(this.moveLeft||this.moveRight)&&(t=!0),t},e.prototype.roleWalk=function(){this.mecha?this.switchMechaAction(c.mechaAnimate.Walk,0):(this.freshRole(2,0),this.freshFootDragon("walk"))},e.prototype.roleStay=function(){this.mecha?this.switchMechaAction(c.mechaAnimate.Stay,0):(this.freshRole(0,0),this.freshFootDragon("stay"))},e.prototype.roleFire=function(){var t=this,e=null,o=this,n=null;if(this.mecha)return e=this.isMoving()?c.mechaAnimate.WalkFire:c.mechaAnimate.Fire,void this.switchMechaAction(e,1);n=this.isMoving()?3:1;var i=null===a.default.Ins.tryGun?a.default.Ins.useingData.gun:a.default.Ins.tryGun;(i<=2||18==i)&&this.scheduleOnce(function(){t.weapon.enabled=!0},.2),this.freshRole(n,1,function(){i<=2||18==i?o.weapon.enabled=!1:15!=i&&16!=i||o.bulletBox.removeAllChildren(),o.isMoving()?o.roleWalk():o.roleStay()})},e.prototype.onMoveLeftStart=function(){return this.onMoveRightEnd(),r.default.getInstance().playSound("\u6309\u94ae\u97f3"),this.buttonAction(this.leftBtn),!(!this.mecheShowTime&&!a.default.Ins.gameOver)||(this.moveLeft=!0,this.isMoving&&this.roleWalk(),!0)},e.prototype.onMoveLeftEnd=function(){this.leftBtn.stopAllActions(),this.leftBtn.scale=1,this.mecheShowTime||a.default.Ins.gameOver||(this.moveLeft=!1,this.moveRight||this.roleStay())},e.prototype.onMoveRightStart=function(){return this.onMoveLeftEnd(),r.default.getInstance().playSound("\u6309\u94ae\u97f3"),this.buttonAction(this.rightBtn),!(!this.mecheShowTime&&!a.default.Ins.gameOver)||(this.moveRight=!0,this.isMoving&&this.roleWalk(),!0)},e.prototype.onMoveRightEnd=function(){this.rightBtn.stopAllActions(),this.rightBtn.scale=1,this.mecheShowTime||a.default.Ins.gameOver||(this.moveRight=!1,this.moveLeft||this.roleStay())},e.prototype.buttonAction=function(t){t.scale=1,t.stopAllActions(),cc.tween(t).to(.1,{scale:1.15}).start()},e.prototype.updateDistance=function(t){if(!(t<0)){t=Math.floor(t/this.runDis);var e=a.default.Ins.missionData.moveNum-t;this.runText.string=String(e+"m"),a.default.Ins.missionData.moveNum-t==0&&(console.log("\u5230\u8fbe\u7ec8\u70b9\u4e86,\u65f6\u95f4:",a.default.Ins.timeOver),a.default.Ins.runOver=!0,2==this.taskIndex?this.gameOver(!0):5==this.taskIndex&&(a.default.Ins.timeOver||this.gameOver(!0)))}},e.prototype.updateGameKillNum=function(){var t=a.default.Ins.gameKillNum;0==this.taskIndex?this.killText.string=String(t):this.killText.string=String(t+"/"+a.default.Ins.missionData.killNum);var e=c.default.Ins.getKillReward().indexOf(t);if(-1!=e){var o=this.killingTip.node;o.opacity=255,this.killingTip.spriteFrame=this.gameAtlas.getSpriteFrame("killTip_"+e),cc.tween(o).to(.2,{scale:.9}).to(.03,{scale:1.1}).to(.02,{scale:1}).delay(1).call(function(t){t.opacity=0,t.scale=4}).start()}},e.prototype.useAssist=function(t,e,o){var n=this;this.showShine();var i=this.assistStatus.node;i.active=!0,this.mecha?i.y=260:i.y=185,this.assistStatus.spriteFrame=this.gameAtlas.getSpriteFrame("status_"+t),2==t?a.default.Ins.useAttackAssist=e:3==t&&(this.assistSpeed=e);var s=cc.sequence(cc.scaleTo(.3,1.1),cc.scaleTo(.3,1)).repeat(60);i.stopAllActions(),cc.tween(i).then(s).start(),this.scheduleOnce(function(){i.stopAllActions(),2==t?a.default.Ins.useAttackAssist=0:n.assistSpeed=null,i.active=!1},o)},e.prototype.showShine=function(){var t=this;s.default.Ins.getGameResource("prefab/shine",function(e){cc.instantiate(e).parent=t.role})},e.prototype.moveDir=function(t){this.mecha?this.mecha.scaleX=t:(this.roleSkin.scaleX=t,this.roleFoot.scaleX=t)},e.prototype.update=function(t){if(!(a.default.Ins.gameOver||a.default.Ins.gamePause||this.mecheShowTime)){var e=this.mecheSpeed?this.mecheSpeed:this.moveSpeed;this.assistSpeed&&(e+=e*this.assistSpeed/100),this.moveLeft&&this.role.x>this.bgBox.x+100?(this.role.x-=t*e,this.moveDir(-1)):this.moveRight&&this.role.x<this.roleCamera.x+this.roleCamera.width/2&&(this.role.x+=t*e,this.moveDir(1)),2!=this.taskIndex&&5!=this.taskIndex||this.updateDistance(this.role.x),this.roleCamera.x=cc.misc.clampf(this.role.x,0,this.bgBox.width-1300-500)}},e.prototype.checkAttackTime=function(){var t=null===a.default.Ins.tryGun?a.default.Ins.useingData.gun:a.default.Ins.tryGun,e=1/c.default.Ins.getGunData()[t].speed*1e3,o=(new Date).getTime();return 0==this.attackTime?(this.attackTime=o,!0):!(o-this.attackTime<e)&&(this.attackTime=o,!0)},e.prototype.fire=function(){var t=null===a.default.Ins.tryGun?a.default.Ins.useingData.gun:a.default.Ins.tryGun,e=a.default.Ins.gunData[t],o=c.default.Ins.getGunData()[t],n=null;(!a.default.Ins.tryGunBullet||a.default.Ins.tryGunBullet<=0)&&(this.recordTryGun=null,n=0),n=this.recordTryGun&&this.recordTryGun===a.default.Ins.tryGun?a.default.Ins.tryGunBullet:e.bulletNum,e&&n<=0&&o.buyOnceNum>0?this.onAttackEnd():(a.default.Ins.playGunSound(),this.roleFire(),0==o.gunType&&(this.showBullet(t),cc.director.emit("updateBulletNum"+t)))},e.prototype.onAttack=function(){if(this.buttonAction(this.attackBtn),a.default.Ins.gameOver||a.default.Ins.gamePause||this.mecheShowTime)return!0;if(!this.checkAttackTime())return!0;if(this.unschedule(this.fire),this.mecha)return this.roleFire(),this.showMechaBullet(),!0;this.fire();var t=null===a.default.Ins.tryGun?a.default.Ins.useingData.gun:a.default.Ins.tryGun;if(3==c.default.Ins.getGunData()[t].gunDescType){var e=1/c.default.Ins.getGunData()[t].speed*1e3;this.unschedule(this.fire),this.schedule(this.fire,e/1e3)}return!0},e.prototype.onAttackEnd=function(){console.log("\u653b\u51fb\u7ed3\u675f"),this.attackBtn.stopAllActions(),this.attackBtn.scale=1,this.unschedule(this.fire)},e.prototype.showMechaBullet=function(){var t=this;a.default.Ins.getMechaBullet(function(e){e.parent=t.bulletBox,e.setPosition(t.role.x,-50);var o=t.mecha.scaleX;e.getComponent("mechaBullet").init(o),t.showFireShells(o)}.bind(this))},e.prototype.showBullet=function(t){var e=this.roleSkin.scaleX,o=this,n=null,i=this.role.x,s=null,r=null;if(15==t?(r="fireAndiceBullet",s=0):16==t?(r="fireAndiceBullet",s=1):19==t||21==t?(r="boomBullet",s=2):20==t?(r="boomMGLBullet",s=3):17==t||23==t?(r="passBullet",s=4):(r="bullet",this.showFireShells(e)),null===s)return this.role.setSiblingIndex(16),this.bulletBox.setSiblingIndex(19),void a.default.Ins.getBullet(function(t){t.parent=o.bulletBox,t.getComponent(r).init(e),t.setPosition(i,-80)});this.role.setSiblingIndex(19),this.bulletBox.setSiblingIndex(16),(n=cc.instantiate(this.bulletArr[s])).parent=this.bulletBox,n.getComponent(r).init(e),n.setPosition(i,-80)},e.prototype.showFireShells=function(t){var e=this,o=null,n=null,i=null,s=null;if(o=this.bulletShellsPool.size()>0?this.bulletShellsPool.get():cc.instantiate(this.bulletShellsPre),this.mecha){switch(a.default.Ins.useingData.mecha){case 0:r.default.getInstance().playSound("\u673a\u7532"),n=0,i=cc.v2(0,-60);break;case 1:r.default.getInstance().playSound("\u673a\u7532"),n=0,i=cc.v2(0,40);break;case 2:r.default.getInstance().playSound("RPG"),n=2,i=cc.v2(0,-60)}s=500}else{o.setPosition(this.role.x,-30);var c=null===a.default.Ins.tryGun?a.default.Ins.useingData.gun:a.default.Ins.tryGun;n=11==c||12==c?1:0,i=cc.v2(0,-60),s=400}o.setPosition(this.role.x,i.y),o.children[n].active=!0,o.getComponent(cc.RigidBody).linearVelocity=cc.v2(-t*s,340),o.parent=this.shellsBox;var l=Math.random()>.5?1:-1,u=150+50*Math.random();o.stopAllActions(),cc.tween(o).by(.3,{angle:u*l}).repeat(3).delay(1.5).call(function(){o.children[n].active=!1,e.bulletShellsPool.put(o)}).start()},e.prototype.onSwitchGun=function(){r.default.getInstance().playSound("\u6309\u94ae\u97f3"),this.onAttackEnd(),cc.director.emit("switchGun"+this.gunListIndex)},e.prototype.freshRoleGun=function(t){this.gunListIndex=t,this.freshRole(0,0),this.moveLeft||this.moveRight||this.freshFootDragon("stay")},e.prototype.onDestroy=function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)},i([d(cc.Sprite)],e.prototype,"headImg",void 0),i([d(cc.SpriteAtlas)],e.prototype,"homeAtlas",void 0),i([d(cc.SpriteAtlas)],e.prototype,"gameAtlas",void 0),i([d(cc.Node)],e.prototype,"roleCamera",void 0),i([d({type:[cc.Prefab],tooltip:"\u5730\u56fe\u9884\u5236"})],e.prototype,"bgs",void 0),i([d(cc.Node)],e.prototype,"bgBox",void 0),i([d({type:cc.Node,tooltip:"\u602a\u7684\u7236\u8282\u70b9"})],e.prototype,"enemyBox",void 0),i([d({type:cc.Node,tooltip:"\u5b50\u5f39\u58f3\u7236\u8282\u70b9"})],e.prototype,"shellsBox",void 0),i([d({type:cc.Prefab,tooltip:"\u5b50\u5f39\u58f3"})],e.prototype,"bulletShellsPre",void 0),i([d({type:cc.Node,tooltip:"\u4efb\u52a1\u7236\u8282\u70b9"})],e.prototype,"taskBox",void 0),i([d(cc.PhysicsBoxCollider)],e.prototype,"ground",void 0),i([d(cc.Node)],e.prototype,"role",void 0),i([d(cc.ProgressBar)],e.prototype,"bloodBar",void 0),i([d({type:cc.Node,tooltip:"\u653b\u51fb\u6216\u53d1\u5c04"})],e.prototype,"attackBtn",void 0),i([d({type:cc.Node,tooltip:"\u5207\u6362\u6b66\u5668"})],e.prototype,"switchBtn",void 0),i([d({type:cc.Node,tooltip:"\u6b66\u5668\u88c5\u5907\u5217\u8868"})],e.prototype,"gunBox",void 0),i([d({type:cc.Node,tooltip:"\u9053\u5177\u88c5\u5907\u5217\u8868"})],e.prototype,"assistBox",void 0),i([d({type:cc.Node,tooltip:"\u673a\u7532\u88c5\u5907\u5217\u8868"})],e.prototype,"mechaBox",void 0),i([d(cc.Node)],e.prototype,"leftBox",void 0),i([d(cc.Node)],e.prototype,"rightBox",void 0),i([d(cc.Node)],e.prototype,"leftBtn",void 0),i([d(cc.Node)],e.prototype,"rightBtn",void 0),i([d(cc.Node)],e.prototype,"pauseBtn",void 0),i([d({type:cc.Node,tooltip:"\u6240\u6709\u5b50\u5f39\u7684\u7236\u8282\u70b9"})],e.prototype,"bulletBox",void 0),i([d({type:[cc.Prefab],tooltip:"\u5b50\u5f39\u7c7b\u578b:0:\u706b\u67aa\u5b50\u5f39 1:\u51b0\u67aa\u5b50\u5f39 2:\u7206\u70b8\u5b50\u5f39\u5927 3:\u7206\u70b8\u5b50\u5f39\u5c0f(MGL) 4.\u7a7f\u900f\u578b(\u72d9\u51fb\u548c\u6fc0\u5149)"})],e.prototype,"bulletArr",void 0),i([d({type:cc.Prefab,tooltip:"\u673a\u7532\u5b50\u5f39"})],e.prototype,"mechaBulletPre",void 0),i([d(dragonBones.ArmatureDisplay)],e.prototype,"footDragon",void 0),i([d(dragonBones.ArmatureDisplay)],e.prototype,"bodyDragon",void 0),i([d({type:cc.Node,tooltip:"\u51fb\u6740\u6a21\u5f0f\u6570\u503c"})],e.prototype,"killTextNode",void 0),i([d({type:cc.Label,tooltip:"\u51fb\u6740\u6a21\u5f0f\u6570\u503c"})],e.prototype,"killText",void 0),i([d({type:cc.Node,tooltip:"\u8ddd\u79bb\u6a21\u5f0f\u6570\u503c"})],e.prototype,"runTextNode",void 0),i([d({type:cc.Label,tooltip:"\u8ddd\u79bb\u6a21\u5f0f\u6570\u503c"})],e.prototype,"runText",void 0),i([d({type:cc.Node,tooltip:"\u65f6\u95f4\u6a21\u5f0f\u6570\u503c"})],e.prototype,"timerTextNode",void 0),i([d({type:cc.Label,tooltip:"\u65f6\u95f4\u6a21\u5f0f\u6570\u503c"})],e.prototype,"timerText",void 0),i([d({type:cc.Sprite,tooltip:"\u6740\u622e\u63d0\u793a"})],e.prototype,"killingTip",void 0),i([d(cc.Node)],e.prototype,"runLogo",void 0),i([d({type:cc.PolygonCollider,tooltip:"\u6b66\u5668\u7684\u78b0\u649e\u4f53"})],e.prototype,"weapon",void 0),i([d({type:cc.Sprite,tooltip:"\u5403\u4e86\u968f\u673a\u51fa\u73b0\u7684\u8f85\u52a9\u9053\u5177\u540e\u51fa\u73b0\u5728\u5934\u4e0a\u7684\u73a9\u610f"})],e.prototype,"assistStatus",void 0),i([d({type:cc.Prefab,tooltip:"\u5bfc\u5f39(\u590d\u6d3b/\u9053\u5177)"})],e.prototype,"missilePre",void 0),e=i([h],e)}(cc.Component);o.default=f,cc._RF.pop()},{"../manage/AudioMag":"AudioMag","../manage/ConfigMag":"ConfigMag","../manage/DialogMag":"DialogMag","../manage/GameMag":"GameMag","../manage/ToolsMag":"ToolsMag","../sdk/SdkManager":"SdkManager"}],guideDialog:[function(t,e,o){"use strict";cc._RF.push(e,"c9eb60jIT9MQrYlkbHvSg7e","guideDialog");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,s=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(s=(a<3?i(s):a>3?i(e,o,s):i(e,o))||s);return a>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../manage/GameMag"),s=t("../manage/DialogMag"),r=cc._decorator,c=r.ccclass,l=r.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bg=null,e.hand=null,e.closeBtn=null,e.content=null,e.texts=null,e.handPosArr=[],e.flag=null,e}return n(e,t),e.prototype.onInit=function(t,e,o,n){void 0===n&&(n=null),this.node.zIndex=2e3,this.flag=t,this.texts.children[t].active=!0,this.content.setPosition(o),n&&(this.hand.active=!0,this.hand.angle=e,this.hand.setPosition(n),cc.tween(this.hand).repeatForever(cc.tween().to(.5,{scale:1.2}).delay(.1).to(.5,{scale:1}).delay(.1)).start()),this.closeBtn.on(cc.Node.EventType.TOUCH_END,this.onClose,this)},e.prototype.onClose=function(){switch(this.flag){case 0:cc.director.emit("initBackground");break;case 2:cc.director.emit("showGuideStep3");break;case 4:cc.director.emit("showGuideStep5");break;case 5:cc.director.emit("showGuideStep6");break;case 6:cc.director.emit("showEnemy")}a.default.Ins.updateGuide(this.flag),s.default.Ins.removePlane(s.DialogPath.GuideDialog)},i([l(cc.Node)],e.prototype,"bg",void 0),i([l(cc.Node)],e.prototype,"hand",void 0),i([l(cc.Node)],e.prototype,"closeBtn",void 0),i([l(cc.Node)],e.prototype,"content",void 0),i([l(cc.Node)],e.prototype,"texts",void 0),i([l({type:[cc.Vec2],tooltip:""})],e.prototype,"handPosArr",void 0),e=i([c],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../manage/DialogMag":"DialogMag","../manage/GameMag":"GameMag"}],gunEquip:[function(t,e,o){"use strict";cc._RF.push(e,"591223EtxBBJrz0fux78IaO","gunEquip");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,s=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(s=(a<3?i(s):a>3?i(e,o,s):i(e,o))||s);return a>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../manage/GameMag"),s=t("../../manage/AudioMag"),r=cc._decorator,c=r.ccclass,l=r.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e.showNode=null,e.hideNode=null,e.index=null,e}return n(e,t),e.prototype.init=function(t,e,o){this.index=e,this.showNode.active=!(t<0),this.icon.spriteFrame=o,this.node.on(cc.Node.EventType.TOUCH_END,this.onStartTouch,this)},e.prototype.onStartTouch=function(){var t=this;s.default.getInstance().playSound("\u6309\u94ae\u97f3"),cc.tween(this.icon.node).to(.2,{scale:1.2}).to(.2,{scale:0}).call(function(e){t.showNode.active=!1,e.scale=1,a.default.Ins.updateUseingDataByGunEquip(-1,t.index),cc.director.emit("freshEquipBtns")}).start()},i([l(cc.Sprite)],e.prototype,"icon",void 0),i([l(cc.Node)],e.prototype,"showNode",void 0),i([l(cc.Node)],e.prototype,"hideNode",void 0),e=i([c],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../../manage/AudioMag":"AudioMag","../../manage/GameMag":"GameMag"}],gunItem:[function(t,e,o){"use strict";cc._RF.push(e,"d9f96HS9JtNRqhke82Yko6l","gunItem");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,s=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(s=(a<3?i(s):a>3?i(e,o,s):i(e,o))||s);return a>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../manage/GameMag"),s=t("../../manage/AudioMag"),r=cc._decorator,c=r.ccclass,l=r.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e.gunName=null,e.actives=null,e.coin=null,e.diamond=null,e.coinLab=null,e.diamondLab=null,e.lock=null,e.getedIcon=null,e.index=0,e.gunData=null,e}return n(e,t),e.prototype.init=function(t,e,o,n){var i=a.default.Ins.useingData.gun;e.gunID==i&&(this.showAction(),cc.director.emit("freshGunPageUI",e)),this.gunData=e,this.index=t,this.icon.spriteFrame=o,this.gunName.spriteFrame=n,this.freshGunItemUI(),this.node.on(cc.Node.EventType.TOUCH_END,this.onStartTouch,this),cc.director.on("freshGunItemUI",this.freshGunItemUI,this)},e.prototype.freshGunItemUI=function(){var t=a.default.Ins.gunData[this.index];this.lock.active=!t.lockStatus,this.getedIcon.active=t.geted;var e=!(0!=this.gunData.costNum&&!t.geted);e?(this.coin.active=!e,this.diamond.active=!e):0==this.gunData.buyType?(this.coinLab.string=String(this.gunData.costNum),this.coin.active=!0,this.diamond.active=!1):(this.diamondLab.string=String(this.gunData.costNum),this.coin.active=!1,this.diamond.active=!0)},e.prototype.onStartTouch=function(){s.default.getInstance().playSound("\u6309\u94ae\u97f3"),this.node.parent.children.forEach(function(t){t.getChildByName("active").active=!1,t.getChildByName("active").stopAllActions()}),this.showAction(),cc.director.emit("freshGunPageUI",this.gunData)},e.prototype.showAction=function(){this.actives.active=!0,this.actives.opacity=255;cc.tween(this.actives).repeatForever(cc.tween().to(.8,{opacity:0}).to(.8,{opacity:255})).start()},i([l(cc.Sprite)],e.prototype,"icon",void 0),i([l(cc.Sprite)],e.prototype,"gunName",void 0),i([l(cc.Node)],e.prototype,"actives",void 0),i([l(cc.Node)],e.prototype,"coin",void 0),i([l(cc.Node)],e.prototype,"diamond",void 0),i([l(cc.Label)],e.prototype,"coinLab",void 0),i([l(cc.Label)],e.prototype,"diamondLab",void 0),i([l(cc.Node)],e.prototype,"lock",void 0),i([l({type:cc.Node,tooltip:"\u5df2\u7ecf\u83b7\u5f97\u7684\u6b66\u5668"})],e.prototype,"getedIcon",void 0),e=i([c],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../../manage/AudioMag":"AudioMag","../../manage/GameMag":"GameMag"}],gunPage:[function(t,e,o){"use strict";cc._RF.push(e,"2c206/bb1ZFS6vqr7vjtssX","gunPage");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,s=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(s=(a<3?i(s):a>3?i(e,o,s):i(e,o))||s);return a>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../manage/ConfigMag"),s=t("../../manage/GameMag"),r=t("../../manage/ToolsMag"),c=t("../../manage/AudioMag"),l=t("../../manage/DialogMag"),u=cc._decorator,p=u.ccclass,h=u.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.homeAtlas=null,e.scrollView=null,e.gunBox=null,e.gunName=null,e.gunDesc=null,e.downContent=null,e.bulletNumLab=null,e.onceNumLab=null,e.onceCostLab=null,e.addBulletBtn=null,e.unlockBtn=null,e.buyGunBtn=null,e.equipBtn=null,e.unequipBtn=null,e.equipBox=null,e.lockText=null,e.powerNode=null,e.speedNode=null,e.singlePre=null,e.index=0,e.equipIndex=0,e.len=0,e.equipLen=0,e.gunData=[],e.equipData=[],e.clickFlag=0,e.pool=null,e.skillConfig=[],e.speedCount=0,e.powerCount=0,e}return n(e,t),e.prototype.onLoad=function(){this.initUI(),cc.director.on("freshGunPageUI",this.freshGunPageUI,this),cc.director.on("freshEquipBtns",this.freshEquipBtns,this),this.addBulletBtn.on(cc.Node.EventType.TOUCH_END,this.onAddBulletBtn,this),this.unlockBtn.on(cc.Node.EventType.TOUCH_END,this.onUnlockBtn,this),this.buyGunBtn.on(cc.Node.EventType.TOUCH_END,this.onBuyGunBtn,this),this.equipBtn.on(cc.Node.EventType.TOUCH_END,this.onEquipBtn,this),this.unequipBtn.on(cc.Node.EventType.TOUCH_END,this.onUnequipBtn,this)},e.prototype.initUI=function(){this.skillConfig=s.default.Ins.skillConfig,this.downContent.active=!1,this.gunData=a.default.Ins.getGunData(),this.len=this.gunData.length,this.equipData=s.default.Ins.useingData.gunEquip,this.equipLen=this.equipData.length,this.loadItem(),this.loadEquipItem(),this.pool=new cc.NodePool;for(var t=0;t<35;t++){var e=cc.instantiate(this.singlePre);this.pool.put(e)}},e.prototype.scrollTo=function(){var t=s.default.Ins.useingData.gun,e=null;e=t>=22?0:(1-.04*t).toFixed(2),this.scrollView.scrollTo(cc.v2(0,Number(e)),0,!0)},e.prototype.loadEquipItem=function(){var t=this;r.default.Ins.getHomeResource("prefab/shop/gunEquip",function(e){var o=cc.instantiate(e),n=t.equipData[t.equipIndex],i=t.homeAtlas.getSpriteFrame("gun_"+n);o.getComponent("gunEquip").init(n,t.equipIndex,i),o.parent=t.equipBox,t.equipIndex++,t.equipIndex<t.equipLen&&t.loadEquipItem()})},e.prototype.onAddBulletBtn=function(){console.log("\u8d2d\u4e70\u5b50\u5f39"),c.default.getInstance().playSound("\u8d2d\u4e70\u5b50\u5f39");var t=this.gunData[this.clickFlag];if(s.default.Ins.currency.coin<t.buyOnceCost)l.default.Ins.show(l.DialogPath.MessageDialog,l.DialogScript.MessageDialog,["\u91d1\u5e01\u4e0d\u8db3"]);else{s.default.Ins.updateGunDataByBulletNum(this.clickFlag,t.buyOnceNum),s.default.Ins.updateCurrency(0,-t.buyOnceCost);var e=s.default.Ins.gunData[this.clickFlag];this.bulletNumLab.string=String(""+e.bulletNum),cc.director.emit("updateCurrency"),this.freshGunPageUI(t)}},e.prototype.onUnlockBtn=function(){c.default.getInstance().playSound("\u6309\u94ae\u97f3");var t=this.gunData[this.clickFlag],e=t.unlockLevel,o=t.unlockDiamond,n=s.default.Ins.level,i=s.default.Ins.currency.diamond;n>=e?this.unlockSuccess():i>=o?(s.default.Ins.updateCurrency(1,-o),cc.director.emit("updateCurrency"),this.unlockSuccess()):l.default.Ins.show(l.DialogPath.MessageDialog,l.DialogScript.MessageDialog,["sorry,\u672a\u8fbe\u6210\u89e3\u9501\u6761\u4ef6"])},e.prototype.unlockSuccess=function(){s.default.Ins.updateGunDataByLockStatus(this.clickFlag),this.gunBox.children[this.clickFlag].getChildByName("lock").active=!1,this.unlockBtn.active=!1,this.lockText.node.active=!1},e.prototype.onBuyGunBtn=function(){console.log("\u8d2d\u4e70\u6b66\u5668"),c.default.getInstance().playSound("\u6309\u94ae\u97f3");var t=this.gunData[this.clickFlag],e=t.costNum,o=s.default.Ins.currency;if(0==t.buyType){if(o.coin<e)return void l.default.Ins.show(l.DialogPath.MessageDialog,l.DialogScript.MessageDialog,["\u91d1\u5e01\u4e0d\u8db3"])}else if(o.diamond<e)return void l.default.Ins.show(l.DialogPath.MessageDialog,l.DialogScript.MessageDialog,["\u94bb\u77f3\u4e0d\u8db3"]);0!=t.buyOnceNum&&(s.default.Ins.updateGunDataByBulletNum(this.clickFlag,50),this.bulletNumLab.string=String(50),this.freshGunPageUI(t)),s.default.Ins.updateGunDataByGeted(this.clickFlag),s.default.Ins.updateCurrency(t.buyType,-t.costNum),cc.director.emit("updateCurrency"),cc.director.emit("freshGunItemUI"),this.freshDownContent(),this.freshEquipBtns(),this.onEquipBtn()},e.prototype.onEquipBtn=function(){console.log("\u88c5\u5907"),c.default.getInstance().playSound("\u6309\u94ae\u97f3");for(var t=s.default.Ins.useingData.gunEquip,e=this.equipBox.children,o=0;o<t.length;o++){var n=this.searchEquipData();if(t[o]<0&&!n){var i=e[o].getChildByName("show");i.active=!0;var a=this.homeAtlas.getSpriteFrame("gun_"+this.clickFlag);i.getChildByName("icon").getComponent(cc.Sprite).spriteFrame=a,s.default.Ins.updateUseingDataByGunEquip(this.clickFlag,o)}}this.freshEquipBtns()},e.prototype.onUnequipBtn=function(){var t=this;console.log("\u89e3\u9664\u88c5\u5907"),c.default.getInstance().playSound("\u6309\u94ae\u97f3");for(var e=s.default.Ins.useingData.gunEquip,o=function(o){if(e[o]==n.clickFlag){var i=n.equipBox.children[o].getChildByName("show"),a=i.getChildByName("icon");return cc.tween(a).to(.2,{scale:1.2}).to(.2,{scale:0}).call(function(e){i.active=!1,e.scale=1,s.default.Ins.updateUseingDataByGunEquip(-1,o),t.freshEquipBtns()}).start(),"break"}},n=this,i=0;i<e.length;i++){if("break"===o(i))break}},e.prototype.loadItem=function(){var t=this;r.default.Ins.getHomeResource("prefab/shop/gunItem",function(e){var o=cc.instantiate(e),n=t.homeAtlas.getSpriteFrame("gun_"+t.index),i=t.homeAtlas.getSpriteFrame("gname_"+t.index);o.getComponent("gunItem").init(t.index,t.gunData[t.index],n,i),o.parent=t.gunBox,t.index++,t.index<t.len?t.loadItem():t.scheduleOnce(function(){t.scrollTo()},0)})},e.prototype.freshGunPageUI=function(t){if(this.clickFlag!=t.gunID){this.clickFlag=t.gunID;var e=s.default.Ins.gunData[t.gunID];this.gunName.spriteFrame=this.homeAtlas.getSpriteFrame("gname_"+t.gunID),this.gunDesc.spriteFrame=this.homeAtlas.getSpriteFrame("gunDesc_"+t.gunDescType);var o=e.lockStatus;this.buyGunBtn.active=!o,this.unlockBtn.active=!o,0==t.unlockLevel||o?this.lockText.node.active=!1:(this.lockText.node.active=!0,this.lockText.string="\u7b2c"+t.unlockLevel+"\u5929\u89e3\u9501\u6216\u6d88\u8017"+t.unlockDiamond+"\u94bb\u77f3\u89e3\u9501"),this.freshDownContent(),this.freshEquipBtns(),this.loadSkillBlock(t)}},e.prototype.freshDownContent=function(){var t=this.gunData[this.clickFlag],e=s.default.Ins.gunData[this.clickFlag],o=t.buyOnceCost,n=e.lockStatus,i=e.geted;0!=o&&n&&i?(this.downContent.active=!0,this.bulletNumLab.string=String(""+e.bulletNum),this.onceNumLab.string=String("+"+t.buyOnceNum),this.onceCostLab.string=String("-"+t.buyOnceCost)):this.downContent.active=!1},e.prototype.checkEquipFull=function(){for(var t=s.default.Ins.useingData.gunEquip,e=!0,o=0;o<t.length;o++)if(t[o]<0){e=!1;break}return e},e.prototype.searchEquipData=function(){for(var t=!1,e=s.default.Ins.useingData.gunEquip,o=0;o<e.length;o++)if(e[o]==this.clickFlag){t=!0;break}return t},e.prototype.freshEquipBtns=function(){if(s.default.Ins.gunData[this.clickFlag].geted){this.buyGunBtn.active=!1;var t=this.checkEquipFull();this.searchEquipData()?(this.unequipBtn.active=!0,this.equipBtn.active=!1):t?(this.unequipBtn.active=!1,this.equipBtn.active=!1):(this.unequipBtn.active=!1,this.equipBtn.active=!0)}else this.buyGunBtn.active=!0},e.prototype.loadSkillBlock=function(t){var e=this;this.powerCount=0,this.speedCount=0,this.powerNode.destroyAllChildren(),this.speedNode.destroyAllChildren(),this.scheduleOnce(function(){e.loadPower(t),e.loadSpeed(t)},0)},e.prototype.getSkillNode=function(){return this.pool.size()>0?this.pool.get():cc.instantiate(this.singlePre)},e.prototype.loadSpeed=function(t){var e=this,o=t.speed,n=this.getSkillNode();n.getChildByName("bg").color=cc.color(50,223,17),n.parent=this.speedNode,n.scale=0,cc.tween(n).to(this.skillConfig[0],{scale:this.skillConfig[1]}).call(function(){e.speedCount++,e.speedCount<o&&e.loadSpeed(t)}).to(this.skillConfig[2],{scale:1}).start()},e.prototype.loadPower=function(t){var e=this,o=t.power,n=this.getSkillNode();n.getChildByName("bg").color=cc.color(255,179,0),n.parent=this.powerNode,n.scale=0,cc.tween(n).to(this.skillConfig[0],{scale:this.skillConfig[1]}).call(function(){e.powerCount++,e.powerCount<o&&e.loadPower(t)}).to(this.skillConfig[2],{scale:1}).start()},e.prototype.onDisable=function(){this.speedNode.destroyAllChildren(),this.powerNode.destroyAllChildren(),this.powerCount=0,this.speedCount=0,this.loadPower(this.gunData[this.clickFlag]),this.loadSpeed(this.gunData[this.clickFlag])},i([h(cc.SpriteAtlas)],e.prototype,"homeAtlas",void 0),i([h(cc.ScrollView)],e.prototype,"scrollView",void 0),i([h(cc.Node)],e.prototype,"gunBox",void 0),i([h(cc.Sprite)],e.prototype,"gunName",void 0),i([h(cc.Sprite)],e.prototype,"gunDesc",void 0),i([h({type:cc.Node,tooltip:"\u8d2d\u4e70\u5b50\u5f39\u680f"})],e.prototype,"downContent",void 0),i([h({type:cc.Label,tooltip:"\u5269\u4f59\u5b50\u5f39"})],e.prototype,"bulletNumLab",void 0),i([h({type:cc.Label,tooltip:"\u4e70\u4e00\u6b21\u5b50\u5f39\u589e\u52a0\u591a\u5c11\u5b50\u5f39\u6570\u91cf"})],e.prototype,"onceNumLab",void 0),i([h({type:cc.Label,tooltip:"\u4e70\u4e00\u6b21\u5b50\u5f39\u82b1\u8d39\u591a\u5c11\u91d1\u5e01"})],e.prototype,"onceCostLab",void 0),i([h(cc.Node)],e.prototype,"addBulletBtn",void 0),i([h({type:cc.Node,tooltip:"\u89e3\u9501"})],e.prototype,"unlockBtn",void 0),i([h({type:cc.Node,tooltip:"\u8d2d\u4e70\u6b66\u5668"})],e.prototype,"buyGunBtn",void 0),i([h({type:cc.Node,tooltip:"\u88c5\u5907"})],e.prototype,"equipBtn",void 0),i([h({type:cc.Node,tooltip:"\u89e3\u9664\u88c5\u5907"})],e.prototype,"unequipBtn",void 0),i([h(cc.Node)],e.prototype,"equipBox",void 0),i([h({type:cc.Label,tooltip:"\u89e3\u9501\u6761\u4ef6"})],e.prototype,"lockText",void 0),i([h(cc.Node)],e.prototype,"powerNode",void 0),i([h(cc.Node)],e.prototype,"speedNode",void 0),i([h(cc.Prefab)],e.prototype,"singlePre",void 0),e=i([p],e)}(cc.Component);o.default=d,cc._RF.pop()},{"../../manage/AudioMag":"AudioMag","../../manage/ConfigMag":"ConfigMag","../../manage/DialogMag":"DialogMag","../../manage/GameMag":"GameMag","../../manage/ToolsMag":"ToolsMag"}],homeMain:[function(t,e,o){"use strict";cc._RF.push(e,"060baqLURdBY4Uo9W0nUCA8","homeMain");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,s=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(s=(a<3?i(s):a>3?i(e,o,s):i(e,o))||s);return a>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../manage/GameMag"),s=t("../manage/AudioMag"),r=t("../manage/ToolsMag"),c=t("../manage/DialogMag"),l=t("../manage/ConfigMag"),u=t("../hutui/Hts"),p=t("../sdk/SdkManager"),h=cc._decorator,d=h.ccclass,f=h.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.loginPage=null,e.taskArrow=null,e.achieveCup=null,e.backBtn=null,e.startBtn=null,e.signInBtn=null,e.shopBtn=null,e.achieveBtn=null,e.taskBtnLight=null,e.taskBtn=null,e.levelLab=null,e.taskNode=[],e.taskPos=[],e.taskBox=null,e.defaultBg=null,e.updateBg=null,e.circle=null,e.redLight=null,e.light=null,e.singleCarousel=null,e.moreGameImg=null,e.moreGameName=null,e.hotIcon=null,e.moreGameBtn=null,e.screenW=0,e.updateBgDis=22,e.singleCaroData=null,e.singleData=null,e}return n(e,t),e.prototype.timer=function(){a.default.Ins.updateAchieveRecord(2)},e.prototype.onLoad=function(){cc.director.getCollisionManager().enabled=!0,cc.director.getPhysicsManager().enabled=!0,a.default.Ins.trySkin=null,a.default.Ins.tryGun=null,this.initUI(),this.judgeTaskArrow(),this.judgeAchieve(),this.gameEvents()},e.prototype.initUI=function(){this.initMoreGame();var t=a.default.Ins.level;if(this.levelLab.string=String("\u7b2c"+t+"\u5929"),a.default.Ins.guide[0]||c.default.Ins.show(c.DialogPath.GuideDialog,c.DialogScript.GuideDialog,[0,0,cc.v2(0,-230)]),a.default.Ins.guide[0]&&this.initBackground(),t>1&&!a.default.Ins.guide[7]){var e=cc.v2(this.shopBtn.x,this.shopBtn.y-70);c.default.Ins.show(c.DialogPath.GuideDialog,c.DialogScript.GuideDialog,[7,0,cc.Vec2.ZERO,cc.v2(e.x,e.y)])}cc.tween(this.taskBtnLight).repeatForever(cc.tween().to(1.5,{scale:2.5,opacity:130}).delay(.1).to(1.5,{scale:1.7,opacity:80}).delay(.15)).start(),cc.tween(this.redLight).repeatForever(cc.tween().to(1.2,{scale:3.5}).delay(.1).to(1.2,{scale:1.5}).delay(.2)).start(),cc.tween(this.light).repeatForever(cc.tween().to(2,{angle:12}).delay(.1).to(2,{angle:0}).delay(.2)).start(),cc.tween(this.light).repeatForever(cc.tween().to(2,{angle:12}).delay(.1).to(2,{angle:0}).delay(.2)).start()},e.prototype.onDestroy=function(){this.unschedule(this.singleCarouselTimer)},e.prototype.singleCarouselTimer=function(){var t=this,e=this.singleCaroData,o=e[Math.floor(Math.random()*e.length)];this.singleData=o,cc.assetManager.loadRemote(o.iconUrl,function(e,n){e?console.error("loadRemote\u51fa\u9519",e):(t.singleCarousel.active=!0,t.moreGameImg.spriteFrame=new cc.SpriteFrame(n),t.moreGameName.string=String(o.txt),o.mark.length>0&&(t.hotIcon.active=!0))})},e.prototype.initMoreGame=function(){if(!cc.sys.isBrowser){var t=this;this.singleCarousel.active=!1,console.log("launchData",a.default.Ins.launchData),u.hts.init("5fdc8980d1b5c92d77836329",a.default.Ins.launchData.path,function(e,o){if(e)console.error("\u4e92\u63a8\u521d\u59cb\u5316\u51fa\u9519",e);else{console.log("\u4e92\u63a8\u521d\u59cb\u5316",o);u.hts.getBox("5fdc89aad1b5c92d7783632b",function(e,o){if(e)console.error("getBox",e);else{console.log("icon\u8f6e\u64ad\u4f4dgetBox",o[0]),t.singleCaroData=o[0],t.singleCarouselTimer(),t.unschedule(t.singleCarouselTimer),t.schedule(t.singleCarouselTimer,3);var n=cc.repeatForever(cc.sequence(cc.repeat(cc.sequence(cc.scaleTo(.1,1.1),cc.rotateTo(.07,5),cc.rotateTo(.07,-5),cc.rotateTo(.03,0),cc.scaleTo(.1,1)),2),cc.delayTime(2)));cc.tween(t.singleCarousel).then(n).start()}})}}),this.singleCarousel.on(cc.Node.EventType.TOUCH_END,function(){if(!a.default.Ins.showJumpToGame){a.default.Ins.showJumpToGame=!0;var e=t.singleData;p.default.instance.openOtherGame(e,"5fdc89aad1b5c92d7783632b")}},this)}},e.prototype.gameEvents=function(){this.levelLab.node.on(cc.Node.EventType.TOUCH_END,function(){},this),cc.game.off(cc.game.EVENT_SHOW),cc.game.on(cc.game.EVENT_SHOW,function(){console.log("\u8fdb\u5165\u6e38\u620f"),this.schedule(this.timer,60)}.bind(this)),cc.game.off(cc.game.EVENT_HIDE),cc.game.on(cc.game.EVENT_HIDE,function(){console.log("\u9000\u51fa\u6e38\u620f"),this.unschedule(this.timer)}.bind(this)),cc.director.on("initBackground",this.initBackground,this),cc.director.on("judgeTaskArrow",this.judgeTaskArrow,this),cc.director.on("judgeAchieve",this.judgeAchieve,this),this.backBtn.on(cc.Node.EventType.TOUCH_END,this.onBack,this),this.startBtn.on(cc.Node.EventType.TOUCH_END,this.onStartGame,this),this.shopBtn.on(cc.Node.EventType.TOUCH_END,this.onShopBtn,this),this.achieveBtn.on(cc.Node.EventType.TOUCH_END,this.onAchieveBtn,this),this.taskBtn.on(cc.Node.EventType.TOUCH_END,this.onTaskBtn,this),this.signInBtn.on(cc.Node.EventType.TOUCH_END,function(){r.default.Ins.buttonAction(this.signInBtn,function(){c.default.Ins.show(c.DialogPath.SignInDialog,c.DialogScript.SignInDialog,[])}.bind(this))},this),this.moreGameBtn.on(cc.Node.EventType.TOUCH_END,function(){r.default.Ins.buttonAction(this.moreGameBtn,function(){c.default.Ins.show(c.DialogPath.MoreGameDialog,c.DialogScript.MoreGameDialog,["5fdc89d7d1b5c92d7783632d"])}.bind(this))},this)},e.prototype.initBackground=function(){var t=this;this.taskBox.children.forEach(function(t){t.active=!1}),this.scheduleOnce(function(){t.showUpdateBg()},.3)},e.prototype.showUpdateBg=function(){s.default.getInstance().playSound("\u5730\u56fe"),this.schedule(this.bgMoveLeft,.016)},e.prototype.bgMoveLeft=function(){this.updateBg.width+=this.updateBgDis,this.updateBg.getChildByName("light").x=this.updateBg.width,this.updateBg.width>=this.defaultBg.width&&(this.unschedule(this.bgMoveLeft),this.showLevelTask(),this.schedule(this.bgMoveRight,.016))},e.prototype.bgMoveRight=function(){this.updateBg.width-=this.updateBgDis,this.updateBg.getChildByName("light").x=this.updateBg.width,this.updateBg.width<0&&this.unschedule(this.bgMoveRight)},e.prototype.onBack=function(){r.default.Ins.buttonAction(this.backBtn,function(){this.loginPage.active=!0}.bind(this))},e.prototype.start=function(){var t=this;cc.assetManager.loadBundle("game",function(e,o){console.log(e,o),cc.director.preloadScene(a.default.Ins.gameScene,function(t,e,o){},function(t){if(t)throw new Error(""+t);a.default.Ins.gameLoaded=!0,console.log("\u6e38\u620f\u573a\u666f\u9884\u52a0\u8f7d\u5b8c\u6210")}.bind(t))})},e.prototype.onStartGame=function(){var t=this;r.default.Ins.buttonAction(this.startBtn,function(){t.loginPage.active=!1,t.initBackground()}.bind(this))},e.prototype.onShopBtn=function(){r.default.Ins.buttonAction(this.shopBtn,function(){c.default.Ins.show(c.DialogPath.ShopDialog,c.DialogScript.ShopDialog,[])}.bind(this))},e.prototype.onAchieveBtn=function(){this.achieveCup.stopAllActions(),this.achieveCup.opacity=255,r.default.Ins.buttonAction(this.achieveBtn,function(){c.default.Ins.show(c.DialogPath.AchieveDialog,c.DialogScript.AchieveDialog,[])}.bind(this))},e.prototype.onTaskBtn=function(){r.default.Ins.buttonAction(this.taskBtn,function(){c.default.Ins.show(c.DialogPath.TaskDialog,c.DialogScript.TaskDialog,[])}.bind(this))},e.prototype.judgeTaskArrow=function(){for(var t=a.default.Ins.taskData,e=l.default.Ins.getTaskData(),o=0;o<e.length;o++){var n=e[o];if(t.killSum>=n.killNum&&!t.data[o].geted){this.taskArrow.active=!0;var i=this.taskArrow.position,s=cc.repeatForever(cc.sequence(cc.moveTo(.5,0,i.y-6),cc.moveTo(.5,0,i.y+6)));return this.taskArrow.stopAllActions(),void cc.tween(this.taskArrow).then(s).start()}return void(this.taskArrow.active=!1)}},e.prototype.judgeAchieve=function(){for(var t=a.default.Ins.achieveData,e=a.default.Ins.achieveRecord,o=l.default.Ins.getAchieveData(),n=0;n<o.length;n++){var i=null;switch(o[n].taskType){case 0:i=e.killNum;break;case 1:i=e.killBossNum;break;case 2:i=e.timer;break;case 3:i=e.level;break;case 4:i=e.gunSum}if(i>=o[n].target&&!t[n].geted){this.achieveCup.stopAllActions(),this.achieveCup.opacity=255;var s=cc.tween().to(.7,{opacity:0}).to(.7,{opacity:255}).delay(.7);cc.tween(this.achieveCup).then(s).repeatForever().start();break}}},e.prototype.getTaskRandom=function(){var t=null,e=a.default.Ins.level,o=null;e<2?(o=[1],t=1):e>=2&&e<=3?(o=[1,2,3],t=2):e>=4&&e<=6?(o=[1,2,3,4,5],t=3):(o=[1,2,3,4,5],t=4),o.sort(function(){return Math.random()-.5});return e>=6&&o.unshift(0),o.slice(0,t)},e.prototype.showLevelTask=function(){var t=null,e=a.default.Ins.level;t=0==a.default.Ins.taskTypeArr.length?this.getTaskRandom():1==a.default.Ins.taskTypeArr.length&&0===a.default.Ins.taskTypeArr[0]?this.getTaskRandom():a.default.Ins.taskTypeArr,console.log("\u4efb\u52a1\u5217\u8868:",t),a.default.Ins.taskTypeArr=t;var o=[0,1,2,3];1==e?o=[0]:o.sort(function(){return Math.random()-.5});for(var n=o.slice(0,t.length),i=function(e){var o=s.taskBox.children[t[e]],i=s.taskPos[n[e]];a.default.Ins.guide[1]||s.scheduleOnce(function(){c.default.Ins.show(c.DialogPath.GuideDialog,c.DialogScript.GuideDialog,[1,0,cc.v2(0,-230),cc.v2(i.x,i.y-150)])},.4),o.active=!0,o.setPosition(i),o.getComponent("task").init(t[e],n[e]);var r=cc.instantiate(s.circle);r.setPosition(i.x,i.y-90),r.parent=s.node},s=this,r=0;r<t.length;r++)i(r)},i([f(cc.Node)],e.prototype,"loginPage",void 0),i([f(cc.Node)],e.prototype,"taskArrow",void 0),i([f(cc.Node)],e.prototype,"achieveCup",void 0),i([f(cc.Node)],e.prototype,"backBtn",void 0),i([f(cc.Node)],e.prototype,"startBtn",void 0),i([f({type:cc.Node,tooltip:"\u7b7e\u5230\u6309\u94ae"})],e.prototype,"signInBtn",void 0),i([f(cc.Node)],e.prototype,"shopBtn",void 0),i([f({type:cc.Node,tooltip:"\u6210\u5c31\u6309\u94ae"})],e.prototype,"achieveBtn",void 0),i([f(cc.Node)],e.prototype,"taskBtnLight",void 0),i([f({type:cc.Node,tooltip:"\u65e5\u5e38\u4efb\u52a1"})],e.prototype,"taskBtn",void 0),i([f(cc.Label)],e.prototype,"levelLab",void 0),i([f({type:[cc.Node],tooltip:"\u4efb\u52a1\u56fe\u6807"})],e.prototype,"taskNode",void 0),i([f({type:[cc.Vec2],tooltip:"\u663e\u793a\u4efb\u52a1\u56fe\u6807\u7684\u5750\u6807"})],e.prototype,"taskPos",void 0),i([f(cc.Node)],e.prototype,"taskBox",void 0),i([f(cc.Node)],e.prototype,"defaultBg",void 0),i([f(cc.Node)],e.prototype,"updateBg",void 0),i([f(cc.Prefab)],e.prototype,"circle",void 0),i([f(cc.Node)],e.prototype,"redLight",void 0),i([f(cc.Node)],e.prototype,"light",void 0),i([f({type:cc.Node,tooltip:"\u5355\u4e2a\u7684\u4e92\u63a8icon\u8f6e\u64ad"})],e.prototype,"singleCarousel",void 0),i([f(cc.Sprite)],e.prototype,"moreGameImg",void 0),i([f(cc.Label)],e.prototype,"moreGameName",void 0),i([f({type:cc.Node,tooltip:"\u70ed\u95e8\u89d2\u6807"})],e.prototype,"hotIcon",void 0),i([f({type:cc.Node,tooltip:"\u66f4\u591a\u6e38\u620f"})],e.prototype,"moreGameBtn",void 0),e=i([d],e)}(cc.Component);o.default=g,cc._RF.pop()},{"../hutui/Hts":"Hts","../manage/AudioMag":"AudioMag","../manage/ConfigMag":"ConfigMag","../manage/DialogMag":"DialogMag","../manage/GameMag":"GameMag","../manage/ToolsMag":"ToolsMag","../sdk/SdkManager":"SdkManager"}],htSdk:[function(t,e,o){"use strict";cc._RF.push(e,"acbb4mHmwhBO4dWQU7JuFfI","htSdk"),function(t,e){for(var o in e)t[o]=e[o]}(o,function(t){var e={};function o(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,o),i.l=!0,i.exports}return o.m=t,o.c=e,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},o.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=1)}([function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.lerr=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];t.unshift("====>"),console.error.apply(window,t)},t.llog=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];t.unshift("====>"),console.log.apply(window,t)},t.twoInt=function(t){return t<10?"0"+t:t},t.todayStr=function(){var e=new Date;return""+e.getFullYear()+t.twoInt(e.getMonth()+1)+t.twoInt(e.getDate())},t.randomInt=function(t,e){return Math.floor(Math.random()*(e-t+1)+t)},t.saveData=function(t,e){var o=window.localStorage;o&&o.setItem("kcSdk_"+t,e)},t.loadData=function(t){var e=window.localStorage;if(e){var o=e.getItem("kcSdk_"+t);if(o)return o}return null},t.encodeUTF8=function(t){var e,o,n,i=[];for(e=0;e<t.length;e++)(o=t.charCodeAt(e))<128?i.push(o):o<2048?i.push(192+(o>>6&31),128+(63&o)):((n=55296^o)>>10==0?(o=(n<<10)+(56320^t.charCodeAt(++e))+65536,i.push(240+(o>>18&7),128+(o>>12&63))):i.push(224+(o>>12&15)),i.push(128+(o>>6&63),128+(63&o)));return i},t.s=function(e){var o,n,i,a=new Uint8Array(t.encodeUTF8(e)),s=16+(a.length+8>>>6<<4);for((e=new Uint8Array(s<<2)).set(new Uint8Array(a.buffer)),e=new Uint32Array(e.buffer),i=new DataView(e.buffer),o=0;o<s;o++)e[o]=i.getUint32(o<<2);e[a.length>>2]|=128<<24-8*(3&a.length),e[s-1]=a.length<<3;var r=[],c=[function(){return p[1]&p[2]|~p[1]&p[3]},function(){return p[1]^p[2]^p[3]},function(){return p[1]&p[2]|p[1]&p[3]|p[2]&p[3]},function(){return p[1]^p[2]^p[3]}],l=function(t,e){return t<<e|t>>>32-e},u=[1518500249,1859775393,-1894007588,-899497514],p=[1732584193,-271733879,null,null,-1009589776];for(p[2]=~p[0],p[3]=~p[1],o=0;o<e.length;o+=16){var h=p.slice(0);for(n=0;n<80;n++)r[n]=n<16?e[o+n]:l(r[n-3]^r[n-8]^r[n-14]^r[n-16],1),i=l(p[0],5)+c[n/20|0]()+p[4]+r[n]+u[n/20|0]|0,p[1]=l(p[1],30),p.pop(),p.unshift(i);for(n=0;n<5;n++)p[n]=p[n]+h[n]|0}for(i=new DataView(new Uint32Array(p).buffer),o=0;o<5;o++)p[o]=i.getUint32(o<<2);return Array.prototype.map.call(new Uint8Array(new Uint32Array(p).buffer),function(t){return(t<16?"0":"")+t.toString(16)}).join("")},t.b=function(t){var e=[];for(var o in t)e.push(o);e=e.sort();for(var n="",i=0;i<e.length;i++){var a=t[e[i]];"object"==typeof a&&(a=this.b(a)),n+=e[i]+a}return n},t.a=function(e,o,n){var i=[];for(var a in e)null!==e[a]&&void 0!==e[a]?i.push(a):delete e[a];i=i.sort();var s=t.b(e);return o&&(s+=o),s+=n||"pH0Xhyenu2e1zdUg",t.s(s)},t.jax=function(e,o,n){n||(n=function(e){if(e)return t.lerr(e)});var i=new XMLHttpRequest,a=(new Date).getTime();o.s=t.a(o,a),i.open("POST",e,!0),i.setRequestHeader("Content-Type","application/json; charset=utf-8"),i.setRequestHeader("ts",""+a);var s=JSON.stringify(o);i.send(s),i.onload=function(){if(200==i.status){var e={jaxERR:""+i.responseText};try{e=JSON.parse(i.responseText)}catch(e){return t.lerr(e),n(null,{re:"1111",err:"jsonErr:"+i.responseText})}return n(null,e)}return n(null,{re:"9"+i.status})}},t}();e.jax=n.jax,e.llog=n.llog,e.lerr=n.lerr,e.saveData=n.saveData,e.loadData=n.loadData,e.randomInt=n.randomInt,e.todayStr=n.todayStr},function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0});var n=o(0),i=function(){function t(){this.version="1.2.0",this.navGap=3e3,this.lastNavT=0,this.htHost="https://dk.gametdd.com/htApi/ht_api/",this.picType="jpg"}return t.instance=function(){return t.me?t.me:(t.me=new t,t.me)},t.prototype.getUid=function(){return t.Uid?t.Uid:(t.Uid=n.loadData("uid"),t.Uid||"null")},t.prototype.setUid=function(e){e&&t.Uid!==e&&(t.Uid=e,n.saveData("uid",e))},t.prototype.jht=function(t,e,o){e.v=this.version,n.jax(this.htHost+t,e,function(t,e){return t||!e?(n.llog("jhtERR",t),o(t||new Error("no re"))):0!==e.re?(n.llog("jht FAILED!"+JSON.stringify(e)),o(new Error("err:"+e.re))):void o(null,e)})},t.prototype.init=function(e,o,i){var a=this;n.llog("HTS init v:"+this.version+","+e),t.Gid=e;var s=n.loadData("htHost");s&&(this.htHost=s);var r=n.loadData("picType");r&&(this.picType=r);var c={gid:e,uid:this.getUid(),query:o||"null"};n.llog("init start..."+this.picType+","+this.htHost),this.jht("init",c,function(e,o){if(e)i(e);else{n.llog("init done:"+o.re),a.setUid(o.uid),o.iconPre&&(t.IconPre=o.iconPre),o.picType&&(a.picType=o.picType,n.saveData("picType",o.picType)),o.navGap&&(a.navGap=o.navGap);for(var s=[],r=0;r<o.midArr.length;r++){var c=o.midArr[r],l="";o.vArr&&o.vArr.length===o.midArr.length&&0!==parseInt(o.vArr[r])&&(l="_"+o.vArr[r]),s.push({iconUrl:o.iconPre+c+l+"."+a.picType,mid:c})}i(null,s),o.htHost&&o.htHost!==a.htHost&&(a.htHost=o.htHost,n.saveData("htHost",o.htHost))}})},t.prototype.getBox=function(e,o){var i=this;if(!t.IconPre)return n.llog("htSdk \u672a\u521d\u59cb\u5316!!"+t.IconPre),o(new Error("htSdk \u672a\u521d\u59cb\u5316"));var a={bid:e};this.jht("getBox",a,function(n,a){if(n)return o(n);if(!a.arr||a.arr.length<=0)return o(new Error("\u670d\u52a1\u914d\u7f6e\u6709\u8befbid:"+e));for(var s=[],r=0;r<a.arr.length;r++){for(var c=a.arr[r],l=[],u=0;u<c.length;u++){var p=c[u].split("@"),h="",d="";p.length>=4&&"0"!==p[3]&&(h="_"+p[3]),p.length>=5&&(d=p[4]),l.push({jumpKey:p[1],mid:p[0],iconUrl:t.IconPre+p[0]+h+"."+i.picType,txt:p[2],mark:d,query:"mid="+p[0]+"&bid="+e+"&uid="+t.Uid+"&po="+r})}s.push(l)}o(null,s)})},t.prototype.navTo=function(e,o,i,a){var s=this,r=(new Date).getTime();if(r-this.lastNavT<this.navGap)n.llog("navTo too");else{this.lastNavT=r;var c={gid:e||t.Gid,uid:this.getUid(),bid:o,mid:i};o?i?(a&&(c.fail="true"),n.llog("navTo",JSON.stringify(c)),this.jht("navTo",c,function(t,e){t||s.setUid(e.uid)})):n.llog("navTo \u65e0mid"):n.llog("navTo \u65e0bid")}},t.prototype.navFrom=function(e,o){var i=this;if(o){t.Gid=e;var a={gid:e,uid:this.getUid(),query:o||"null"};n.llog("navFrom",JSON.stringify(a)),this.jht("navFrom",a,function(t,e){t||i.setUid(e.uid)})}else n.llog("navFrom query is empty!"+o)},t.prototype.jlog=function(e,o,i){var a=this;if(t.Gid){var s={act:e,gid:t.Gid,uid:this.getUid(),data:o,user:i};n.llog("jlog",JSON.stringify(s)),this.jht("jlog",s,function(t,e){t||a.setUid(e.uid)})}else n.llog("jlog no gid",e,o)},t.prototype.getSharePic=function(t,e){this.jht("getSharePic",{game:t},e)},t.prototype.shareTo=function(t){this.jht("shareTo",{wxPicId:t},function(e){e?n.lerr(e):n.llog("shareTo OK,"+t)})},t.prototype.shareFrom=function(t){this.jht("shareFrom",{wxPicId:t},function(e){e?n.lerr(e):n.llog("shareFrom OK,"+t)})},t.prototype.jreq=function(t,e,o){n.jax(t,e,o)},t}();e.default=i.instance()}])),cc._RF.pop()},{}],ice:[function(t,e,o){"use strict";cc._RF.push(e,"14616SYNa1CX7NdWNqNCL3w","ice");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,s=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(s=(a<3?i(s):a>3?i(e,o,s):i(e,o))||s);return a>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../manage/GameMag"),s=cc._decorator,r=s.ccclass,c=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.blockPre=null,e.blockPool=null,e}return n(e,t),e.prototype.onLoad=function(){var t=this;this.blockPool=new cc.NodePool;for(var e=0;e<10;e++){var o=cc.instantiate(this.blockPre);this.blockPool.put(o)}cc.tween(this.node).to(a.default.Ins.frezonTime,{opacity:50}).call(function(){t.node.opacity=0}).start()},e.prototype.onCollisionEnter=function(t,e){var o=this;if(1==t.tag||6==t.tag||8==t.tag){var n=this.blockPool.get();n.parent=this.node;for(var i=n.children,a=0;a<i.length;a++){var s=i[a],r=(a%2==0?1:-1)*(80*Math.random()+170),c=200*Math.random()+100,l=cc.spawn(cc.jumpTo(.7,cc.v2(r,-140),c,1),cc.rotateTo(.7,700));s.stopAllActions(),s.setPosition(0,0),cc.tween(s).then(l).delay(.1).call(function(){o.blockPool.put(n)}).start()}}},i([c(cc.Prefab)],e.prototype,"blockPre",void 0),e=i([r],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../manage/GameMag":"GameMag"}],loading:[function(t,e,o){"use strict";cc._RF.push(e,"2ab53FjrOdH65M089OeU3DB","loading");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,s=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(s=(a<3?i(s):a>3?i(e,o,s):i(e,o))||s);return a>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../Script/manage/GameMag"),s=t("../Script/manage/AudioMag"),r=t("../Script/sdk/SdkManager"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.falseBar=null,e.progress=null,e.str=null,e}return n(e,t),e.prototype.onLoad=function(){var t=this;cc.sys.isBrowser||(a.default.Ins.launchData=wx.getLaunchOptionsSync()),this.scheduleOnce(function(){t.load()},0)},e.prototype.load=function(){r.default.instance.InitSDK(),a.default.Ins.initLocalStorageData(),this.schedule(this.fun,.02);var t=a.default.Ins.homeScene,e=this;cc.assetManager.loadBundle("home",function(o,n){console.log("\u52a0\u8f7dhome",o,n),s.default.getInstance().init(),cc.assetManager.loadBundle("main",function(o,n){e.unschedule(e.fun),console.log("\u52a0\u8f7dmain",o,n),cc.director.preloadScene(t,function(t,o,n){e.falseBar.active=!1,e.progress.node.active=!0;var i=Number((t/o).toFixed(2));e.progress.progress=i},function(e){if(console.log("\u4e3b\u573a\u666f\u9884\u52a0\u8f7d\u5b8c\u6210"),e)throw new Error(""+e);cc.director.loadScene(t)})})})},e.prototype.fun=function(){this.falseBar.getChildByName("bar").width+=1},i([u(cc.Node)],e.prototype,"falseBar",void 0),i([u(cc.ProgressBar)],e.prototype,"progress",void 0),i([u(cc.Label)],e.prototype,"str",void 0),e=i([l],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../Script/manage/AudioMag":"AudioMag","../Script/manage/GameMag":"GameMag","../Script/sdk/SdkManager":"SdkManager"}],mechaBullet:[function(t,e,o){"use strict";cc._RF.push(e,"f3e1dW8zVZLtZP5gFZqhuTI","mechaBullet");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,s=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(s=(a<3?i(s):a>3?i(e,o,s):i(e,o))||s);return a>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../manage/GameMag"),s=cc._decorator,r=s.ccclass,c=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bulletCollider=null,e.range=null,e.speed=2e3,e.dir=0,e.camera=null,e.cameraW=0,e}return n(e,t),e.prototype.init=function(t){this.dir=t,this.camera=cc.find("Canvas/roleCamera"),this.cameraW=this.camera.width/2},e.prototype.update=function(t){this.node.x+=this.dir*this.speed*t,(this.node.x>this.camera.x+this.cameraW+200||this.node.x<this.camera.x-this.cameraW-200)&&this.node&&a.default.Ins.putMechaBullet(this.node)},e.prototype.onCollisionEnter=function(t,e){var o=this;5==t.tag&&2==a.default.Ins.useingData.mecha&&(this.bulletCollider.enabled=!1,this.range.active=!0,this.speed=0,this.scheduleOnce(function(){o.node&&(o.bulletCollider.enabled=!0,o.range.active=!1,a.default.Ins.putMechaBullet(o.node))},.05))},i([c(cc.BoxCollider)],e.prototype,"bulletCollider",void 0),i([c({type:cc.Node,tooltip:"\u673a\u75322\u7684\u4f24\u5bb3\u533a\u57df"})],e.prototype,"range",void 0),e=i([r],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../../manage/GameMag":"GameMag"}],mechaItem:[function(t,e,o){"use strict";cc._RF.push(e,"3d4f9yAIb5O7rIs+6ngA8dp","mechaItem");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,s=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(s=(a<3?i(s):a>3?i(e,o,s):i(e,o))||s);return a>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../manage/GameMag"),s=t("../../manage/ConfigMag"),r=t("../../manage/AudioMag"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e.getNum=null,e.actives=null,e.equipIcon=null,e.mechaData=[],e.index=0,e}return n(e,t),e.prototype.init=function(t,e,o){if(0==e){this.actives.active=!0;var n=s.default.Ins.getMechaData();cc.director.emit("freshMechaPageUI",n[e])}else this.actives.active=!1;var i=a.default.Ins.useingData.mecha;t.getNum>0&&e==i&&(this.equipIcon.active=!0),this.mechaData=t,this.index=e,this.icon.spriteFrame=o,this.getNum.string=String("x"+t.getNum),cc.director.on("freshMechaItemUI",this.freshMechaItemUI,this),cc.director.on("freshEquipIcon",this.freshEquipIcon,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onStartTouch,this)},e.prototype.onStartTouch=function(){r.default.getInstance().playSound("\u6309\u94ae\u97f3");var t=s.default.Ins.getMechaData();cc.director.emit("freshMechaPageUI",t[this.index]),this.node.parent.children.forEach(function(t){t.getChildByName("active").active=!1}),this.actives.active=!0},e.prototype.freshEquipIcon=function(){this.equipIcon.active=!1},e.prototype.freshMechaItemUI=function(t){if(this.index==t){var e=a.default.Ins.mechaData[t];this.getNum.string=String("x"+e.getNum),this.equipIcon.active=!0,a.default.Ins.updateUseingDataByMecha(t)}else this.equipIcon.active=!1},i([u(cc.Sprite)],e.prototype,"icon",void 0),i([u(cc.Label)],e.prototype,"getNum",void 0),i([u(cc.Node)],e.prototype,"actives",void 0),i([u(cc.Node)],e.prototype,"equipIcon",void 0),e=i([l],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../../manage/AudioMag":"AudioMag","../../manage/ConfigMag":"ConfigMag","../../manage/GameMag":"GameMag"}],mechaPage:[function(t,e,o){"use strict";cc._RF.push(e,"42f69GXgBJBBIL5Gy0jGor3","mechaPage");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,s=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(s=(a<3?i(s):a>3?i(e,o,s):i(e,o))||s);return a>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../manage/ConfigMag"),s=t("../../manage/GameMag"),r=t("../../manage/ToolsMag"),c=t("../../manage/AudioMag"),l=t("../../manage/DialogMag"),u=cc._decorator,p=u.ccclass,h=u.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.homeAtlas=null,e.costBox=null,e.mechaParent=null,e.mechaBox=null,e.mechaName=null,e.mechaDesc=null,e.buyGunBtn=null,e.equipBtn=null,e.unequipBtn=null,e.powerNode=null,e.speedNode=null,e.singlePre=null,e.coinLab=null,e.diamondLab=null,e.bulletShellsPre=null,e.mecha=null,e.mechaData=[],e.len=0,e.index=0,e.clickFlag=null,e.pool=null,e.skillConfig=[],e.speedCount=0,e.powerCount=0,e.count=0,e}return n(e,t),e.prototype.onLoad=function(){this.skillConfig=s.default.Ins.skillConfig,this.mechaData=a.default.Ins.getMechaData(),this.len=this.mechaData.length,this.loadItem(),this.pool=new cc.NodePool;for(var t=0;t<35;t++){var e=cc.instantiate(this.singlePre);this.pool.put(e)}cc.director.on("freshMechaPageUI",this.freshMechaPageUI,this),this.buyGunBtn.on(cc.Node.EventType.TOUCH_END,this.onBuyGunBtn,this),this.equipBtn.on(cc.Node.EventType.TOUCH_END,this.onEquipBtn,this),this.unequipBtn.on(cc.Node.EventType.TOUCH_END,this.onUnequipBtn,this)},e.prototype.loadItem=function(){var t=this;r.default.Ins.getHomeResource("prefab/shop/mechaItem",function(e){var o=cc.instantiate(e),n=t.homeAtlas.getSpriteFrame("mecha_"+t.index),i=s.default.Ins.mechaData;o.getComponent("mechaItem").init(i[t.index],t.index,n),o.parent=t.mechaBox,t.index++,t.index<t.len&&t.loadItem()})},e.prototype.onBuyGunBtn=function(){c.default.getInstance().playSound("\u6309\u94ae\u97f3");var t=this.mechaData[this.clickFlag],e=s.default.Ins.currency;if(0==t.buyType){if(e.coin<t.costNum)return void l.default.Ins.show(l.DialogPath.MessageDialog,l.DialogScript.MessageDialog,["\u91d1\u5e01\u4e0d\u8db3"])}else if(e.diamond<t.costNum)return void l.default.Ins.show(l.DialogPath.MessageDialog,l.DialogScript.MessageDialog,["\u94bb\u77f3\u4e0d\u8db3"]);s.default.Ins.updateCurrency(t.buyType,-t.costNum),s.default.Ins.updateMechaData(this.clickFlag,1),cc.director.emit("updateCurrency"),cc.director.emit("freshMechaItemUI",this.clickFlag),this.freshEquip(t)},e.prototype.onEquipBtn=function(){c.default.getInstance().playSound("\u6309\u94ae\u97f3"),cc.director.emit("freshMechaItemUI",this.clickFlag),this.equipBtn.active=!1,this.unequipBtn.active=!0},e.prototype.onUnequipBtn=function(){c.default.getInstance().playSound("\u6309\u94ae\u97f3"),cc.director.emit("freshEquipIcon"),this.equipBtn.active=!0,this.unequipBtn.active=!1,s.default.Ins.updateUseingDataByMecha(this.clickFlag,-1)},e.prototype.freshMechaPageUI=function(t){this.clickFlag!=t.mechaID&&(this.clickFlag=t.mechaID,this.mechaName.spriteFrame=this.homeAtlas.getSpriteFrame("mname_"+t.mechaID),this.mechaDesc.spriteFrame=this.homeAtlas.getSpriteFrame("mechaDesc_"+t.mechaID),this.freshMechaBone(t),this.freshEquip(t),this.freshCostBox(t),this.loadSkillBlock(t))},e.prototype.freshMechaBone=function(t){var e=this;this.unschedule(this.timer1),this.mechaParent.removeAllChildren();var o=t.mechaID;r.default.Ins.getHomeResource("prefab/mecha/mecha"+o,function(t){var o=cc.instantiate(t);o.parent=e.mechaParent,e.mecha=o,o.y=-140,o.scale=1.4,e.switchMechaAction(o,a.mechaAnimate.Stay,0),e.count=0,e.schedule(e.timer1,3)})},e.prototype.timer1=function(){this.schedule(this.timer2,.2,3)},e.prototype.timer2=function(){this.count++,this.switchMechaAction(this.mecha,a.mechaAnimate.Fire,1),this.showFireShells(this.mecha),4==this.count&&(this.count=0,this.switchMechaAction(this.mecha,a.mechaAnimate.Stay,0))},e.prototype.showFireShells=function(t){var e=cc.instantiate(this.bulletShellsPre);switch(this.clickFlag){case 0:c.default.getInstance().playSound("\u673a\u7532"),e.children[0].active=!0,e.setPosition(-110,120);break;case 1:c.default.getInstance().playSound("\u673a\u7532"),e.children[0].active=!0,e.setPosition(10,160);break;case 2:c.default.getInstance().playSound("RPG"),e.children[2].active=!0,e.setPosition(-120,105)}e.getComponent(cc.RigidBody).linearVelocity=cc.v2(-400,350),e.parent=t;var o=Math.random()>.5?1:-1,n=150+50*Math.random();e.angle=n,cc.tween(e).by(.3,{angle:n*o}).repeat(3).delay(1.5).call(function(){e.destroy()}).start()},e.prototype.switchMechaAction=function(t,e,o){var n=t.getChildByName("body"),i=n.getChildByName("low"),a=n.getChildByName("in"),s=n.getChildByName("up");r.default.Ins.playDragonBone(i,e,o,null),r.default.Ins.playDragonBone(a,e,o,null),r.default.Ins.playDragonBone(s,e,o,null)},e.prototype.freshEquip=function(t){var e=s.default.Ins.mechaData[t.mechaID];s.default.Ins.useingData.mecha==e.mechaID?(this.equipBtn.active=!1,this.unequipBtn.active=!0):(this.equipBtn.active=!0,this.unequipBtn.active=!1),0==e.getNum&&(this.equipBtn.active=!1,this.unequipBtn.active=!1)},e.prototype.freshCostBox=function(t){switch(t.buyType){case 0:this.costBox.children[0].active=!0,this.coinLab.string=String(t.costNum),this.costBox.children[1].active=!1;break;case 1:this.costBox.children[1].active=!0,this.diamondLab.string=String(t.costNum),this.costBox.children[0].active=!1}},e.prototype.loadSkillBlock=function(t){var e=this;this.powerCount=0,this.speedCount=0,this.powerNode.destroyAllChildren(),this.speedNode.destroyAllChildren(),this.scheduleOnce(function(){e.loadPower(t),e.loadSpeed(t)},0)},e.prototype.getSkillNode=function(){return this.pool.size()>0?this.pool.get():cc.instantiate(this.singlePre)},e.prototype.loadSpeed=function(t){var e=this,o=t.speed,n=this.getSkillNode();n.getChildByName("bg").color=cc.color(50,223,17),n.parent=this.speedNode,n.scale=0,cc.tween(n).to(this.skillConfig[0],{scale:this.skillConfig[1]}).call(function(){e.speedCount++,e.speedCount<o&&e.loadSpeed(t)}).to(this.skillConfig[2],{scale:1}).start()},e.prototype.loadPower=function(t){var e=this,o=t.power,n=this.getSkillNode();n.getChildByName("bg").color=cc.color(255,179,0),n.parent=this.powerNode,n.scale=0,cc.tween(n).to(this.skillConfig[0],{scale:this.skillConfig[1]}).call(function(){e.powerCount++,e.powerCount<o&&e.loadPower(t)}).to(this.skillConfig[2],{scale:1}).start()},e.prototype.onDisable=function(){this.speedNode.destroyAllChildren(),this.powerNode.destroyAllChildren(),this.powerCount=0,this.speedCount=0,this.loadPower(this.mechaData[this.clickFlag]),this.loadSpeed(this.mechaData[this.clickFlag])},i([h(cc.SpriteAtlas)],e.prototype,"homeAtlas",void 0),i([h(cc.Node)],e.prototype,"costBox",void 0),i([h(cc.Node)],e.prototype,"mechaParent",void 0),i([h(cc.Node)],e.prototype,"mechaBox",void 0),i([h(cc.Sprite)],e.prototype,"mechaName",void 0),i([h(cc.Sprite)],e.prototype,"mechaDesc",void 0),i([h({type:cc.Node,tooltip:"\u8d2d\u4e70\u673a\u7532"})],e.prototype,"buyGunBtn",void 0),i([h({type:cc.Node,tooltip:"\u88c5\u5907"})],e.prototype,"equipBtn",void 0),i([h({type:cc.Node,tooltip:"\u89e3\u9664\u88c5\u5907"})],e.prototype,"unequipBtn",void 0),i([h(cc.Node)],e.prototype,"powerNode",void 0),i([h(cc.Node)],e.prototype,"speedNode",void 0),i([h(cc.Prefab)],e.prototype,"singlePre",void 0),i([h(cc.Label)],e.prototype,"coinLab",void 0),i([h(cc.Label)],e.prototype,"diamondLab",void 0),i([h(cc.Prefab)],e.prototype,"bulletShellsPre",void 0),e=i([p],e)}(cc.Component);o.default=d,cc._RF.pop()},{"../../manage/AudioMag":"AudioMag","../../manage/ConfigMag":"ConfigMag","../../manage/DialogMag":"DialogMag","../../manage/GameMag":"GameMag","../../manage/ToolsMag":"ToolsMag"}],messageDialog:[function(t,e,o){"use strict";cc._RF.push(e,"6ed812WTw5Nia3cLcGaXUzg","messageDialog");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,s=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(s=(a<3?i(s):a>3?i(e,o,s):i(e,o))||s);return a>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../manage/DialogMag"),s=cc._decorator,r=s.ccclass,c=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pfbMsg=null,e.y0=0,e.y1=150,e.idelMsgs=[],e.usedMsgs=[],e}return n(e,t),e.prototype.onLoad=function(){this.pfbMsg.active=!1},e.prototype.onInit=function(t){console.log(t),this.node.zIndex=1e4;var e=this.getMsg();e.getChildByName("txtMsg").getComponent(cc.Label).string=t,e.setSiblingIndex(e.parent.childrenCount-1),this.playAction(e)},e.prototype.getMsg=function(){var t;return(t=this.idelMsgs.length>0?this.idelMsgs.pop():cc.instantiate(this.pfbMsg)).active=!0,t.parent=this.pfbMsg.parent,this.usedMsgs.push(t),t},e.prototype.playAction=function(t){var e=this;t.y=this.y0,t.opacity=255,cc.Tween.stopAllByTarget(t),cc.tween(t).set({position:cc.v3(0,this.y0,0),opacity:255}).delay(.5).to(.5,{position:cc.v3(0,this.y1,0),opacity:0}).call(function(){e.endAction(t)}).start()},e.prototype.endAction=function(t){t.active=!1;for(var e=0;e<this.usedMsgs.length;e++)if(t==this.usedMsgs[e]){this.usedMsgs.splice(e,1);break}this.idelMsgs.push(t),this.usedMsgs.length>0||a.default.Ins.removePlane(a.DialogPath.MessageDialog)},i([c({type:cc.Node,tooltip:"\u6d88\u606f\u9884\u5236"})],e.prototype,"pfbMsg",void 0),e=i([r],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../manage/DialogMag":"DialogMag"}],moreGameDialog:[function(t,e,o){"use strict";cc._RF.push(e,"ae232ij9QhLu47hJgBQ9yaK","moreGameDialog");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,s=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(s=(a<3?i(s):a>3?i(e,o,s):i(e,o))||s);return a>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../hutui/Hts"),s=t("../manage/ToolsMag"),r=t("../manage/DialogMag"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.closeBtn=null,e.scrollView=null,e.content=null,e.index=0,e.getBoxData=null,e.speed=.3,e.bid=null,e}return n(e,t),e.prototype.onInit=function(t){if(!cc.sys.isBrowser){this.node.zIndex=8e3,this.node.active=!1,this.bid=t;var e=this;a.hts.getBox(t,function(t,o){t?console.error("getBox",t):(console.log("\u66f4\u591a\u6e38\u620fgetBox",o[0]),e.node.active=!0,e.getBoxData=o[0],e.loadItem())}),this.closeBtn.on(cc.Node.EventType.TOUCH_END,function(){s.default.Ins.buttonAction(this.closeBtn,function(){r.default.Ins.removePlane(r.DialogPath.MoreGameDialog)}.bind(this))},this)}},e.prototype.scrollMove=function(){var t=this;this.scrollView.scrollTo(cc.v2(1,0),this.speed,!1),this.scheduleOnce(function(){t.scrollView.scrollTo(cc.v2(0,0),t.speed,!1)},this.speed+.4)},e.prototype.loadItem=function(){var t=this;s.default.Ins.getHomeResource("prefab/other/moreGameItem",function(e){var o=cc.instantiate(e);o.getComponent("moreGameItem").init(t.getBoxData[t.index],t.bid),o.parent=t.content,t.index++,t.index<t.getBoxData.length?t.loadItem():(t.speed=t.getBoxData.length*t.speed,t.scrollMove(),t.schedule(function(){t.scrollMove()},2.15*t.speed))})},i([u(cc.Node)],e.prototype,"closeBtn",void 0),i([u(cc.ScrollView)],e.prototype,"scrollView",void 0),i([u(cc.Node)],e.prototype,"content",void 0),e=i([l],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../hutui/Hts":"Hts","../manage/DialogMag":"DialogMag","../manage/ToolsMag":"ToolsMag"}],moreGameItem:[function(t,e,o){"use strict";cc._RF.push(e,"57eaaSPdxxIgZEbr2shIOjV","moreGameItem");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,s=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(s=(a<3?i(s):a>3?i(e,o,s):i(e,o))||s);return a>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../manage/GameMag"),s=t("../sdk/SdkManager"),r=cc._decorator,c=r.ccclass,l=r.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.moreGameImg=null,e.moreGameName=null,e.hotIcon=null,e}return n(e,t),e.prototype.init=function(t,e){if(!cc.sys.isBrowser){var o=this;cc.assetManager.loadRemote(t.iconUrl,function(e,n){e?console.error("loadRemote\u51fa\u9519",e):(o.moreGameImg.spriteFrame=new cc.SpriteFrame(n),o.moreGameName.string=String(t.txt),t.mark.length>0&&(o.hotIcon.active=!0))}),this.node.on(cc.Node.EventType.TOUCH_END,function(){a.default.Ins.showJumpToGame||(a.default.Ins.showJumpToGame=!0,s.default.instance.openOtherGame(t,e))},this)}},i([l(cc.Sprite)],e.prototype,"moreGameImg",void 0),i([l(cc.Label)],e.prototype,"moreGameName",void 0),i([l({type:cc.Node,tooltip:"\u70ed\u95e8\u89d2\u6807"})],e.prototype,"hotIcon",void 0),e=i([c],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../manage/GameMag":"GameMag","../sdk/SdkManager":"SdkManager"}],musicSetting:[function(t,e,o){"use strict";cc._RF.push(e,"b332cGVvmxF1YCcmMjdvjpA","musicSetting");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,s=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(s=(a<3?i(s):a>3?i(e,o,s):i(e,o))||s);return a>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../manage/AudioMag"),s=cc._decorator,r=s.ccclass,c=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.musicBtn=null,e.soundBtn=null,e}return n(e,t),e.prototype.onLoad=function(){this.musicBtn.on(cc.Node.EventType.TOUCH_END,this.onMusicBtn,this),this.soundBtn.on(cc.Node.EventType.TOUCH_END,this.onSoundBtn,this)},e.prototype.onMusicBtn=function(t){a.default.getInstance().changeMusicState();var e=t.target.getChildByName("off").active;t.target.getChildByName("off").active=!e},e.prototype.onSoundBtn=function(t){a.default.getInstance().changeSoundState();var e=t.target.getChildByName("off").active;t.target.getChildByName("off").active=!e},i([c(cc.Node)],e.prototype,"musicBtn",void 0),i([c(cc.Node)],e.prototype,"soundBtn",void 0),e=i([r],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../manage/AudioMag":"AudioMag"}],passBullet:[function(t,e,o){"use strict";cc._RF.push(e,"d635biXU7lEPofVydC5c4tn","passBullet");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,s=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(s=(a<3?i(s):a>3?i(e,o,s):i(e,o))||s);return a>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,r=a.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.passBulletCollider=null,e.dir=0,e}return n(e,t),e.prototype.init=function(t){var e=this;this.dir=t,this.node.scaleX=t;var o=cc.view.getVisibleSize().width-110;this.node.width=o/2,this.passBulletCollider.size.width=o/2,this.passBulletCollider.offset.x=o/2/2,this.scheduleOnce(function(){e.node&&e.node.destroy()},.3)},i([r(cc.BoxCollider)],e.prototype,"passBulletCollider",void 0),e=i([s],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],pauseDialog:[function(t,e,o){"use strict";cc._RF.push(e,"21965JYv1dBUqoqTlQsoU0V","pauseDialog");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,s=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(s=(a<3?i(s):a>3?i(e,o,s):i(e,o))||s);return a>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../manage/GameMag"),s=t("../manage/AudioMag"),r=t("../manage/DialogMag"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.resumeBtn=null,e.retryBtn=null,e.menuBtn=null,e}return n(e,t),e.prototype.onInit=function(){a.default.Ins.gamePause=!0,this.resumeBtn.on(cc.Node.EventType.TOUCH_START,this.onResumeBtn,this),this.retryBtn.on(cc.Node.EventType.TOUCH_START,this.onRetryBtn,this),this.menuBtn.on(cc.Node.EventType.TOUCH_START,this.onMenuBtn,this)},e.prototype.onResumeBtn=function(){s.default.getInstance().playSound("\u6309\u94ae\u97f3"),cc.director.emit("resumeGame"),r.default.Ins.removePlane(r.DialogPath.PauseDialog)},e.prototype.onRetryBtn=function(){s.default.getInstance().playSound("\u6309\u94ae\u97f3"),cc.director.loadScene(a.default.Ins.gameScene)},e.prototype.onMenuBtn=function(){s.default.getInstance().playSound("\u6309\u94ae\u97f3"),cc.director.loadScene(a.default.Ins.homeScene)},e.prototype.onDisable=function(){a.default.Ins.gamePause=!1},i([u(cc.Node)],e.prototype,"resumeBtn",void 0),i([u(cc.Node)],e.prototype,"retryBtn",void 0),i([u(cc.Node)],e.prototype,"menuBtn",void 0),e=i([l],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../manage/AudioMag":"AudioMag","../manage/DialogMag":"DialogMag","../manage/GameMag":"GameMag"}],resultDialog:[function(t,e,o){"use strict";cc._RF.push(e,"8afed/KKFpGV5nng6SLb+Ir","resultDialog");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,s=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(s=(a<3?i(s):a>3?i(e,o,s):i(e,o))||s);return a>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../manage/GameMag"),s=t("../manage/ToolsMag"),r=t("../manage/AudioMag"),c=t("../manage/DialogMag"),l=t("../manage/ConfigMag"),u=t("../hutui/Hts"),p=cc._decorator,h=p.ccclass,d=p.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.homeAtlas=null,e.failNode=null,e.adviseNode=null,e.popupNode=null,e.successNode=null,e.content=null,e.okBtn=null,e.cancelBtn=null,e.retryBtn=null,e.menuBtn=null,e.continueBtn=null,e.bloodLab=null,e.killsLab=null,e.timerLab=null,e.rewardTitle=null,e.rewardLab=null,e.failIcon=null,e.gradeBox=null,e.successCircle=null,e.failCircle=null,e.missionReward=null,e.part1=null,e.missionCoinLab=null,e.missionDiamondLab=null,e.iconImage1=null,e.iconImage2=null,e.tryBtn1=null,e.rewardBtn2=null,e.rewardNumLab=null,e.leftScroll=null,e.rightScroll=null,e.leftContent=null,e.rightContent=null,e.rewardNum=null,e.scaleTime=.25,e.gameSuccess=null,e.gunData=null,e.index=0,e.speed=1,e.bid="5fdc8a6bd1b5c92d77836336",e.getBoxData=null,e}return n(e,t),e.prototype.onInit=function(t){if(this.gameSuccess=t,this.showMoreGame(),c.default.Ins.removePlane(c.DialogPath.PauseDialog),this.okBtn.on(cc.Node.EventType.TOUCH_END,this.onOK,this),this.retryBtn.on(cc.Node.EventType.TOUCH_END,this.onRetry,this),this.cancelBtn.on(cc.Node.EventType.TOUCH_END,this.onCancel,this),this.menuBtn.on(cc.Node.EventType.TOUCH_END,this.onMenuBtn,this),this.tryBtn1.on(cc.Node.EventType.TOUCH_END,this.onTryBtn1,this),this.rewardBtn2.on(cc.Node.EventType.TOUCH_END,this.onRewardBtn2,this),t)return a.default.Ins.updateLevel(),r.default.getInstance().playSound("\u80dc\u5229"),this.showSuccess(),void this.continueBtn.on(cc.Node.EventType.TOUCH_END,this.onMenuBtn,this);this.popupNode.active=!0},e.prototype.showMoreGame=function(){if(!cc.sys.isBrowser){var t=this;u.hts.getBox(this.bid,function(e,o){e?console.error("getBox",e):(console.log("\u7ad6\u8f6e\u64adgetBox",o[0]),t.getBoxData=o[0],t.leftScroll.node.active=!0,t.loadLeftItem())})}},e.prototype.scrollMove=function(){var t=this;this.leftScroll.scrollTo(cc.v2(0,0),this.speed,!1),this.rightScroll.scrollTo(cc.v2(0,0),this.speed,!1),this.scheduleOnce(function(){t.leftScroll.scrollTo(cc.v2(0,1),t.speed,!1),t.rightScroll.scrollTo(cc.v2(0,1),t.speed,!1)},this.speed+.5)},e.prototype.loadLeftItem=function(){var t=this;s.default.Ins.getHomeResource("prefab/other/moreGameItem",function(e){var o=cc.instantiate(e);o.getComponent("moreGameItem").init(t.getBoxData[t.index],t.bid),o.parent=t.leftContent,t.index++,t.index<t.getBoxData.length/2?t.loadLeftItem():(t.rightScroll.node.active=!0,t.loadRightItem())})},e.prototype.loadRightItem=function(){var t=this;s.default.Ins.getHomeResource("prefab/other/moreGameItem",function(e){var o=cc.instantiate(e);o.getComponent("moreGameItem").init(t.getBoxData[t.index]),o.parent=t.rightContent,t.index++,t.index<t.getBoxData.length?t.loadRightItem():(t.speed=5*t.speed,t.scrollMove(),t.schedule(function(){t.scrollMove()},2.2*t.speed))})},e.prototype.showSuccess=function(){for(var t=a.default.Ins.taskTypeArr,e=[],o=0;o<t.length;o++)t[o]!=a.default.Ins.taskType&&e.push(t[o]);a.default.Ins.taskTypeArr=e,this.content.y=0,this.successNode.scale=0,this.successNode.active=!0,cc.tween(this.successNode).to(this.scaleTime,{scale:1}).start(),this.showContent()},e.prototype.onRetry=function(){r.default.getInstance().playSound("\u6309\u94ae\u97f3"),a.default.Ins.tryGun=null,a.default.Ins.tryGunBullet=null,a.default.Ins.tryGunEquip=null,cc.director.loadScene(a.default.Ins.gameScene)},e.prototype.onOK=function(){r.default.getInstance().playSound("\u6309\u94ae\u97f3"),a.default.Ins.currency.diamond>=a.default.Ins.reviveDiamod?(a.default.Ins.updateCurrency(1,-a.default.Ins.reviveDiamod),cc.director.emit("updateCurrency"),cc.director.emit("revive"),cc.director.emit("reviveInitRoleBlood"),c.default.Ins.removePlane(c.DialogPath.ResultDialog)):c.default.Ins.show(c.DialogPath.MessageDialog,c.DialogScript.MessageDialog,["\u94bb\u77f3\u4e0d\u8db3"])},e.prototype.onDestroy=function(){a.default.Ins.gameOver=!1},e.prototype.onMenuBtn=function(){r.default.getInstance().playSound("\u6309\u94ae\u97f3"),cc.director.loadScene(a.default.Ins.homeScene)},e.prototype.onCancel=function(){var t=this;r.default.getInstance().playSound("\u6309\u94ae\u97f3"),this.popupNode.active=!1,this.failIcon.active=!0,this.failNode.scale=0;var e=cc.spawn(cc.rotateBy(this.scaleTime,360),cc.scaleTo(this.scaleTime,1.8));cc.tween(this.failIcon).then(e).to(.04,{scale:2.1}).to(.04,{scale:2}).delay(.7).call(function(){t.failIcon.active=!1,t.failNode.active=!0,cc.tween(t.failNode).parallel(cc.tween().to(t.scaleTime,{scale:1}),cc.tween().call(function(){t.showContent()})).delay(1).parallel(cc.tween().to(.1,{position:cc.v3(0,t.failNode.y+85,0)}),cc.tween().call(function(){cc.tween(t.content).to(.1,{position:cc.v3(0,t.content.y+85,0)}).start(),t.showAdvise()})).start()}).start()},e.prototype.showAdvise=function(){var t=[];a.default.Ins.gunData.forEach(function(e){e.geted||t.push(e)});var e=t.length;if(0!=e){var o=Math.floor(Math.random()*e);this.gunData=t[o],this.iconImage1.spriteFrame=this.homeAtlas.getSpriteFrame("gun_"+t[o].gunID)}else this.part1.active=!1;this.rewardNum=Math.floor(200*Math.random()+300),this.rewardNumLab.string=String(this.rewardNum),this.adviseNode.active=!0,cc.tween(this.adviseNode).to(.1,{position:cc.v3(0,-250,0)}).to(.02,{position:cc.v3(0,-280,0)}).to(.02,{position:cc.v3(0,-257,0)}).to(.02,{position:cc.v3(0,-273,0)}).start()},e.prototype.onTryBtn1=function(){r.default.getInstance().playSound("\u6309\u94ae\u97f3");var t=this.gunData.gunID,e=JSON.parse(JSON.stringify(a.default.Ins.useingData)).gunEquip;if(e.length<4){for(var o=0;o<e.length&&e[o]!=t;o++)if(-1==e[o]){e[o]=t;break}}else e[3]=t;a.default.Ins.tryGunEquip=e,a.default.Ins.tryGun=t,0==l.default.Ins.getGunData()[t].buyOnceNum?a.default.Ins.tryGunBullet=0:a.default.Ins.tryGunBullet=a.default.Ins.initTryGunBullet,console.log(a.default.Ins.tryGunEquip),cc.director.loadScene(a.default.Ins.gameScene)},e.prototype.onRewardBtn2=function(){r.default.getInstance().playSound("\u6309\u94ae\u97f3"),a.default.Ins.updateCurrency(0,this.rewardNum),cc.director.emit("updateCurrency"),cc.tween(this.adviseNode).to(.3,{position:cc.v3(0,-520,0)}).call(function(){cc.director.loadScene(a.default.Ins.homeScene)}).start()},e.prototype.showContent=function(){var t=this;this.content.scale=0,this.content.active=!0;var e=(new Date).getTime();e-=a.default.Ins.timeStart,a.default.Ins.roleBlood<=0&&(a.default.Ins.roleBlood=0);var o=0,n=0,i=0;this.killsLab.string=String(o),this.bloodLab.string="0%",this.timerLab.string=s.default.Ins.formateSeconds(0),this.rewardLab.node.active=this.gameSuccess,this.rewardTitle.active=this.gameSuccess,this.gameSuccess?this.showSuccessData():this.missionReward.active=!1,cc.tween(this.content).to(this.scaleTime,{scale:1}).call(function(){t.showGrade(),a.default.Ins.gameKillNum>0&&t.schedule(function(){o++,t.killsLab.string=String(o)},.03,a.default.Ins.gameKillNum-1),a.default.Ins.roleBlood>0&&t.schedule(function(){i+=1,t.bloodLab.string=String(i+"%")},.02,100*a.default.Ins.roleBlood-1),t.schedule(function(){n+=2,t.timerLab.string=s.default.Ins.formateSeconds(n)},.02,Math.floor(Math.floor(e/1e3)-1)/2)}).start()},e.prototype.showSuccessData=function(){var t=a.default.Ins.missionData.coinNum,e=a.default.Ins.missionData.diamondNum;this.missionCoinLab.string=String(t),this.missionDiamondLab.string=String(e);var o=0;switch(this.checkGrade()){case 0:o=Math.floor(.2*t);break;case 1:o=Math.floor(.1*t)}a.default.Ins.updateCurrency(0,t+o),a.default.Ins.updateCurrency(1,e),this.rewardLab.string=String(o),cc.director.emit("updateCurrency")},e.prototype.showGrade=function(){var t=this.checkGrade(),e=3==t?this.failCircle:this.successCircle;e.active=!0,cc.tween(e).to(.2,{scale:.8}).to(.07,{scale:1.2}).to(.07,{scale:1}).repeatForever(cc.tween().by(5,{angle:-360})).start(),this.gradeBox.children[t].active=!0,cc.tween(this.gradeBox).to(.2,{scale:.8}).to(.07,{scale:1.2}).to(.07,{scale:1}).start()},e.prototype.checkGrade=function(){var t=a.default.Ins.roleBlood,e=null;return this.gameSuccess?1==t?e=0:t<1&&t>=.9?e=1:t<.9&&(e=2):e=3,e},i([d(cc.SpriteAtlas)],e.prototype,"homeAtlas",void 0),i([d(cc.Node)],e.prototype,"failNode",void 0),i([d(cc.Node)],e.prototype,"adviseNode",void 0),i([d(cc.Node)],e.prototype,"popupNode",void 0),i([d(cc.Node)],e.prototype,"successNode",void 0),i([d(cc.Node)],e.prototype,"content",void 0),i([d(cc.Node)],e.prototype,"okBtn",void 0),i([d(cc.Node)],e.prototype,"cancelBtn",void 0),i([d(cc.Node)],e.prototype,"retryBtn",void 0),i([d(cc.Node)],e.prototype,"menuBtn",void 0),i([d(cc.Node)],e.prototype,"continueBtn",void 0),i([d(cc.Label)],e.prototype,"bloodLab",void 0),i([d(cc.Label)],e.prototype,"killsLab",void 0),i([d(cc.Label)],e.prototype,"timerLab",void 0),i([d({type:cc.Node,tooltip:"\u6210\u529f\u989d\u5916\u5956\u52b1"})],e.prototype,"rewardTitle",void 0),i([d({type:cc.Label,tooltip:"\u6210\u529f\u989d\u5916\u5956\u52b1"})],e.prototype,"rewardLab",void 0),i([d(cc.Node)],e.prototype,"failIcon",void 0),i([d(cc.Node)],e.prototype,"gradeBox",void 0),i([d({type:cc.Node,tooltip:"\u8bc4\u7ea7\u7684\u5708\u5708"})],e.prototype,"successCircle",void 0),i([d({type:cc.Node,tooltip:"\u8bc4\u7ea7\u7684\u5708\u5708"})],e.prototype,"failCircle",void 0),i([d(cc.Node)],e.prototype,"missionReward",void 0),i([d(cc.Node)],e.prototype,"part1",void 0),i([d({type:cc.Label,tooltip:"\u4efb\u52a1\u5956\u52b1-\u91d1\u5e01"})],e.prototype,"missionCoinLab",void 0),i([d({type:cc.Label,tooltip:"\u4efb\u52a1\u5956\u52b1-\u94bb\u77f3"})],e.prototype,"missionDiamondLab",void 0),i([d({type:cc.Sprite,tooltip:"\u7b2c1\u628a\u8bd5\u7528\u6b66\u5668\u56fe\u7247"})],e.prototype,"iconImage1",void 0),i([d({type:cc.Sprite,tooltip:"\u7b2c2\u628a\u8bd5\u7528\u6b66\u5668\u56fe\u7247"})],e.prototype,"iconImage2",void 0),i([d({type:cc.Node,tooltip:"\u7b2c1\u628a\u7684\u8bd5\u7528\u6309\u94ae"})],e.prototype,"tryBtn1",void 0),i([d({type:cc.Node,tooltip:"\u91d1\u5e01\u5956\u52b1\u6309\u94ae"})],e.prototype,"rewardBtn2",void 0),i([d({type:cc.Label,tooltip:"\u5931\u8d25\u7684\u91d1\u5e01\u5956\u52b1"})],e.prototype,"rewardNumLab",void 0),i([d({type:cc.ScrollView,tooltip:"\u5de6\u8fb9\u7684\u4e92\u63a8\u8f6e\u64ad"})],e.prototype,"leftScroll",void 0),i([d({type:cc.ScrollView,tooltip:"\u53f3\u8fb9\u7684\u4e92\u63a8\u8f6e\u64ad"})],e.prototype,"rightScroll",void 0),i([d({type:cc.Node,tooltip:""})],e.prototype,"leftContent",void 0),i([d({type:cc.Node,tooltip:""})],e.prototype,"rightContent",void 0),e=i([h],e)}(cc.Component);o.default=f,cc._RF.pop()},{"../hutui/Hts":"Hts","../manage/AudioMag":"AudioMag","../manage/ConfigMag":"ConfigMag","../manage/DialogMag":"DialogMag","../manage/GameMag":"GameMag","../manage/ToolsMag":"ToolsMag"}],role:[function(t,e,o){"use strict";cc._RF.push(e,"0ab88N2RZFC2584ZFi0R6cd","role");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,s=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(s=(a<3?i(s):a>3?i(e,o,s):i(e,o))||s);return a>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../manage/GameMag"),s=t("../manage/AudioMag"),r=t("../manage/ToolsMag"),c=t("../manage/ConfigMag"),l=cc._decorator,u=l.ccclass,p=l.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gameAtlas=null,e.bloodBar=null,e.gameRoleBlood=null,e.assistStatus=null,e.blood=0,e.info=null,e.assistHurtNum=null,e}return n(e,t),e.prototype.onLoad=function(){this.bloodBar.progress=1;var t=a.default.Ins.trySkin||a.default.Ins.useingData.skin,e=c.default.Ins.getSkinData()[t];e&&(this.info=e,this.blood=e.blood+10),cc.director.on("hurtRole",this.hurtRole,this),cc.director.on("reviveInitRoleBlood",this.reviveInitRoleBlood,this),cc.director.on("useAssistBlood",this.useAssistBlood,this),cc.director.on("useAssistHurt",this.useAssistHurt,this)},e.prototype.showRoleBlood=function(){this.gameRoleBlood.children.forEach(function(t){t.stopAllActions(),cc.tween(t).to(.3,{opacity:255}).to(.3,{opacity:0}).start()})},e.prototype.reviveInitRoleBlood=function(){a.default.Ins.roleBlood=1,this.bloodBar.progress=1},e.prototype.useAssistBlood=function(t){this.showShine(),this.bloodBar.progress+=t/100,this.bloodBar.progress>1&&(this.bloodBar.progress=1,a.default.Ins.roleBlood=1)},e.prototype.useAssistHurt=function(t,e){var o=this;this.showShine();var n=this.assistStatus.node;n.active=!0,this.assistStatus.spriteFrame=this.gameAtlas.getSpriteFrame("status_1");var i=cc.sequence(cc.scaleTo(.25,1.1),cc.scaleTo(.25,1)).repeat(50);n.stopAllActions(),cc.tween(n).then(i).start(),this.assistHurtNum=t,this.scheduleOnce(function(){n.stopAllActions(),n.active=!1,o.assistHurtNum=null},e)},e.prototype.hurtRole=function(t){if(!(a.default.Ins.gamePause||a.default.Ins.gameOver||this.bloodBar.progress<=0||a.default.Ins.isUseingMecha)){this.showRoleBlood(),s.default.getInstance().playSound("\u88ab\u653b\u51fb\u53d7\u4f24");var e=this.assistHurtNum?t-t*(this.assistHurtNum/100):t,o=e-e*(this.info.armor/10),n=Number((o/this.blood).toFixed(2));this.bloodBar.progress-=n,a.default.Ins.roleBlood=Number(this.bloodBar.progress.toFixed(2)),this.bloodBar.progress<=0&&(s.default.getInstance().playSound("\u6b7b\u4ea1"),cc.director.emit("gameOver",!1))}},e.prototype.showShine=function(){var t=this;r.default.Ins.getGameResource("prefab/shine",function(e){cc.instantiate(e).parent=t.node})},i([p(cc.SpriteAtlas)],e.prototype,"gameAtlas",void 0),i([p(cc.ProgressBar)],e.prototype,"bloodBar",void 0),i([p(cc.Node)],e.prototype,"gameRoleBlood",void 0),i([p({type:cc.Sprite,tooltip:"\u5403\u4e86\u968f\u673a\u51fa\u73b0\u7684\u8f85\u52a9\u9053\u5177\u540e\u51fa\u73b0\u5728\u5934\u4e0a\u7684\u73a9\u610f"})],e.prototype,"assistStatus",void 0),e=i([u],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../manage/AudioMag":"AudioMag","../manage/ConfigMag":"ConfigMag","../manage/GameMag":"GameMag","../manage/ToolsMag":"ToolsMag"}],shopDialog:[function(t,e,o){"use strict";cc._RF.push(e,"bc200VMYuFC+IMjGewa0Qop","shopDialog");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,s=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(s=(a<3?i(s):a>3?i(e,o,s):i(e,o))||s);return a>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../manage/GameMag"),s=t("../manage/AudioMag"),r=t("../manage/DialogMag"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tabActiveBox=null,e.pageBox=null,e.backBtn=null,e.buyBtn=null,e.lastIndex=null,e.nowIndex=null,e}return n(e,t),e.prototype.onInit=function(t){this.initUI(t),this.backBtn.on(cc.Node.EventType.TOUCH_END,this.onBackBtn,this),this.buyBtn.on(cc.Node.EventType.TOUCH_END,this.onBuyBtn,this)},e.prototype.initUI=function(t){this.node.zIndex=1e3,this.nowIndex=t||0,this.tabActiveBox.children[this.nowIndex].active=!0,this.pageBox.children[this.nowIndex].active=!0,this.lastIndex=this.nowIndex},e.prototype.onBuyBtn=function(){s.default.getInstance().playSound("\u6309\u94ae\u97f3"),this.updatePage(2)},e.prototype.onBackBtn=function(){var t=this;s.default.getInstance().playSound("\u6309\u94ae\u97f3"),cc.tween(this.backBtn).to(.3,{opacity:0}).call(function(){t.backBtn.opacity=255,r.default.Ins.removePlane(r.DialogPath.ShopDialog)}).start()},e.prototype.updatePage=function(t){s.default.getInstance().playSound("\u6309\u94ae\u97f3"),this.nowIndex!=t&&(this.nowIndex=t,this.pageBox.children[this.nowIndex].active=!0,this.pageBox.children[this.lastIndex].active=!1,this.tabActiveBox.children[this.nowIndex].active=!0,this.tabActiveBox.children[this.lastIndex].active=!1,this.lastIndex=this.nowIndex)},e.prototype.skinBtn=function(t,e){this.updatePage(Number(e))},e.prototype.gunBtn=function(t,e){this.updatePage(Number(e))},e.prototype.assistBtn=function(t,e){this.updatePage(Number(e))},e.prototype.mechaBtn=function(t,e){this.updatePage(Number(e))},e.prototype.onDisable=function(){a.default.Ins.scrollToSkin=null,a.default.Ins.scrollToGun=null,a.default.Ins.scrollToAssist=null,a.default.Ins.scrollToMecha=null},i([u(cc.Node)],e.prototype,"tabActiveBox",void 0),i([u(cc.Node)],e.prototype,"pageBox",void 0),i([u(cc.Node)],e.prototype,"backBtn",void 0),i([u(cc.Node)],e.prototype,"buyBtn",void 0),e=i([l],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../manage/AudioMag":"AudioMag","../manage/DialogMag":"DialogMag","../manage/GameMag":"GameMag"}],signInDialog:[function(t,e,o){"use strict";cc._RF.push(e,"be13d8m+gtAEryY1a1f2iRk","signInDialog");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,s=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(s=(a<3?i(s):a>3?i(e,o,s):i(e,o))||s);return a>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../manage/ToolsMag"),s=t("../manage/DialogMag"),r=cc._decorator,c=r.ccclass,l=r.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.closeBtn=null,e.tipModal=null,e.normalBtn=null,e.videoBtn=null,e}return n(e,t),e.prototype.onInit=function(){this.initUI(),this.normalBtn.on(cc.Node.EventType.TOUCH_END,this.onNormalGet,this),this.videoBtn.on(cc.Node.EventType.TOUCH_END,this.onVideoGet,this),this.closeBtn.on(cc.Node.EventType.TOUCH_END,function(){a.default.Ins.buttonAction(this.closeBtn,function(){s.default.Ins.removePlane(s.DialogPath.SignInDialog)}.bind(this))},this)},e.prototype.initUI=function(){},e.prototype.onNormalGet=function(){},e.prototype.onVideoGet=function(){},e.prototype.onDay1=function(t,e){},e.prototype.onDay2=function(t,e){},e.prototype.onDay3=function(t,e){},e.prototype.onDay4=function(t,e){},e.prototype.onDay5=function(t,e){},e.prototype.onDay6=function(t,e){},e.prototype.onDay7=function(t,e){},i([l({type:cc.Node,tooltip:""})],e.prototype,"closeBtn",void 0),i([l({type:cc.Node,tooltip:"\u63d0\u793a\u6846"})],e.prototype,"tipModal",void 0),i([l({type:cc.Node,tooltip:"\u666e\u901a\u9886\u53d6"})],e.prototype,"normalBtn",void 0),i([l({type:cc.Node,tooltip:"\u89c6\u9891\u9886\u53d6"})],e.prototype,"videoBtn",void 0),e=i([c],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../manage/DialogMag":"DialogMag","../manage/ToolsMag":"ToolsMag"}],signItem:[function(t,e,o){"use strict";cc._RF.push(e,"884fb2kaH5Ltov2vGDwkDvf","signItem");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,s=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(s=(a<3?i(s):a>3?i(e,o,s):i(e,o))||s);return a>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../manage/GameMag"),s=cc._decorator,r=s.ccclass,c=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.homeAtlas=null,e.normalBg=null,e.activeBg=null,e.coinNum=null,e.index=0,e}return n(e,t),e.prototype.init=function(t){this.index=t,a.default.Ins.signInData[t]?this.node.getComponent(cc.Sprite).spriteFrame=this.activeBg:this.node.getComponent(cc.Sprite).spriteFrame=this.normalBg},i([c(cc.SpriteAtlas)],e.prototype,"homeAtlas",void 0),i([c(cc.SpriteFrame)],e.prototype,"normalBg",void 0),i([c(cc.SpriteFrame)],e.prototype,"activeBg",void 0),i([c(cc.Label)],e.prototype,"coinNum",void 0),e=i([r],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../manage/GameMag":"GameMag"}],skinItem:[function(t,e,o){"use strict";cc._RF.push(e,"e2bb1NwI9lK6bQe3DpSSGP9","skinItem");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,s=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(s=(a<3?i(s):a>3?i(e,o,s):i(e,o))||s);return a>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../manage/GameMag"),s=t("../../manage/ConfigMag"),r=t("../../manage/AudioMag"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e.actives=null,e.equipIcon=null,e.index=0,e}return n(e,t),e.prototype.init=function(t,e){var o=a.default.Ins.useingData.skin,n=a.default.Ins.skinData[o];t==n.skinID&&n.geted&&(this.equipIcon.active=!0,this.actives.active=!0);var i=s.default.Ins.getSkinData()[o];o==i.skinID&&cc.director.emit("freshSkinPageUI",i),this.index=t,this.icon.spriteFrame=e,cc.director.on("freshSkinItemUI",this.freshSkinItemUI,this),this.icon.node.on(cc.Node.EventType.TOUCH_END,this.onStartTouch,this)},e.prototype.onStartTouch=function(){r.default.getInstance().playSound("\u6309\u94ae\u97f3"),cc.director.emit("freshSkinPageUI",s.default.Ins.getSkinData()[this.index]),this.node.parent.children.forEach(function(t){t.getChildByName("active").active=!1}),this.actives.active=!0},e.prototype.freshSkinItemUI=function(t){this.equipIcon.active=!1,t==this.index&&(this.equipIcon.active=!0)},i([u(cc.Sprite)],e.prototype,"icon",void 0),i([u(cc.Node)],e.prototype,"actives",void 0),i([u(cc.Node)],e.prototype,"equipIcon",void 0),e=i([l],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../../manage/AudioMag":"AudioMag","../../manage/ConfigMag":"ConfigMag","../../manage/GameMag":"GameMag"}],skinPage:[function(t,e,o){"use strict";cc._RF.push(e,"898b0KPKA5Mna7954TKyHRs","skinPage");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,s=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(s=(a<3?i(s):a>3?i(e,o,s):i(e,o))||s);return a>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../manage/ConfigMag"),s=t("../../manage/GameMag"),r=t("../../manage/AudioMag"),c=t("../../manage/ToolsMag"),l=t("../../manage/DialogMag"),u=cc._decorator,p=u.ccclass,h=u.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.homeAtlas=null,e.skinBox=null,e.footDragon=null,e.bodyDragon=null,e.buyBtn=null,e.equipBtn=null,e.unequipBtn=null,e.costBox=null,e.coinLab=null,e.diamondLab=null,e.skinName=null,e.skinDesc=null,e.singlePre=null,e.armorNode=null,e.speedNode=null,e.bloodNode=null,e.bulletShellsPre=null,e.shellsBox=null,e.skinData=[],e.clickFlag=null,e.index=0,e.len=0,e.pool=null,e.skillConfig=[],e.armorCount=0,e.speedCount=0,e.bloodCount=0,e}return n(e,t),e.prototype.onEnable=function(){if(this.skillConfig=s.default.Ins.skillConfig,this.skinData=a.default.Ins.getSkinData(),this.len=this.skinData.length,this.index<this.len)this.loadItem();else{var t=s.default.Ins.useingData.skin,e=a.default.Ins.getSkinData()[t];this.freshSkinPageUI(e)}this.pool=new cc.NodePool;for(var o=0;o<35;o++){var n=cc.instantiate(this.singlePre);this.pool.put(n)}cc.director.on("freshSkinPageUI",this.freshSkinPageUI,this),this.buyBtn.on(cc.Node.EventType.TOUCH_END,this.onBuy,this),this.equipBtn.on(cc.Node.EventType.TOUCH_END,this.onEquip,this),this.unequipBtn.on(cc.Node.EventType.TOUCH_END,this.onUnequip,this)},e.prototype.loadItem=function(){var t=this;c.default.Ins.getHomeResource("prefab/shop/skinItem",function(e){var o=cc.instantiate(e),n=t.homeAtlas.getSpriteFrame("skin_"+t.index);o.getComponent("skinItem").init(t.index,n),o.parent=t.skinBox,t.index++,t.index<t.len&&t.loadItem()})},e.prototype.freshSkinPageUI=function(t){this.clickFlag!=t.skinID?(this.clickFlag=t.skinID,this.skinName.spriteFrame=this.homeAtlas.getSpriteFrame("sname_"+t.skinID),this.skinDesc.spriteFrame=this.homeAtlas.getSpriteFrame("skinDesc_"+t.skinID),this.showRole(t),this.freshBtns(),this.loadSkillBlock(t),this.freshCostBox(t)):this.showRole(t)},e.prototype.showRole=function(t){var e=0;switch(s.default.Ins.shopShowSkin=t.skinID,t.skinID){case 0:e=4;break;case 1:e=18;break;case 2:e=9;break;case 3:e=11;break;case 4:e=2}s.default.Ins.shopShowGun=e,this.shellsBox.removeAllChildren(),this.freshRole(0,0),this.unschedule(this.fire1),this.unschedule(this.fire2_cb),this.unschedule(this.fire2),e<=2||18==e?this.schedule(this.fire1,2.5):this.schedule(this.fire2,3)},e.prototype.fire1=function(){var t=this;s.default.Ins.playGunSound(),this.freshRole(1,1),this.scheduleOnce(function(){t.freshRole(0,0)},.5)},e.prototype.fire2_cb=function(){var t=this;s.default.Ins.playGunSound(),this.freshRole(1,1),this.showFireShells(),this.scheduleOnce(function(){t.freshRole(0,0)},.7)},e.prototype.fire2=function(){this.unschedule(this.fire2_cb),this.schedule(this.fire2_cb,.8,1)},e.prototype.freshRole=function(t,e,o){void 0===o&&(o=null);var n=a.default.Ins.roleAnimate(),i=null;switch(t){case 0:i=n.stay;break;case 1:i=n.fire;break;case 2:i=n.walk;break;case 3:i=n.walkFire;break;case 4:i=n.die}this.freshRoleDragon(i,e)},e.prototype.freshRoleDragon=function(t,e,o){void 0===o&&(o=null);var n=this;s.default.Ins.changeSkin(this.bodyDragon,function(){c.default.Ins.playDragonBone(n.bodyDragon.node,t,e,function(){o&&o()})}),s.default.Ins.changeFoot(this.footDragon),c.default.Ins.playDragonBone(this.footDragon.node,"stay",0,function(){}.bind(this))},e.prototype.showFireShells=function(){var t=cc.instantiate(this.bulletShellsPre);t.getComponent(cc.RigidBody).linearVelocity=cc.v2(-400,350),t.parent=this.shellsBox,11==s.default.Ins.shopShowGun?t.children[1].active=!0:t.children[0].active=!0;var e=Math.random()>.5?1:-1,o=150+50*Math.random();t.angle=o,t.scale=.7,cc.tween(t).by(.3,{angle:o*e}).repeat(3).delay(1.5).call(function(){t.destroy()}).start()},e.prototype.freshCostBox=function(t){var e=s.default.Ins.searchSkinData(s.default.Ins.skinData,t.skinID);if(e){if(e.geted)return void(this.costBox.active=!1);this.costBox.active=!0}switch(t.buyType){case 0:this.costBox.children[0].active=!0,this.coinLab.string=String(t.costNum),this.costBox.children[1].active=!1;break;case 1:this.costBox.children[1].active=!0,this.diamondLab.string=String(t.costNum),this.costBox.children[0].active=!1}},e.prototype.freshBtns=function(){var t=s.default.Ins.skinData[this.clickFlag],e=s.default.Ins.useingData.skin;t.geted?(this.buyBtn.active=!1,e==t.skinID?(this.unequipBtn.active=!0,this.equipBtn.active=!1):(this.unequipBtn.active=!1,this.equipBtn.active=!0)):this.buyBtn.active=!0},e.prototype.onBuy=function(){r.default.getInstance().playSound("\u6309\u94ae\u97f3");var t=s.default.Ins.currency,e=a.default.Ins.getSkinData()[this.clickFlag];if(0==e.buyType){if(t.coin<e.costNum)return void l.default.Ins.show(l.DialogPath.MessageDialog,l.DialogScript.MessageDialog,["\u91d1\u5e01\u4e0d\u8db3"])}else if(t.diamond<e.costNum)return void l.default.Ins.show(l.DialogPath.MessageDialog,l.DialogScript.MessageDialog,["\u94bb\u77f3\u4e0d\u8db3"]);s.default.Ins.updateSkinData(this.clickFlag),s.default.Ins.updateCurrency(e.buyType,-e.costNum),cc.director.emit("updateCurrency"),this.freshBtns(),this.freshCostBox(e)},e.prototype.onEquip=function(){r.default.getInstance().playSound("\u6309\u94ae\u97f3"),s.default.Ins.updateUseingDataBySkin(this.clickFlag),this.freshBtns(),cc.director.emit("freshSkinItemUI",this.clickFlag)},e.prototype.onUnequip=function(){r.default.getInstance().playSound("\u6309\u94ae\u97f3"),s.default.Ins.updateUseingDataBySkin(-1),this.freshBtns(),cc.director.emit("freshSkinItemUI",0)},e.prototype.loadSkillBlock=function(t){var e=this;this.armorCount=0,this.speedCount=0,this.bloodCount=0,this.armorNode.destroyAllChildren(),this.speedNode.destroyAllChildren(),this.bloodNode.destroyAllChildren(),this.scheduleOnce(function(){e.loadArmor(t),e.loadSpeed(t),e.loadBlood(t)},0)},e.prototype.getSkillNode=function(){return this.pool.size()>0?this.pool.get():cc.instantiate(this.singlePre)},e.prototype.loadArmor=function(t){var e=this,o=t.armor,n=this.getSkillNode();n.stopAllActions(),n.getChildByName("bg").color=cc.color(255,179,0),n.parent=this.armorNode,n.scale=0,cc.tween(n).to(this.skillConfig[0],{scale:this.skillConfig[1]}).call(function(){e.armorCount++,e.armorCount<o&&e.loadArmor(t)}).to(this.skillConfig[2],{scale:1}).start()},e.prototype.loadSpeed=function(t){var e=this,o=t.speed,n=this.getSkillNode();n.stopAllActions(),n.getChildByName("bg").color=cc.color(50,223,17),n.parent=this.speedNode,n.scale=0,cc.tween(n).to(this.skillConfig[0],{scale:this.skillConfig[1]}).call(function(){e.speedCount++,e.speedCount<o&&e.loadSpeed(t)}).to(this.skillConfig[2],{scale:1}).start()},e.prototype.loadBlood=function(t){var e=this,o=t.blood,n=this.getSkillNode();n.stopAllActions(),n.getChildByName("bg").color=cc.color(0,134,240),n.parent=this.bloodNode,n.scale=0,cc.tween(n).to(this.skillConfig[0],{scale:this.skillConfig[1]}).call(function(){e.bloodCount++,e.bloodCount<o&&e.loadBlood(t)}).to(this.skillConfig[2],{scale:1}).start()},e.prototype.onDisable=function(){s.default.Ins.shopShowGun=null,s.default.Ins.shopShowSkin=null,this.armorCount=0,this.speedCount=0,this.bloodCount=0,this.armorNode.destroyAllChildren(),this.speedNode.destroyAllChildren(),this.bloodNode.destroyAllChildren(),this.loadArmor(this.skinData[this.clickFlag]),this.loadSpeed(this.skinData[this.clickFlag]),this.loadBlood(this.skinData[this.clickFlag])},i([h(cc.SpriteAtlas)],e.prototype,"homeAtlas",void 0),i([h(cc.Node)],e.prototype,"skinBox",void 0),i([h(dragonBones.ArmatureDisplay)],e.prototype,"footDragon",void 0),i([h(dragonBones.ArmatureDisplay)],e.prototype,"bodyDragon",void 0),i([h({type:cc.Node,tooltip:"\u8d2d\u4e70\u76ae\u80a4"})],e.prototype,"buyBtn",void 0),i([h({type:cc.Node,tooltip:"\u88c5\u5907"})],e.prototype,"equipBtn",void 0),i([h({type:cc.Node,tooltip:"\u89e3\u9664\u88c5\u5907"})],e.prototype,"unequipBtn",void 0),i([h(cc.Node)],e.prototype,"costBox",void 0),i([h(cc.Label)],e.prototype,"coinLab",void 0),i([h(cc.Label)],e.prototype,"diamondLab",void 0),i([h(cc.Sprite)],e.prototype,"skinName",void 0),i([h(cc.Sprite)],e.prototype,"skinDesc",void 0),i([h(cc.Prefab)],e.prototype,"singlePre",void 0),i([h(cc.Node)],e.prototype,"armorNode",void 0),i([h(cc.Node)],e.prototype,"speedNode",void 0),i([h(cc.Node)],e.prototype,"bloodNode",void 0),i([h({type:cc.Prefab,tooltip:"\u86cb\u58f3\u9884\u5236\u4f53"})],e.prototype,"bulletShellsPre",void 0),i([h({type:cc.Node,tooltip:"\u86cb\u58f3\u7236\u8282\u70b9"})],e.prototype,"shellsBox",void 0),e=i([p],e)}(cc.Component);o.default=d,cc._RF.pop()},{"../../manage/AudioMag":"AudioMag","../../manage/ConfigMag":"ConfigMag","../../manage/DialogMag":"DialogMag","../../manage/GameMag":"GameMag","../../manage/ToolsMag":"ToolsMag"}],stageAssist:[function(t,e,o){"use strict";cc._RF.push(e,"dc3c6300lhCL467JoLmB4Zb","stageAssist");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,s=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(s=(a<3?i(s):a>3?i(e,o,s):i(e,o))||s);return a>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../manage/ConfigMag"),s=t("../manage/GameMag"),r=cc._decorator,c=r.ccclass,l=(r.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.assistType=null,e}return n(e,t),e.prototype.init=function(t){this.assistType=t},e.prototype.onCollisionEnter=function(t,e){2==t.tag&&this.useAssist()},e.prototype.useAssist=function(){var t=a.default.Ins.getAssistData(),e=s.default.Ins.searchAssistData(t,this.assistType),o=e.assistType,n=e.assistNum,i=e.assistTime,r=e.assistSize;switch(o){case 0:cc.director.emit("useAssistBlood",n);break;case 1:cc.director.emit("useAssistHurt",n,i);break;case 2:cc.director.emit("useAssist",2,n,i);break;case 3:cc.director.emit("useAssist",3,n,i);break;case 4:cc.director.emit("useAssistMissile",r)}this.node.parent.destroy()},e=i([c],e)}(cc.Component));o.default=l,cc._RF.pop()},{"../manage/ConfigMag":"ConfigMag","../manage/GameMag":"GameMag"}],stageBox:[function(t,e,o){"use strict";cc._RF.push(e,"23ec44nfm9Mp4c1nSSIpcQl","stageBox");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,s=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(s=(a<3?i(s):a>3?i(e,o,s):i(e,o))||s);return a>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../manage/GameMag"),s=cc._decorator,r=s.ccclass,c=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.homeAtlas=null,e.box=null,e.light=null,e.stageAssist=null,e.icon=null,e.enemyTag=0,e.opened=!1,e}return n(e,t),e.prototype.init=function(t){this.enemyTag=t;var e=this.box.position;cc.tween(this.box).repeatForever(cc.tween().to(.5,{position:cc.v3(0,e.y-6,0)}).to(.5,{position:cc.v3(0,e.y+6,0)})).start()},e.prototype.onCollisionEnter=function(t,e){1==t.tag?(t.node&&a.default.Ins.putBullet(t.node),this.openBox()):6==t.tag||8==t.tag||11==t.tag||14==t.tag||18==t.tag?(t.node.destroy(),this.openBox()):10==t.tag&&(t.enabled=!1,this.openBox())},e.prototype.openBox=function(){this.showLight(),this.opened=!0,this.box.active=!1,this.node.getComponent(cc.Collider).enabled=!1,Math.random()>.8?(cc.director.emit("loadEnemy",this.enemyTag),this.node.destroy()):this.showAssist()},e.prototype.showLight=function(){var t=this;this.light.scale=.6,this.light.active=!0,cc.tween(this.light).to(.12,{scale:1.6}).call(function(){t.light&&(t.light.active=!1)}).start()},e.prototype.showAssist=function(){var t=this;this.node.stopAllActions(),this.stageAssist.scale=0,this.stageAssist.active=!0;var e=Math.floor(15*Math.random());this.stageAssist.getComponent("stageAssist").init(e),this.icon.spriteFrame=this.homeAtlas.getSpriteFrame("assistIcon_"+e);var o=this.stageAssist.position,n=o.y+150;cc.tween(this.stageAssist).to(.3,{position:cc.v3(o.x,n,0),scale:1.7}).repeatForever(cc.tween().to(.5,{position:cc.v3(o.x,n+13,0)}).to(.5,{position:cc.v3(o.x,n,0)})).start(),this.scheduleOnce(function(){t.node&&t.node.destroy()},20)},i([c(cc.SpriteAtlas)],e.prototype,"homeAtlas",void 0),i([c(cc.Node)],e.prototype,"box",void 0),i([c(cc.Node)],e.prototype,"light",void 0),i([c(cc.Node)],e.prototype,"stageAssist",void 0),i([c(cc.Sprite)],e.prototype,"icon",void 0),e=i([r],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../manage/GameMag":"GameMag"}],taskDialog:[function(t,e,o){"use strict";cc._RF.push(e,"e02886dLDtDW7F+N99y0Geh","taskDialog");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,s=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(s=(a<3?i(s):a>3?i(e,o,s):i(e,o))||s);return a>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../manage/ConfigMag"),s=t("../manage/ToolsMag"),r=t("../manage/DialogMag"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.content=null,e.closeBtn=null,e.taskBox=null,e.screenW=null,e.index=0,e.len=null,e}return n(e,t),e.prototype.onInit=function(){var t=a.default.Ins.getTaskData();this.len=t.length,this.loadItem(),this.closeBtn.on(cc.Node.EventType.TOUCH_END,this.onCloseBtn,this),this.screenW=cc.view.getVisibleSize().width,this.content.x=-this.screenW,cc.tween(this.content).to(.2,{position:cc.v3(60,-10,0)}).to(.1,{position:cc.v3(0,-10,0)}).start()},e.prototype.loadItem=function(){var t=this;s.default.Ins.getHomeResource("prefab/other/taskItem",function(e){var o=cc.instantiate(e);o.getComponent("taskItem").init(t.index),o.parent=t.taskBox,t.index++,t.index<t.len&&t.loadItem()})},e.prototype.onCloseBtn=function(){s.default.Ins.buttonAction(this.closeBtn,function(){cc.tween(this.content).to(.25,{position:cc.v3(-this.screenW,-10,0)}).call(function(){r.default.Ins.removePlane(r.DialogPath.TaskDialog)}).start()}.bind(this))},i([u(cc.Node)],e.prototype,"content",void 0),i([u(cc.Node)],e.prototype,"closeBtn",void 0),i([u(cc.Node)],e.prototype,"taskBox",void 0),e=i([l],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../manage/ConfigMag":"ConfigMag","../manage/DialogMag":"DialogMag","../manage/ToolsMag":"ToolsMag"}],taskItem:[function(t,e,o){"use strict";cc._RF.push(e,"084e028DJtFEJcDvVVWNrDQ","taskItem");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,s=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(s=(a<3?i(s):a>3?i(e,o,s):i(e,o))||s);return a>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../manage/GameMag"),s=t("../manage/AudioMag"),r=t("../manage/ToolsMag"),c=t("../manage/ConfigMag"),l=cc._decorator,u=l.ccclass,p=l.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.homeAtlas=null,e.text=null,e.coinLab=null,e.diamondLab=null,e.notReward=null,e.reward=null,e.percent=null,e.gouNode=null,e.barNode=null,e.index=0,e.cigData=null,e.initPs=[],e}return n(e,t),e.prototype.init=function(t){var e=this.node.height;this.initPs=[0,-(e+15),-2*(e+15),-3*(e+15)],this.node.y=-t*(e+15),this.cigData=c.default.Ins.getTaskData()[t],this.index=t,this.text.string=String("\u6740\u654c\u6570"+this.cigData.killNum+"\u4e2a"),this.reward.active=!1,this.notReward.active=!1,0==this.cigData.rewardType?(this.coinLab.node.parent.active=!0,this.coinLab.string=String(this.cigData.rewardNum)):(this.diamondLab.node.parent.active=!0,this.diamondLab.string=String(this.cigData.rewardNum)),this.progressUI(),this.reward.on(cc.Node.EventType.TOUCH_END,this.onReward,this)},e.prototype.progressUI=function(){var t=this,e=a.default.Ins.taskData;if(e.killSum-this.cigData.killNum>=0)e.data[this.index].geted?(this.gouNode.active=!0,this.reward.parent.active=!1):this.reward.active=!0;else{this.notReward.active=!0;var o=Math.ceil(e.killSum/this.cigData.killNum*100);this.scheduleOnce(function(){o>0&&(o--,t.schedule(function(){var e=Number(t.percent.string);e+=1,t.percent.string=String(e)},0,o))},.4),this.schedule(function(){t.barNode.width+=160/t.cigData.killNum},.016,e.killSum-1)}},e.prototype.onReward=function(){var t=this;s.default.getInstance().playSound("\u6309\u94ae\u97f3"),a.default.Ins.updateTaskGet(this.index),a.default.Ins.updateCurrency(this.cigData.rewardType,this.cigData.rewardNum),cc.director.emit("judgeTaskArrow"),cc.director.emit("updateCurrency"),cc.tween(this.reward.parent).to(.2,{opacity:0}).call(function(){t.gouNode.opacity=0,t.gouNode.active=!0,cc.tween(t.gouNode).to(.2,{opacity:255}).call(function(){}).start()}).start()},e.prototype.loadItem=function(){var t=this;t.node.active=!1;var e=t.node.parent.children.length;r.default.Ins.getHomeResource("prefab/other/taskItem",function(o){var n=cc.instantiate(o);n.getComponent("taskItem").init(e),n.y=t.initPs[3],n.parent=t.node.parent,n.opacity=0,cc.tween(n).to(.2,{opacity:255}).call(function(){var e=[];t.node.parent.children.forEach(function(t){1==t.active&&e.push(t)}),e.forEach(function(e,o){cc.tween(e).to(.35,{position:cc.v3(0,t.initPs[o],0)}).start()})}).start()})},i([p(cc.SpriteAtlas)],e.prototype,"homeAtlas",void 0),i([p(cc.Label)],e.prototype,"text",void 0),i([p(cc.Label)],e.prototype,"coinLab",void 0),i([p(cc.Label)],e.prototype,"diamondLab",void 0),i([p(cc.Node)],e.prototype,"notReward",void 0),i([p(cc.Node)],e.prototype,"reward",void 0),i([p(cc.Label)],e.prototype,"percent",void 0),i([p(cc.Node)],e.prototype,"gouNode",void 0),i([p(cc.Node)],e.prototype,"barNode",void 0),e=i([u],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../manage/AudioMag":"AudioMag","../manage/ConfigMag":"ConfigMag","../manage/GameMag":"GameMag","../manage/ToolsMag":"ToolsMag"}],task:[function(t,e,o){"use strict";cc._RF.push(e,"33e03yY83RH3b1L8g+M0Ckw","task");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,s=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(s=(a<3?i(s):a>3?i(e,o,s):i(e,o))||s);return a>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../manage/AudioMag"),s=t("../manage/DialogMag"),r=cc._decorator,c=r.ccclass,l=(r.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.taskIndex=null,e.mapIndex=null,e}return n(e,t),e.prototype.init=function(t,e){this.taskIndex=t,this.mapIndex=e;var o=this.node.position,n=cc.repeatForever(cc.sequence(cc.moveTo(.7,o.x,o.y-6),cc.moveTo(.7,o.x,o.y+6)));this.node.scale=0,cc.tween(this.node).to(.4,{scale:1.3}).call(function(t){cc.tween(t).then(n).start()}).start(),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouch,this)},e.prototype.onTouch=function(){a.default.getInstance().playSound("\u6309\u94ae\u97f3"),s.default.Ins.show(s.DialogPath.FrontGameDialog,s.DialogScript.FrontGameDialog,[this.taskIndex,this.mapIndex])},e=i([c],e)}(cc.Component));o.default=l,cc._RF.pop()},{"../manage/AudioMag":"AudioMag","../manage/DialogMag":"DialogMag"}],tomb:[function(t,e,o){"use strict";cc._RF.push(e,"c90a3W9k69GqI+83MAXrOJF","tomb");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,s=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(s=(a<3?i(s):a>3?i(e,o,s):i(e,o))||s);return a>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,r=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.onLoad=function(){var t=4*Math.random()+1;cc.tween(this.node).repeatForever(cc.tween().to(1.5,{scale:0}).delay(.5).to(1.5,{scale:2.5}).delay(t)).start()},e=i([s],e)}(cc.Component));o.default=r,cc._RF.pop()},{}]},{},["achieveDialog","frontGameDialog","guideDialog","messageDialog","moreGameDialog","pauseDialog","resultDialog","shopDialog","signInDialog","taskDialog","boomBullet","boomMGLBullet","bullet","fireAndiceBullet","mechaBullet","passBullet","enemy","gameAssistItem","gameGunItem","gameMain","ice","role","stageAssist","stageBox","achieveItem","homeMain","assistEquip","assistItem","assistPage","gunEquip","gunItem","gunPage","mechaItem","mechaPage","skinItem","skinPage","signItem","task","taskItem","Hts","htSdk","loading","AudioMag","ConfigMag","DialogMag","GameMag","ToolsMag","currency","moreGameItem","musicSetting","ISdk","SdkManager","ShareManager","Interstitial","Video","Wechat","tomb"]);